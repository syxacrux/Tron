webpackJsonp([1],{"+nxH":function(t,e,s){"use strict";var a=s("Xxa5"),i=s.n(a),n=s("exGp"),o=s.n(n),l=s("//Fk"),r=s.n(l),c=s("//TE"),u=s("Rvav"),d=s("sHg/"),m={data:function(){return{isLoading:!1,id:null,form:{username:"",password:"",realname:"",studio_id:[],tache_ids:[],group_id:"",remark:""},studiosOptions:[],tachesOptions:[],groupsOptions:[],selectedStudios:[],selectedTaches:[],selectedStudioIds:[],selectedTacheIds:[],password:"",rules:{username:[{required:!0,message:"请输入用户名"}],password:[{required:!0,message:"请输入密码"}],realname:[{required:!0,message:"请输入真实姓名"}],studio_id:[{required:!0,message:"请选择所属工作室"}],tache_ids:[{required:!0,message:"请选择至少一个环节"}],group_id:[{required:!0,message:"请选择角色"}]}}},methods:{selectTachesCheckbox:function(){var t=this,e=!1;return this.selectedTaches=this.form.tache_ids,this.selectedTacheIds=[],_(this.tachesOptions).forEach(function(e){t.selectedTaches.toString().indexOf(e.explain)>-1&&t.selectedTacheIds.push(e.id)}),this.selectedTacheIds.length&&(this.form.tache_ids=_.cloneDeep(this.selectedTacheIds),e=!0),this.selectedTacheIds=[],e},add:function(){var t=this;this.selectTachesCheckbox()?this.$refs.form.validate(function(e){e&&(t.isLoading=!t.isLoading,t.apiPut("admin/users/",t.id,t.form).then(function(e){t.handelResponse(e,function(e){d.a.toastMsg("success","编辑成功"),setTimeout(function(){t.goback()},1500)},function(){t.isLoading=!t.isLoading})}))}):d.a.toastMsg("warning","请选择至少一个环节")},getAllGroups:function(){var t=this;return new r.a(function(e,s){t.apiGet("admin/groups").then(function(s){t.handelResponse(s,function(t){e(t.list)})})})},getAllStudios:function(){var t=this;return new r.a(function(e,s){t.apiGet("admin/studios").then(function(s){t.handelResponse(s,function(t){e(t.list)})})})},getAllTaches:function(){var t=this;return new r.a(function(e,s){t.apiGet("admin/taches").then(function(s){t.handelResponse(s,function(t){e(t.list)})})})},getCompleteData:function(){var t=this;return o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAllGroups();case 2:return t.groupsOptions=e.sent,e.next=5,t.getAllStudios();case 5:return t.studiosOptions=e.sent,e.next=8,t.getAllTaches();case 8:t.tachesOptions=e.sent,t.apiGet("admin/users/"+t.id).then(function(e){t.handelResponse(e,function(e){t.form.username=e.username,t.form.password=(e.password,""),t.form.realname=e.realname,t.form.studio_id=e.studio_id,_(t.tachesOptions).forEach(function(s){_(e.tache_ids.split(",")).forEach(function(e){e==s.id&&(console.log(s),t.form.tache_ids.push(s.explain))})}),t.form.group_id=e.groups[0].id,t.form.remark=e.remark})});case 10:case"end":return e.stop()}},e,t)}))()}},created:function(){this.id=this.$route.params.id,this.getCompleteData()},mixins:[c.a,u.a]},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"m-b-20"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:"/admin/users/list"}}},[t._v("成员管理")]),t._v(" "),s("el-breadcrumb-item",[t._v("编辑成员")])],1)],1),t._v(" "),s("div",{staticClass:"m-l-50 m-t-30 w-800"},[s("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[s("el-form-item",{attrs:{label:"用户名",prop:"username"}},[s("el-input",{staticClass:"h-40 w-200",attrs:{maxlength:12,disabled:!0},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username","string"==typeof e?e.trim():e)},expression:"form.username"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.password,callback:function(e){t.$set(t.form,"password","string"==typeof e?e.trim():e)},expression:"form.password"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"真实姓名",prop:"realname"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.realname,callback:function(e){t.$set(t.form,"realname","string"==typeof e?e.trim():e)},expression:"form.realname"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"所属工作室",prop:"studio_id"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.studio_id,callback:function(e){t.$set(t.form,"studio_id",e)},expression:"form.studio_id"}},t._l(t.studiosOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),s("el-form-item",{attrs:{label:"环节",prop:"tache_ids"}},[s("el-checkbox-group",{attrs:{size:"small"},model:{value:t.form.tache_ids,callback:function(e){t.$set(t.form,"tache_ids",e)},expression:"form.tache_ids"}},t._l(t.tachesOptions,function(e){return s("el-checkbox-button",{key:e.id,attrs:{label:e.explain,value:e.id}},[t._v(t._s(e.explain))])}))],1),t._v(" "),s("el-form-item",{attrs:{label:"角色",prop:"group_id"}},[s("el-select",{staticClass:"w-200",attrs:{placeholder:"请选择角色"},model:{value:t.form.group_id,callback:function(e){t.$set(t.form,"group_id",e)},expression:"form.group_id"}},t._l(t.groupsOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.remark,value:t.id}})}))],1),t._v(" "),s("el-form-item",{attrs:{label:"备注"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark","string"==typeof e?e.trim():e)},expression:"form.remark"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){t.add()}}},[t._v("提交")]),t._v(" "),s("el-button",{on:{click:function(e){t.goback()}}},[t._v("返回")])],1)],1)],1)])},staticRenderFns:[]};var f=s("VU/8")(m,p,!1,function(t){s("DE/I")},null,null);e.a=f.exports},"//TE":function(t,e,s){"use strict";var a=s("Dd8w"),i=s.n(a),n=s("YtJ0"),o=s("YaEn"),l=s("mtWM"),r=s.n(l),c=s("RRJN"),u=s.n(c),d=s("lbHh"),m=s.n(d),p=s("M4fF"),f=s.n(p),h=s("sHg/"),_=(s("IPo5"),s("vgQg")),v=s("A6Iy");window.store=n.a,window.HOST="http://127.0.0.1:8888/",window.baseUrl="http://127.0.0.1:8888/",r.a.defaults.baseURL=_.a.HOST,r.a.defaults.timeout=15e3,r.a.defaults.headers.authKey=u.a.get("authKey"),r.a.defaults.headers["Content-Type"]="application/json";var g={methods:i()({},v.a,{handelResponse:function(t,e,s){h.a.closeGlobalLoading(),200==t.code?e(t.data):("function"==typeof s&&s(),this.handleError(t))},handleError:function(t){var e=this;if(t.code)switch(t.code){case 101:if(m.a.get("rememberPwd")){var s={rememberKey:u.a.get("rememberKey")};this.reAjax("admin/base/relogin",s).then(function(t){e.handelResponse(t,function(t){e.resetCommonData(t)})})}else h.a.toastMsg("error",t.error),setTimeout(function(){o.a.replace("/")},1500);break;case 103:h.a.toastMsg("error",t.error),setTimeout(function(){o.a.replace("/")},1500);break;default:h.a.toastMsg("error",t.error)}},resetCommonData:function(t){var e=this;f()(t.menusList).forEach(function(t,e){t.selected=0==e}),u.a.set("authKey",t.authKey),u.a.set("expire",t.expire),u.a.set("rememberKey",t.rememberKey),n.a.dispatch("setMenus",t.menusList),n.a.dispatch("setRules",t.authList),n.a.dispatch("setUsers",t.userInfo),r.a.defaults.headers.authKey=u.a.get("authKey");var s="";s=t.menusList[0].url?t.menusList[0].url:t.menusList[0].child[0].child[0].url,setTimeout(function(){var t=e.$route.path;s!=t?o.a.replace(s):h.a.shallowRefresh(e.$route.name)},1e3)}}),computed:{showLoading:function(){return n.a.state.globalLoading}}};e.a=g},"15T8":function(t,e){},"18i5":function(t,e){},"2K/B":function(t,e){},"3ySv":function(t,e,s){"use strict";var a=s("FZtq"),i=s("//TE"),n=s("Rvav"),o=s("M4fF"),l=s.n(o),r=s("sHg/"),c={data:function(){return{loading:!1,id:null,form:{title:"",rule_name:"",rule_id:null,pid:"",menu_type:"",url:"",module:"",menu:"",sort:""},options:[{id:0,title:"无"}],rules:{title:[{required:!0,message:"请输入菜单标题"}],rule_name:[{required:!0,message:"请绑定权限标识"}],menu_type:[{required:!0,message:"请选择菜单类型"}],module:[{required:!0,message:"请填写菜单模块"}],pid:[{type:"number",required:!0,message:"请选择上级菜单"}]}}},methods:{edit:function(t){var e=this;this.loading=!0,this.$refs.form.validate(function(t){t&&(e.isLoading=!0,e.apiPut("admin/menus/",e.id,e.form).then(function(t){e.loading=!1,e.handelResponse(t,function(t){e.isLoading=!1,r.a.toastMsg("success","编辑成功"),setTimeout(function(){e.goback()},1500)},function(){e.isLoading=!1})}))})},openRule:function(){this.$refs.ruleList.open()},goback:function(){this.$router.go(-1)},getMenus:function(){var t=this;this.apiGet("admin/menus").then(function(e){t.handelResponse(e,function(e){var s=[];l()(e).forEach(function(t){3!=t.level&&1==t.menu_type&&s.push(t)}),t.options=t.options.concat(s)})})}},created:function(){var t=this;this.getMenus(),this.id=this.$route.params.id,this.apiGet("admin/menus/"+this.id).then(function(e){t.handelResponse(e,function(e){e.menu_type=e.menu_type.toString(),t.form=e})})},components:{ruleList:a.a},mixins:[i.a,n.a]},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"m-l-50 m-t-30 w-500"},[s("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"110px"}},[s("el-form-item",{attrs:{label:"标题",prop:"title"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.title,callback:function(e){t.$set(t.form,"title","string"==typeof e?e.trim():e)},expression:"form.title"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"绑定权限标识",prop:"rule_name"}},[s("el-input",{staticClass:"h-40 fl w-200",attrs:{disabled:!0},model:{value:t.form.rule_name,callback:function(e){t.$set(t.form,"rule_name","string"==typeof e?e.trim():e)},expression:"form.rule_name"}}),t._v(" "),s("el-button",{staticClass:"fl m-l-30",on:{click:function(e){t.openRule()}}},[t._v("查找")])],1),t._v(" "),s("el-form-item",{attrs:{label:"菜单类型",prop:"menu_type"}},[s("el-radio-group",{model:{value:t.form.menu_type,callback:function(e){t.$set(t.form,"menu_type",e)},expression:"form.menu_type"}},[s("el-radio",{attrs:{disabled:"",label:"1"}},[t._v("普通三级菜单")]),t._v(" "),s("el-radio",{attrs:{disabled:"",label:"2"}},[t._v("单页菜单")]),t._v(" "),s("el-radio",{attrs:{disabled:"",label:"3"}},[t._v("外链")])],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"上级菜单",prop:"pid"}},[s("el-select",{staticClass:"w-200",attrs:{disabled:"",placeholder:"请选择活动区域"},model:{value:t.form.pid,callback:function(e){t.$set(t.form,"pid",e)},expression:"form.pid"}},t._l(t.options,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}))],1),t._v(" "),s("el-form-item",{attrs:{label:"路径"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.url,callback:function(e){t.$set(t.form,"url","string"==typeof e?e.trim():e)},expression:"form.url"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"模块",prop:"module"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.module,callback:function(e){t.$set(t.form,"module","string"==typeof e?e.trim():e)},expression:"form.module"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"所属菜单"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.menu,callback:function(e){t.$set(t.form,"menu","string"==typeof e?e.trim():e)},expression:"form.menu"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"排序"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){t.edit("form")}}},[t._v("提交")]),t._v(" "),s("el-button",{on:{click:function(e){t.goback()}}},[t._v("返回")])],1)],1),t._v(" "),s("ruleList",{ref:"ruleList"})],1)},staticRenderFns:[]},d=s("VU/8")(c,u,!1,null,null,null);e.a=d.exports},"4Y+W":function(t,e,s){"use strict";var a=s("//TE"),i=s("Rvav"),n=(s("M4fF"),s("sHg/")),o={data:function(){return{isLoading:!1,form:{id:"",name:"",pid:null,explain:""},options:[],rules:{name:[{required:!0,message:"请输入部门名称",trigger:"blur"}],pid:[{required:!0,message:"请选择父级部门",trigger:"blur"}]}}},methods:{edit:function(t){var e=this;this.$refs[t].validate(function(t){t&&(e.isLoading=!0,e.apiPut("admin/studios/",e.form.id,e.form).then(function(t){e.handelResponse(t,function(t){e.isLoading=!1,n.a.toastMsg("success","编辑成功"),setTimeout(function(){e.goback()},1500)},function(){e.isLoading=!1})}))})},getStructures:function(){var t=this;this.apiGet("admin/studios").then(function(e){t.handelResponse(e,function(e){t.options=e.list})})},getStudiosInfo:function(){var t=this;this.form.id=this.$route.params.id,this.apiGet("admin/studios/"+this.form.id).then(function(e){t.handelResponse(e,function(e){t.form.name=e.name,t.form.pid=e.pid,t.form.explain=e.explain})})}},created:function(){this.getStructures(),this.getStudiosInfo()},mixins:[a.a,i.a]},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"m-b-20"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:"/admin/studios/list"}}},[t._v("工作室管理")]),t._v(" "),s("el-breadcrumb-item",[t._v("编辑工作室")])],1)],1),t._v(" "),s("div",{staticClass:"m-l-50 m-t-30 w-900"},[s("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[s("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"==typeof e?e.trim():e)},expression:"form.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"父级部门",prop:"pid"}},[s("el-select",{staticClass:"w-200",attrs:{placeholder:"父级部门"},model:{value:t.form.pid,callback:function(e){t.$set(t.form,"pid",e)},expression:"form.pid"}},[s("el-option",{attrs:{label:"无",value:"0"}}),t._v(" "),t._l(t.options,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})],2)],1),t._v(" "),s("el-form-item",{attrs:{label:"备注",prop:"explain"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.explain,callback:function(e){t.$set(t.form,"explain","string"==typeof e?e.trim():e)},expression:"form.explain"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){t.edit("form")}}},[t._v("提交")]),t._v(" "),s("el-button",{on:{click:function(e){t.goback()}}},[t._v("返回")])],1)],1)],1)])},staticRenderFns:[]},r=s("VU/8")(o,l,!1,null,null,null);e.a=r.exports},"5iJw":function(t,e,s){"use strict";s("Nh03");var a=s("//TE"),i=s("sHg/"),n={data:function(){return{waitingCount:"",workingCount:"",suspendCount:"",finishCount:"",dataCount:null,currentPage:1,limit:10}},methods:{handleCurrentChange:function(t){this.getAllTaches(t)},getShotsDetail:function(t){this.$router.push({name:"shotsListDetail",query:{type:t,list:!1}})}},components:{},mixins:[a.a],computed:{addShow:function(){return i.a.getHasRule("shots-save")},inDevelopmentShow:function(){return i.a.getHasRule("shots-in_production_data")},feedbackShow:function(){return i.a.getHasRule("shots-feedback_data")},suspendShow:function(){return i.a.getHasRule("shots-pause_data")},finishShow:function(){return i.a.getHasRule("shots-finish_data")}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shot_list"},[s("div",{staticClass:"m-b-20"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:"/admin/shots/list"}}},[t._v("镜头管理")]),t._v(" "),s("el-breadcrumb-item",[t._v("镜头列表")])],1)],1),t._v(" "),s("div",{staticClass:"m-b-20"},[s("div",{staticClass:"tx-r"},[s("router-link",{attrs:{to:{name:"shotsListDetail",query:{type:"shotsInDevelopment",list:!1}}}},[s("el-tooltip",{attrs:{effect:"dark",content:"镜头进度",placement:"bottom-start"}},[s("el-button",{attrs:{type:"primary",plain:"",size:"mini"}},[s("i",{staticClass:"el-icon-menu"})])],1)],1),t._v(" "),s("router-link",{attrs:{to:{name:"shotsListDetail",query:{type:"list",list:!0}}}},[s("el-tooltip",{attrs:{effect:"dark",content:"镜头列表",placement:"bottom-start"}},[s("el-button",{attrs:{type:"primary",plain:"",size:"mini"}},[s("i",{staticClass:"el-icon-document"})])],1)],1)],1)]),t._v(" "),s("div",{staticClass:"m-b-20 pos-rel"},[t.addShow?s("router-link",{staticClass:"btn-link-large add-btn",attrs:{to:"add"}},[s("i",{staticClass:"el-icon-plus"}),t._v("  添加镜头\n    ")]):t._e(),t._v(" "),s("div",{staticClass:"pos-abs"},[t.inDevelopmentShow?s("el-badge",{staticClass:"item",attrs:{value:t.workingCount,max:10}},[s("el-button",{attrs:{size:"large"},on:{click:function(e){t.getShotsDetail("shotsInDevelopment")}}},[t._v("制作中")])],1):t._e(),t._v(" "),t.feedbackShow?s("el-badge",{staticClass:"item",attrs:{value:t.waitingCount,max:10}},[s("el-button",{attrs:{size:"large"},on:{click:function(e){t.getShotsDetail("shotsInDevelopment")}}},[t._v("反馈中")])],1):t._e(),t._v(" "),t.suspendShow?s("el-badge",{staticClass:"item",attrs:{value:t.suspendCount,max:10}},[s("el-button",{attrs:{size:"large"},on:{click:function(e){t.getShotsDetail("shotsSuspend")}}},[t._v("暂停")])],1):t._e(),t._v(" "),s("el-badge",{staticClass:"item",attrs:{value:t.waitingCount,max:10}},[s("el-button",{attrs:{size:"large"},on:{click:function(e){t.getShotsDetail("shotsNotDevelopment")}}},[t._v("等待资产")])],1),t._v(" "),t.finishShow?s("el-badge",{staticClass:"item",attrs:{value:t.finishCount,max:10}},[s("el-button",{attrs:{size:"large"},on:{click:function(e){t.getShotsDetail("shotsFinish")}}},[t._v("完成")])],1):t._e()],1)],1),t._v(" "),s("div",{staticClass:"shots ovf-hd"},[s("el-col",{staticClass:"shots_list",attrs:{span:12}},[s("el-card",{staticClass:"box-card"},[t._l(4,function(e){return s("div",{key:e,staticClass:"text item1"},[t._v("\n          "+t._s("列表内容 "+e)+"\n        ")])}),t._v(" "),s("div",{staticClass:"box-after"},[s("p",{staticClass:"box-card-p"},[t._v("Liangcy:")]),t._v(" "),s("div",{staticClass:"box-card-div"},[s("p",[t._v("提交文件---fuy003002_rig_liangcy_sdddf_v0101提交dailies。")]),t._v(" "),s("p",[t._v("时间：20180207-14：52")]),t._v(" "),s("p",[t._v("时间：20180207-14：52")])])]),t._v(" "),s("div",{staticClass:"box-after"},[s("p",{staticClass:"box-card-p"},[t._v("Liangcy:")]),t._v(" "),s("div",{staticClass:"box-card-div"},[s("p",[t._v("提交文件---fuy003002_rig_liangcy_sdddf_v0101提交dailies。")]),t._v(" "),s("p",[t._v("时间：20180207-14：52")]),t._v(" "),s("p",[t._v("时间：20180207-14：52")])])])],2),t._v(" "),s("div",{staticClass:"pos-rel p-t-20"},[s("div",{staticClass:"block pages"},[s("el-pagination",{attrs:{layout:"prev, pager, next","page-size":t.limit,"current-page":t.currentPage,total:t.dataCount},on:{"current-change":t.handleCurrentChange}})],1)])],1),t._v(" "),s("el-col",{staticClass:"shots_list",attrs:{span:12}},[s("el-card",{staticClass:"box-card"},[t._l(4,function(e){return s("div",{key:e,staticClass:"text item1"},[t._v("\n          "+t._s("列表内容 "+e)+"\n        ")])}),t._v(" "),s("div",{staticClass:"box-after"},[s("p",{staticClass:"box-card-p"},[t._v("Liangcy:")]),t._v(" "),s("div",{staticClass:"box-card-div"},[s("p",[t._v("提交文件---fuy003002_rig_liangcy_sdddf_v0101提交dailies。")]),t._v(" "),s("p",[t._v("时间：20180207-14：52")]),t._v(" "),s("p",[t._v("时间：20180207-14：52")])])]),t._v(" "),s("div",{staticClass:"box-after"},[s("p",{staticClass:"box-card-p"},[t._v("Liangcy:")]),t._v(" "),s("div",{staticClass:"box-card-div"},[s("p",[t._v("提交文件---fuy003002_rig_liangcy_sdddf_v0101提交dailies。")]),t._v(" "),s("p",[t._v("时间：20180207-14：52")]),t._v(" "),s("p",[t._v("时间：20180207-14：52")])])])],2),t._v(" "),s("div",{staticClass:"pos-rel p-t-20"},[s("div",{staticClass:"block pages"},[s("el-pagination",{attrs:{layout:"prev, pager, next","page-size":t.limit,"current-page":t.currentPage,total:t.dataCount},on:{"current-change":t.handleCurrentChange}})],1)])],1)],1)])},staticRenderFns:[]};var l=s("VU/8")(n,o,!1,function(t){s("18i5")},null,null);e.a=l.exports},"6B9u":function(t,e,s){"use strict";var a=s("//TE"),i=s("Rvav"),n=s("sHg/"),o={data:function(){return{isLoading:!1,form:{name:"",remark:""},rules:{name:[{required:!0,message:"请输入岗位名称",trigger:"blur"}]}}},methods:{add:function(t){var e=this;this.$refs[t].validate(function(t){t&&(e.isLoading=!0,e.apiPost("admin/posts",e.form).then(function(t){e.handelResponse(t,function(t){e.isLoading=!1,n.a.toastMsg("success","添加成功"),setTimeout(function(){e.goback()},1500)},function(){e.isLoading=!1})}))})}},created:function(){n.a.closeGlobalLoading()},mixins:[a.a,i.a]},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"m-l-50 m-t-30 w-900"},[s("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[s("el-form-item",{attrs:{label:"岗位名称",prop:"name"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"==typeof e?e.trim():e)},expression:"form.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"备注"}},[s("el-input",{staticClass:"w-200",attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){t.add("form")}}},[t._v("提交")]),t._v(" "),s("el-button",{on:{click:function(e){t.goback()}}},[t._v("返回")])],1)],1)],1)},staticRenderFns:[]},r=s("VU/8")(o,l,!1,null,null,null);e.a=r.exports},"6tw6":function(t,e){},"8ViC":function(t,e){},"9IJY":function(t,e,s){"use strict";var a=s("//TE"),i=s("Rvav"),n=s("sHg/"),o={data:function(){return{isLoading:!1,form:{tache_name:"",explain:"",sort:""},rules:{tache_name:[{required:!0,message:"请输入环节",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}]}}},methods:{edit:function(t){var e=this;this.$refs[t].validate(function(t){t&&(e.isLoading=!e.isLoading,e.apiPut("admin/taches/",e.id,e.form).then(function(t){e.handelResponse(t,function(t){n.a.toastMsg("success","编辑成功"),setTimeout(function(){e.goback()},1500)},function(){e.isLoading=!e.isLoading})}))})},getTacheInfo:function(){var t=this;this.form.id=this.$route.params.id,this.apiGet("admin/taches/"+this.form.id).then(function(e){t.handelResponse(e,function(e){t.form.id=e.id,t.form.tache_name=e.tache_name,t.form.explain=e.explain,t.form.sort=e.sort})})}},created:function(){this.id=this.$route.params.id,this.getTacheInfo()},mixins:[a.a,i.a]},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"m-b-20"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:"/admin/taches/list"}}},[t._v("环节管理")]),t._v(" "),s("el-breadcrumb-item",[t._v("编辑环节")])],1)],1),t._v(" "),s("div",{staticClass:"m-l-50 m-t-30 w-900"},[s("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[s("el-form-item",{attrs:{label:"环节名称",prop:"tache_name"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.tache_name,callback:function(e){t.$set(t.form,"tache_name","string"==typeof e?e.trim():e)},expression:"form.tache_name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"排序",prop:"sort"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort","string"==typeof e?e.trim():e)},expression:"form.sort"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"备注",prop:"explain"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.explain,callback:function(e){t.$set(t.form,"explain","string"==typeof e?e.trim():e)},expression:"form.explain"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){t.edit("form")}}},[t._v("提交")]),t._v(" "),s("el-button",{on:{click:function(e){t.goback()}}},[t._v("返回")])],1)],1)],1)])},staticRenderFns:[]},r=s("VU/8")(o,l,!1,null,null,null);e.a=r.exports},"9ouo":function(t,e){},A6Iy:function(t,e,s){"use strict";var a=s("//Fk"),i=s.n(a),n=s("mtWM"),o=s.n(n),l=s("IPo5"),r=s("sHg/");e.a={apiGet:function(t,e){return new i.a(function(s,a){o.a.get(t,e).then(function(t){s(t.data)},function(t){a(t),r.a.closeGlobalLoading(),l.a.$message({message:"请求超时，请检查网络",type:"warning"})})})},apiPost:function(t,e){return new i.a(function(s,a){o.a.post(t,e).then(function(t){s(t.data)}).catch(function(t){console.log(t,"e"),s(t),l.a.$message({message:"请求超时，请检查网络",type:"warning"})})})},apiDelete:function(t,e){return new i.a(function(s,a){o.a.delete(t+e).then(function(t){s(t.data)},function(t){a(t),r.a.closeGlobalLoading(),l.a.$message({message:"请求超时，请检查网络",type:"warning"})})})},apiPut:function(t,e,s){return new i.a(function(a,i){o.a.put(t+e,s).then(function(t){a(t.data)},function(t){r.a.closeGlobalLoading(),l.a.$message({message:"请求超时，请检查网络",type:"warning"}),i(t)})})},reAjax:function(t,e){return new i.a(function(s,a){o.a.post(t,e).then(function(t){s(t.data)},function(t){a(t),l.a.$message({message:"请求超时，请检查网络",type:"warning"})})})}}},AHgQ:function(t,e,s){"use strict";var a=s("Nh03"),i=s("//TE"),n=s("sHg/"),o={data:function(){return{tableData:[],dataCount:null,currentPage:1,keywords:"",limit:10,multipleSelection:[]}},methods:{handleSelectionChange:function(t){this.multipleSelection=t},confirmDelete:function(t){var e=this;this.$confirm("确认删除该工作室?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.a.openGlobalLoading(),e.apiDelete("admin/studios/",t.id).then(function(t){n.a.closeGlobalLoading(),e.handelResponse(t,function(t){n.a.toastMsg("success","删除成功"),setTimeout(function(){n.a.shallowRefresh(e.$route.name)},1500)})})}).catch(function(){})},handleCurrentChange:function(t){this.getAllStudios(t)},getAllStudios:function(t){var e=this;this.loading=!0;var s={params:{keywords:this.keywords,page:t,limit:this.limit}};this.apiGet("admin/studios",s).then(function(t){e.handelResponse(t,function(t){e.tableData=t.list,e.dataCount=t.dataCount})})},getKeywords:function(){var t=this.$route.query;t&&(t.keywords?this.keywords=t.keywords:this.keywords="")},init:function(){this.getAllStudios(1)}},created:function(){this.init()},computed:{listShow:function(){return n.a.getHasRule("studios-index")},addShow:function(){return n.a.getHasRule("studios-save")},editShow:function(){return n.a.getHasRule("studios-update")},deleteShow:function(){return n.a.getHasRule("studios-delete")}},components:{btnGroup:a.a},mixins:[i.a]},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"m-b-20"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",[t._v("工作室管理")])],1)],1),t._v(" "),s("div",{staticClass:"m-b-20"},[t.addShow?s("router-link",{staticClass:"btn-link-large add-btn",attrs:{to:"add"}},[s("i",{staticClass:"el-icon-plus"}),t._v("  添加工作室\n    ")]):t._e()],1),t._v(" "),t.listShow?s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"selection-change":t.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{label:"工作室名称",prop:"name"}}),t._v(" "),s("el-table-column",{attrs:{label:"备注",prop:"explain"}}),t._v(" "),t.editShow||t.deleteShow?s("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t.editShow?s("span",[s("router-link",{attrs:{to:{name:"studiosEdit",params:{id:e.row.id}}}},[s("el-button",{attrs:{size:"small",type:"primary"}},[t._v("编辑")])],1)],1):t._e(),t._v(" "),t.deleteShow?s("span",[s("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(s){t.confirmDelete(e.row)}}},[t._v("删除")])],1):t._e()])]}}])}):t._e()],1):t._e(),t._v(" "),s("div",{staticClass:"pos-rel p-t-20"},[s("div",{staticClass:"block pages"},[s("el-pagination",{attrs:{layout:"prev, pager, next","page-size":t.limit,"current-page":t.currentPage,total:t.dataCount},on:{"current-change":t.handleCurrentChange}})],1)])],1)},staticRenderFns:[]},r=s("VU/8")(o,l,!1,null,null,null);e.a=r.exports},AMsI:function(t,e,s){"use strict";var a=s("Xxa5"),i=s.n(a),n=s("exGp"),o=s.n(n),l=s("//Fk"),r=s.n(l),c=s("//TE"),u=s("sHg/"),d={data:function(){return{isArt:!1,isModel:!1,isMap:!1,isBind:!1,isTrack:!1,isAni:!1,isPaint:!1,isSpec:!1,isLight:!1,isSynch:!1,artOfStudio:[],modelOfStudio:[],mapOfStudio:[],bindOfStudio:[],trackOfStudio:[],animateOfStudio:[],paintOfStudio:[],specialOfStudio:[],lightOfStudio:[],synchOfStudio:[],isAddField:!1,isLoading:!1,dialogFormVisible:!1,uploadImageUrl:window.HOST+"/admin/upload_image",projectList:[],studiosListArt:[],studiosListModel:[],studiosListMap:[],studiosListBind:[],studiosListTrack:[],studiosListAnimate:[],studiosListPaint:[],studiosListSpecial:[],studiosListLight:[],studiosListSynch:[],fieldList:[],fieldForm:{project_id:"",name:""},form:{project_id:"",field_id:"",asset_ids:"",shot_image:"",shot_number:"",shot_byname:"",shot_name:"",time:"",ambient:"",plan_start_timestamp:"",plan_end_timestamp:"",shot_explain:"",clip_frame_length:"",frame_range:"",priority_level:"1",difficulty:"1",handle_frame:"",material_frame_length:"",change_speed_info:"",material_number:"",second_company:"",make_demand:""},id:"",image:"",plan_time:"",frame_range1:"",frame_range2:"",handle_frame1:"",handle_frame2:"",rules:{project_id:[{required:!0,message:"请选择项目"}],field_id:[{required:!0,message:"请选择场号"}],shot_image:[{required:!0,message:"请插入镜头缩略图"}],shot_number:[{required:!0,message:"请输入镜头编号"},,{min:3,max:6,message:"长度在3到6个字符"},{pattern:/^[0-9]+$/,message:"镜头编号必须为数字"}],shot_byname:[{required:!0,message:"请输入镜头简称"},{pattern:/^[a-zA-Z]+$/,message:"镜头简称必须为字母"}],shot_name:[{required:!0,message:"请输入镜头名称"},{pattern:/^[\u4E00-\u9FA5]+$/,message:"镜头名称必须为汉字"}],time:[{required:!0,message:"请选择时刻"}],ambient:[{required:!0,message:"请选择环境"}],difficulty:[{required:!0,message:"请选择镜头难度"}],priority_level:[{required:!0,message:"请选择镜头优先级"}]},addFieldRules:{project_id:[{required:!0,message:"请选择项目"}],name:[{required:!0,message:"请输入场号/集号"}]},shotDetail:{}}},methods:{open:function(){this.dialogFormVisible=!0},handleAvatarSuccess:function(t,e){this.image=URL.createObjectURL(e.raw),this.form.shot_image=t.data},beforeAvatarUpload:function(t){var e=t.size/1024/1024<.195;return e||this.$message.error("上传图片大小不能超过 200KB!"),e},addField:function(t){var e=this;this.fieldForm.project_id&&this.fieldForm.name&&(this.isLoading=!this.isLoading,this.apiPost("admin/save_field",this.fieldForm).then(function(t){e.handelResponse(t,function(t){u.a.toastMsg("success","添加成功"),setTimeout(function(){e.isAddField=!1,e.getFields()},1500)},function(){e.isLoading=!e.isLoading})}))},changeTache:function(){var t=this;this.isArt?(0===this.studiosListArt.length&&this.apiGet("shot/get_studio?shot_id="+this.id+"&tache_id=3").then(function(e){t.handelResponse(e,function(e){t.studiosListArt=e.list})}),this.artOfStudio=this.artOfStudio):this.artOfStudio=[],this.isModel?(0===this.studiosListModel.length&&this.apiGet("shot/get_studio?shot_id="+this.id+"&tache_id=4").then(function(e){t.handelResponse(e,function(e){t.studiosListModel=e.list})}),this.modelOfStudio=this.modelOfStudio):this.modelOfStudio=[],this.isMap?(0===this.studiosListMap.length&&this.apiGet("shot/get_studio?shot_id="+this.id+"&tache_id=5").then(function(e){t.handelResponse(e,function(e){t.studiosListMap=e.list})}),this.mapOfStudio=this.mapOfStudio):this.mapOfStudio=[],this.isBind?(0===this.studiosListBind.length&&this.apiGet("shot/get_studio?shot_id="+this.id+"&tache_id=6").then(function(e){t.handelResponse(e,function(e){t.studiosListBind=e.list})}),this.bindOfStudio=this.bindOfStudio):this.bindOfStudio=[],this.isTrack?(0===this.studiosListTrack.length&&this.apiGet("shot/get_studio?shot_id="+this.id+"&tache_id=7").then(function(e){t.handelResponse(e,function(e){t.studiosListTrack=e.list})}),this.trackOfStudio=this.trackOfStudio):this.trackOfStudio=[],this.isAni?(0===this.studiosListAnimate.length&&this.apiGet("shot/get_studio?shot_id="+this.id+"&tache_id=8").then(function(e){t.handelResponse(e,function(e){t.studiosListAnimate=e.list})}),this.animateOfStudio=this.animateOfStudio):this.animateOfStudio=[],this.isPaint?(0===this.studiosListPaint.length&&this.apiGet("shot/get_studio?shot_id="+this.id+"&tache_id=9").then(function(e){t.handelResponse(e,function(e){t.studiosListPaint=e.list})}),this.paintOfStudio=this.paintOfStudio):this.paintOfStudio=[],this.isSpec?(0===this.studiosListSpecial.length&&this.apiGet("shot/get_studio?shot_id="+this.id+"&tache_id=10").then(function(e){t.handelResponse(e,function(e){t.studiosListSpecial=e.list})}),this.specialOfStudio=this.specialOfStudio):this.specialOfStudio=[],this.isLight?(0===this.studiosListLight.length&&this.apiGet("shot/get_studio?shot_id="+this.id+"&tache_id=11").then(function(e){t.handelResponse(e,function(e){t.studiosListLight=e.list})}),this.lightOfStudio=this.lightOfStudio):this.lightOfStudio=[],this.isSynch?(0===this.studiosListSynch.length&&this.apiGet("shot/get_studio?shot_id="+this.id+"&tache_id=12").then(function(e){t.handelResponse(e,function(e){t.studiosListSynch=e.list})}),this.synchOfStudio=this.synchOfStudio):this.synchOfStudio=[]},edit:function(t){var e=this;this.form.shot_image?0!==this.plan_time.length?(this.form.shot_image=this.form.shot_image.slice(this.form.shot_image.indexOf("uploads")),this.form.project_id=parseInt(this.form.project_id),this.form.field_id=parseInt(this.form.field_id),this.form.time=parseInt(this.form.time),this.form.ambient=parseInt(this.form.ambient),this.form.plan_start_timestamp=u.a.j2time(this.plan_time[0]),this.form.plan_end_timestamp=u.a.j2time(this.plan_time[1]),this.form.asset_ids=this.form.asset_ids?this.form.asset_ids.join(""):"",this.form.frame_range=this.frame_range1&&this.frame_range2?this.frame_range1+","+this.frame_range2:"",this.form.handle_frame=this.handle_frame1&&this.handle_frame2?this.handle_frame1+","+this.handle_frame2:"",this.form.priority_level=this.form.priority_level?parseInt(this.form.priority_level):1,this.form.difficulty=this.form.difficulty?parseInt(this.form.difficulty):1,this.form.clip_frame_length=this.form.clip_frame_length?parseInt(this.form.clip_frame_length):0,this.form.material_frame_length=this.form.material_frame_length?parseInt(this.form.material_frame_length):"",this.form.tache={3:this.artOfStudio,4:this.modelOfStudio,5:this.mapOfStudio,6:this.bindOfStudio,7:this.trackOfStudio,8:this.animateOfStudio,9:this.paintOfStudio,10:this.specialOfStudio,11:this.lightOfStudio,12:this.synchOfStudio},console.log(this.form),this.$refs.form.validate(function(t){t&&(e.isLoading=!e.isLoading,e.apiPut("admin/shots/",e.id,e.form).then(function(t){e.handelResponse(t,function(t){u.a.toastMsg("success","编辑成功"),e.$emit("updataShotDetail",e.id),setTimeout(function(){e.dialogFormVisible=!1,e.isLoading=!e.isLoading},1500)},function(){e.isLoading=!e.isLoading})}))})):u.a.toastMsg("warning","请输入计划起止时间"):u.a.toastMsg("warning","请插入镜头缩略图")},getAllProjects:function(){var t=this;return new r.a(function(e,s){t.apiGet("admin/projects").then(function(s){t.handelResponse(s,function(t){e(t.list)})})})},getFields:function(){var t=this;this.form.field_id="";var e={params:{project_id:this.form.project_id}};this.apiGet("admin/get_fields",e).then(function(e){t.handelResponse(e,function(e){t.fieldList=e})})},getCompleteData:function(){var t=this;return o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAllProjects();case 2:t.projectList=e.sent;case 3:case"end":return e.stop()}},e,t)}))()}},created:function(){this.getCompleteData()},mixins:[c.a],props:["message"],watch:{message:function(t,e){this.shotDetail=t,this.id=t.id,this.form.project_id=t.project_id,this.getFields(),this.form.field_id=t.field_id,this.form.shot_number=t.shot_number,this.form.shot_byname=t.shot_byname,this.form.shot_name=t.shot_name,this.form.shot_image=this.image=window.baseUrl+"/"+t.shot_image,this.plan_time=[new Date(1e3*t.plan_start_timestamp),new Date(1e3*t.plan_end_timestamp)],this.form.time=t.time.toString(),this.form.ambient=t.ambient.toString(),this.form.priority_level=t.priority_level.toString(),this.form.difficulty=t.difficulty.toString(),this.handle_frame1=t.handle_frame.split(",")[0],this.handle_frame2=t.handle_frame.split(",")[1],this.frame_range1=t.frame_range.split(",")[0],this.frame_range2=t.frame_range.split(",")[1],this.form.material_number=t.material_number,this.form.asset_ids=t.asset_ids,this.form.clip_frame_length=t.clip_frame_length,this.form.material_frame_length=t.material_frame_length,this.form.second_company=t.second_company,this.form.shot_explain=t.shot_explain,this.form.change_speed_info=t.change_speed_info,this.form.make_demand=t.make_demand}},computed:{addShow:function(){return u.a.getHasRule("shots-save_filed")}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shot_edit"},[s("el-dialog",{attrs:{title:"编辑镜头",visible:t.dialogFormVisible,width:"75%",top:"6vh"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[s("el-form",{ref:"form",staticClass:"shot_add",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"项目名称:",prop:"project_id"}},[s("el-select",{attrs:{placeholder:"请选择项目"},on:{change:t.getFields},model:{value:t.form.project_id,callback:function(e){t.$set(t.form,"project_id",e)},expression:"form.project_id"}},t._l(t.projectList,function(t){return s("el-option",{key:t.project_name,attrs:{label:t.project_name,value:t.id}})}))],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"场号:",prop:"field_id"}},[s("el-select",{class:{"w-130":t.addShow},attrs:{placeholder:"请选择场号"},model:{value:t.form.field_id,callback:function(e){t.$set(t.form,"field_id",e)},expression:"form.field_id"}},t._l(t.fieldList,function(t){return s("el-option",{key:t.name,attrs:{label:t.name,value:t.id}})})),t._v(" "),t.addShow?s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){t.isAddField=!0}}},[t._v("添加")]):t._e()],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"资产:",prop:"asset_ids"}},[s("el-select",{staticClass:"h-40 w-200",attrs:{multiple:"","collapse-tags":"",placeholder:"请选择资产"},model:{value:t.form.asset_ids,callback:function(e){t.$set(t.form,"asset_ids",e)},expression:"form.asset_ids"}},[s("el-option",{attrs:{label:"我是资产1",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"我是资产2",value:"2"}})],1)],1)],1)])],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{staticClass:"is-required",attrs:{label:"镜头缩略图:",prop:"image"}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadImageUrl,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.shot_image?s("img",{staticClass:"avatar",attrs:{src:t.image}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"镜头编号:",prop:"shot_number"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.shot_number,callback:function(e){t.$set(t.form,"shot_number","string"==typeof e?e.trim():e)},expression:"form.shot_number"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"镜头简称:",prop:"shot_byname"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.shot_byname,callback:function(e){t.$set(t.form,"shot_byname","string"==typeof e?e.trim():e)},expression:"form.shot_byname"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"镜头名称:",prop:"shot_name"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.shot_name,callback:function(e){t.$set(t.form,"shot_name","string"==typeof e?e.trim():e)},expression:"form.shot_name"}})],1)],1)])],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"时刻:",prop:"time"}},[s("el-select",{staticClass:"h-40 w-200",attrs:{placeholder:"请选择时刻"},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}},[s("el-option",{attrs:{label:"白天",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"夜晚",value:"2"}})],1)],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"环境:",prop:"ambient"}},[s("el-select",{staticClass:"h-40 w-200",attrs:{placeholder:"请选择环境"},model:{value:t.form.ambient,callback:function(e){t.$set(t.form,"ambient",e)},expression:"form.ambient"}},[s("el-option",{attrs:{label:"室外",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"室内",value:"2"}})],1)],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"镜头难度:",prop:"difficulty"}},[s("el-select",{staticClass:"h-40 w-200",attrs:{placeholder:"请选择镜头难度"},model:{value:t.form.difficulty,callback:function(e){t.$set(t.form,"difficulty",e)},expression:"form.difficulty"}},[s("el-option",{attrs:{label:"D",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"C",value:"2"}}),t._v(" "),s("el-option",{attrs:{label:"B",value:"3"}}),t._v(" "),s("el-option",{attrs:{label:"A",value:"4"}}),t._v(" "),s("el-option",{attrs:{label:"S",value:"5"}})],1)],1)],1)])],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:16}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{staticClass:"is-required",attrs:{label:"计划起止时间:",prop:"plan_time"}},[s("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"计划开始时间","end-placeholder":"计划结束时间"},model:{value:t.plan_time,callback:function(e){t.plan_time=e},expression:"plan_time"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"镜头优先级:",prop:"priority_level"}},[s("el-select",{staticClass:"h-40 w-200",attrs:{placeholder:"请选择镜头优先级"},model:{value:t.form.priority_level,callback:function(e){t.$set(t.form,"priority_level",e)},expression:"form.priority_level"}},[s("el-option",{attrs:{label:"D",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"C",value:"2"}}),t._v(" "),s("el-option",{attrs:{label:"B",value:"3"}}),t._v(" "),s("el-option",{attrs:{label:"A",value:"4"}})],1)],1)],1)])],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"环节:",prop:""}},[s("el-col",{staticClass:"h-45",attrs:{span:12}},[s("el-checkbox",{on:{change:t.changeTache},model:{value:t.isArt,callback:function(e){t.isArt=e},expression:"isArt"}},[t._v("美术部")]),t._v(" "),t.isArt?s("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.artOfStudio,callback:function(e){t.artOfStudio=e},expression:"artOfStudio"}},t._l(t.studiosListArt,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id,disabled:t.art_disabled}})})):t._e()],1),t._v(" "),s("el-col",{staticClass:"h-45",attrs:{span:12}},[s("el-checkbox",{on:{change:t.changeTache},model:{value:t.isModel,callback:function(e){t.isModel=e},expression:"isModel"}},[t._v("模型部")]),t._v(" "),t.isModel?s("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.modelOfStudio,callback:function(e){t.modelOfStudio=e},expression:"modelOfStudio"}},t._l(t.studiosListModel,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):t._e()],1),t._v(" "),s("el-col",{staticClass:"h-45",attrs:{span:12}},[s("el-checkbox",{on:{change:t.changeTache},model:{value:t.isMap,callback:function(e){t.isMap=e},expression:"isMap"}},[t._v("贴图部")]),t._v(" "),t.isMap?s("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.mapOfStudio,callback:function(e){t.mapOfStudio=e},expression:"mapOfStudio"}},t._l(t.studiosListMap,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):t._e()],1),t._v(" "),s("el-col",{staticClass:"h-45",attrs:{span:12}},[s("el-checkbox",{on:{change:t.changeTache},model:{value:t.isBind,callback:function(e){t.isBind=e},expression:"isBind"}},[t._v("绑定部")]),t._v(" "),t.isBind?s("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.bindOfStudio,callback:function(e){t.bindOfStudio=e},expression:"bindOfStudio"}},t._l(t.studiosListBind,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):t._e()],1),t._v(" "),s("el-col",{staticClass:"h-45",attrs:{span:12}},[s("el-checkbox",{on:{change:t.changeTache},model:{value:t.isTrack,callback:function(e){t.isTrack=e},expression:"isTrack"}},[t._v("跟踪部")]),t._v(" "),t.isTrack?s("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.trackOfStudio,callback:function(e){t.trackOfStudio=e},expression:"trackOfStudio"}},t._l(t.studiosListTrack,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):t._e()],1),t._v(" "),s("el-col",{staticClass:"h-45",attrs:{span:12}},[s("el-checkbox",{on:{change:t.changeTache},model:{value:t.isAni,callback:function(e){t.isAni=e},expression:"isAni"}},[t._v("动画部")]),t._v(" "),t.isAni?s("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.animateOfStudio,callback:function(e){t.animateOfStudio=e},expression:"animateOfStudio"}},t._l(t.studiosListAnimate,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):t._e()],1),t._v(" "),s("el-col",{staticClass:"h-45",attrs:{span:12}},[s("el-checkbox",{on:{change:t.changeTache},model:{value:t.isPaint,callback:function(e){t.isPaint=e},expression:"isPaint"}},[t._v("数字绘景部")]),t._v(" "),t.isPaint?s("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.paintOfStudio,callback:function(e){t.paintOfStudio=e},expression:"paintOfStudio"}},t._l(t.studiosListPaint,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):t._e()],1),t._v(" "),s("el-col",{staticClass:"h-45",attrs:{span:12}},[s("el-checkbox",{on:{change:t.changeTache},model:{value:t.isSpec,callback:function(e){t.isSpec=e},expression:"isSpec"}},[t._v("特效部")]),t._v(" "),t.isSpec?s("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.specialOfStudio,callback:function(e){t.specialOfStudio=e},expression:"specialOfStudio"}},t._l(t.studiosListSpecial,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):t._e()],1),t._v(" "),s("el-col",{staticClass:"h-45",attrs:{span:12}},[s("el-checkbox",{on:{change:t.changeTache},model:{value:t.isLight,callback:function(e){t.isLight=e},expression:"isLight"}},[t._v("灯光部")]),t._v(" "),t.isLight?s("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.lightOfStudio,callback:function(e){t.lightOfStudio=e},expression:"lightOfStudio"}},t._l(t.studiosListLight,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):t._e()],1),t._v(" "),s("el-col",{staticClass:"h-45",attrs:{span:12}},[s("el-checkbox",{on:{change:t.changeTache},model:{value:t.isSynch,callback:function(e){t.isSynch=e},expression:"isSynch"}},[t._v("合成部")]),t._v(" "),t.isSynch?s("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.synchOfStudio,callback:function(e){t.synchOfStudio=e},expression:"synchOfStudio"}},t._l(t.studiosListSynch,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):t._e()],1)],1)],1)])],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"帧长范围:",prop:"frame_range"}},[s("el-input",{staticClass:"h-40 w-80",model:{value:t.frame_range1,callback:function(e){t.frame_range1="string"==typeof e?e.trim():e},expression:"frame_range1"}}),t._v("\n              -\n              "),s("el-input",{staticClass:"h-40 w-80",model:{value:t.frame_range2,callback:function(e){t.frame_range2="string"==typeof e?e.trim():e},expression:"frame_range2"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"手柄帧:",prop:"handle_frame"}},[s("el-input",{staticClass:"h-40 w-80",model:{value:t.handle_frame1,callback:function(e){t.handle_frame1="string"==typeof e?e.trim():e},expression:"handle_frame1"}}),t._v("\n              -\n              "),s("el-input",{staticClass:"h-40 w-80",model:{value:t.handle_frame2,callback:function(e){t.handle_frame2="string"==typeof e?e.trim():e},expression:"handle_frame2"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"素材号:",prop:"material_number"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.material_number,callback:function(e){t.$set(t.form,"material_number","string"==typeof e?e.trim():e)},expression:"form.material_number"}})],1)],1)])],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"剪辑帧长:",prop:"clip_frame_length"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.clip_frame_length,callback:function(e){t.$set(t.form,"clip_frame_length","string"==typeof e?e.trim():e)},expression:"form.clip_frame_length"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"素材帧长:",prop:"material_frame_length"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.material_frame_length,callback:function(e){t.$set(t.form,"material_frame_length","string"==typeof e?e.trim():e)},expression:"form.material_frame_length"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"二级公司:",prop:"second_company"}})],1)])],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"镜头备注:",prop:"shot_explain"}},[s("el-input",{staticClass:"h-40 w-200",attrs:{type:"textarea",rows:3,placeholder:"请输入镜头备注"},model:{value:t.form.shot_explain,callback:function(e){t.$set(t.form,"shot_explain",e)},expression:"form.shot_explain"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"变速信息:",prop:"change_speed_info"}},[s("el-input",{staticClass:"h-40 w-200",attrs:{type:"textarea",rows:3,placeholder:"请输入变速信息"},model:{value:t.form.change_speed_info,callback:function(e){t.$set(t.form,"change_speed_info",e)},expression:"form.change_speed_info"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"制作要求:",prop:"make_demand"}},[s("el-input",{staticClass:"h-40 w-200",attrs:{type:"textarea",rows:3,placeholder:"请输入制作要求"},model:{value:t.form.make_demand,callback:function(e){t.$set(t.form,"make_demand",e)},expression:"form.make_demand"}})],1)],1)])],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){t.edit("form")}}},[t._v("确 定")])],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"添加场号/集号",visible:t.isAddField,width:"30%",center:""},on:{"update:visible":function(e){t.isAddField=e}}},[s("el-form",{attrs:{model:t.fieldForm,rules:t.addFieldRules,"label-width":"130px"}},[s("el-form-item",{attrs:{label:"项目名称：",prop:"project_id"}},[s("el-select",{staticClass:"w-200",attrs:{placeholder:"请选择项目"},model:{value:t.fieldForm.project_id,callback:function(e){t.$set(t.fieldForm,"project_id",e)},expression:"fieldForm.project_id"}},t._l(t.projectList,function(t){return s("el-option",{key:t.id,attrs:{label:t.project_name,value:t.id}})}))],1),t._v(" "),s("el-form-item",{attrs:{label:"场号/集号：",prop:"name"}},[s("el-input",{staticClass:"w-200",model:{value:t.fieldForm.name,callback:function(e){t.$set(t.fieldForm,"name","string"==typeof e?e.trim():e)},expression:"fieldForm.name"}})],1)],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.isAddField=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addField(t.fieldForm)}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var p=s("VU/8")(d,m,!1,function(t){s("bMIH")},null,null);e.a=p.exports},AsvG:function(t,e,s){"use strict";var a=s("Nh03"),i=s("//TE"),n=s("sHg/"),o={data:function(){return{tableData:[],dataCount:null,currentPage:1,keywords:{name:""},multipleSelection:[],limit:10,name:""}},methods:{search:function(){this.getAllUsers(1)},selectItem:function(t){this.multipleSelection=t},handleCurrentChange:function(t){this.getAllUsers(t)},confirmDelete:function(t){var e=this;this.$confirm("确认删除该成员?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.a.openGlobalLoading(),e.apiDelete("admin/users/",t.id).then(function(t){n.a.closeGlobalLoading(),e.handelResponse(t,function(t){n.a.toastMsg("success","删除成功"),setTimeout(function(){n.a.shallowRefresh(e.$route.name)},1500)})})}).catch(function(){})},getAllUsers:function(t){var e=this;this.loading=!0;var s={params:{page:t,limit:this.limit}};this.apiGet("admin/users",s).then(function(t){e.handelResponse(t,function(t){e.tableData=t.list,e.dataCount=t.dataCount})})},getKeywords:function(){var t=this.$route.query;t&&(t.keywords?this.keywords=t.keywords:this.keywords="")},init:function(){this.getKeywords(),this.getAllUsers()}},created:function(){this.init()},computed:{listShow:function(){return n.a.getHasRule("users-index")},addShow:function(){return n.a.getHasRule("users-save")},editShow:function(){return n.a.getHasRule("users-update")},deleteShow:function(){return n.a.getHasRule("users-delete")}},watch:{$route:function(t,e){this.init()}},components:{btnGroup:a.a},mixins:[i.a]},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"m-b-20"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",[t._v("成员管理")])],1)],1),t._v(" "),s("div",{staticClass:"m-b-20 ovf-hd"},[t.addShow?s("div",{staticClass:"fl"},[s("router-link",{staticClass:"btn-link-large add-btn",attrs:{to:"add"}},[s("i",{staticClass:"el-icon-plus"}),t._v("  添加成员\n      ")])],1):t._e(),t._v(" "),s("div",{staticClass:"fl w-200",class:{"m-l-30":t.addShow}},[s("el-input",{attrs:{placeholder:"请输入成员"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.search()}},slot:"append"})],1)],1)]),t._v(" "),t.listShow?s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"selection-change":t.selectItem}},[s("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[s("el-form-item",{attrs:{label:"所属工作室"}},[s("span",[t._v(t._s(e.row.studio_name))])]),t._v(" "),s("el-form-item",{attrs:{label:"所属环节"}},[s("span",[t._v(t._s(e.row.tache_name))])])],1)]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"成员姓名",prop:"realname"}}),t._v(" "),s("el-table-column",{attrs:{label:"用户名",prop:"username"}}),t._v(" "),s("el-table-column",{attrs:{label:"角色",prop:"role_name"}}),t._v(" "),t.editShow||t.deleteShow?s("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t.editShow?s("span",[s("router-link",{attrs:{to:{name:"usersEdit",params:{id:e.row.id}}}},[s("el-button",{attrs:{size:"small",type:"primary"}},[t._v("编辑")])],1)],1):t._e(),t._v(" "),t.deleteShow?s("span",[s("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(s){t.confirmDelete(e.row)}}},[t._v("删除")])],1):t._e()])]}}])}):t._e()],1):t._e(),t._v(" "),s("div",{staticClass:"pos-rel p-t-20"},[s("div",{staticClass:"block pages"},[s("el-pagination",{attrs:{layout:"prev, pager, next","page-size":t.limit,"current-page":t.currentPage,total:t.dataCount},on:{"current-change":t.handleCurrentChange}})],1)])],1)},staticRenderFns:[]};var r=s("VU/8")(o,l,!1,function(t){s("Q4DR")},null,null);e.a=r.exports},BnN7:function(t,e,s){"use strict";var a={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]},i=s("VU/8")({created:function(){this.$route.query.name&&this.$router.replace({name:this.$route.query.name})}},a,!1,null,null,null);e.a=i.exports},CEsN:function(t,e){},COJy:function(t,e,s){"use strict";var a=s("//TE"),i=s("Rvav"),n=s("M4fF"),o=s.n(n),l=s("sHg/"),r={data:function(){return{isLoading:!1,form:{title:"",pid:"",remark:"",rules:""},options:[{pid:0,title:"无"}],nodes:[],selectedNodes:[],rules:{title:[{required:!0,message:"请输入角色名称",trigger:"blur"}],rules:[{required:!0,message:"请选择权限分配",trigger:"blur"}]}}},methods:{add:function(t){var e=this;this.form.rules=this.selectedNodes.toString(),this.$refs[t].validate(function(t){t&&(e.isLoading=!0,e.apiPost("admin/groups",e.form).then(function(t){e.handelResponse(t,function(t){e.isLoading=!1,l.a.toastMsg("success","添加成功"),setTimeout(function(){e.goback()},1500)},function(){e.isLoading=!1})}))})},getRules:function(){var t=this;this.apiGet("admin/rules?type=tree").then(function(e){t.handelResponse(e,function(e){t.nodes=t.nodes.concat(e)})})},getGroups:function(){var t=this;this.apiGet("admin/groups").then(function(e){t.handelResponse(e,function(e){t.options=t.options.concat(e.list)})})},selectProjectRule:function(t){var e=this;t.check||o()(t.child).forEach(function(t){t.check=!1;var s=o()(e.selectedNodes).indexOf(t.id);e.selectedNodes.splice(s,1),o()(t.child).forEach(function(t){t.check=!1;var s=o()(e.selectedNodes).indexOf(t.id);e.selectedNodes.splice(s,1)})}),this.selectRule(t)},selectModuleRule:function(t,e,s){var a=this;if(e.check||(e.check=!0,this.selectedNodes.push(e.id)),t.check)this.selectedNodes.push(t.id),o()(s).forEach(function(t){t.check=!0,a.selectedNodes.push(t.id)});else{var i=o()(this.selectedNodes).indexOf(t.id);this.selectedNodes.splice(i,1),o()(s).forEach(function(t){var e=o()(a.selectedNodes).indexOf(t.id);e>=0&&(t.check=!1,a.selectedNodes.splice(e,1))})}},selectActionRule:function(t,e,s){e.check||(e.check=!0,this.selectedNodes.push(e.id)),s.check||(s.check=!0,this.selectedNodes.push(s.id)),this.selectRule(t)},selectRule:function(t){if(t.check)this.selectedNodes.push(t.id);else{var e=o()(this.selectedNodes).indexOf(t.id);this.selectedNodes.splice(e,1)}}},created:function(){this.getRules(),this.getGroups()},mixins:[a.a,i.a]},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"m-b-20"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:"/admin/groups/list"}}},[t._v("角色管理")]),t._v(" "),s("el-breadcrumb-item",[t._v("添加角色")])],1)],1),t._v(" "),s("div",{staticClass:"m-l-50 m-t-30 w-900"},[s("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[s("el-form-item",{attrs:{label:"角色名称",prop:"title"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.title,callback:function(e){t.$set(t.form,"title","string"==typeof e?e.trim():e)},expression:"form.title"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"父级用户角色",prop:"pid"}},[s("el-select",{staticClass:"w-200",attrs:{placeholder:"父级用户角色"},model:{value:t.form.pid,callback:function(e){t.$set(t.form,"pid",e)},expression:"form.pid"}},t._l(t.options,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}))],1),t._v(" "),s("el-form-item",{attrs:{label:"备注"}},[s("el-input",{staticClass:"w-200",attrs:{type:"textarea",rows:2,placeholder:"备注"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"权限分配",prop:"rules"}},[s("div",{staticClass:"bor-gray h-400 ovf-y-auto bor-ra-5 bg-wh"},t._l(t.nodes,function(e){return s("div",{key:e.id},[s("div",{staticClass:"bor-b-ccc bg-gra p-l-10 p-r-10"},[s("el-checkbox",{on:{change:function(s){t.selectProjectRule(e)}},model:{value:e.check,callback:function(s){t.$set(e,"check",s)},expression:"item.check"}},[t._v(t._s(e.else))])],1),t._v(" "),t._l(e.child,function(a){return s("div",{key:a.id},[s("div",{staticClass:"p-l-20 bor-b-ccc"},[s("el-checkbox",{on:{change:function(s){t.selectModuleRule(a,e,a.child)}},model:{value:a.check,callback:function(e){t.$set(a,"check",e)},expression:"childItem.check"}},[t._v(t._s(a.else))])],1),t._v(" "),s("div",{staticClass:"p-l-40 bor-b-ccc bg-gra"},t._l(a.child,function(i){return s("el-checkbox",{key:i.id,on:{change:function(s){t.selectActionRule(i,a,e)}},model:{value:i.check,callback:function(e){t.$set(i,"check",e)},expression:"grandChildItem.check"}},[t._v(t._s(i.else))])}))])})],2)}))]),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){t.add("form")}}},[t._v("提交")]),t._v(" "),s("el-button",{on:{click:function(e){t.goback()}}},[t._v("返回")])],1)],1)],1)])},staticRenderFns:[]},u=s("VU/8")(r,c,!1,null,null,null);e.a=u.exports},Cp3V:function(t,e,s){"use strict";var a=s("Nh03"),i=s("//TE"),n=s("sHg/"),o={data:function(){return{tableData:[],multipleSelection:[],limit:10,currentPage:1,dataCount:null}},methods:{selectItem:function(t){this.multipleSelection=t},confirmDelete:function(t){var e=this;this.$confirm("确认删除该角色?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.a.openGlobalLoading(),e.apiDelete("admin/groups/",t.id).then(function(t){n.a.closeGlobalLoading(),e.handelResponse(t,function(t){n.a.toastMsg("success","删除成功"),setTimeout(function(){n.a.shallowRefresh(e.$route.name)},1500)})})}).catch(function(){})},handleCurrentChange:function(t){this.getGroups(t)},getGroups:function(t){var e=this;this.loading=!0;var s={params:{keywords:this.keywords,page:t,limit:this.limit}};this.apiGet("admin/groups",s).then(function(t){e.handelResponse(t,function(t){e.tableData=t.list,e.dataCount=t.dataCount})})}},created:function(){this.getGroups(1)},computed:{listShow:function(){return n.a.getHasRule("groups-index")},addShow:function(){return n.a.getHasRule("groups-save")},editShow:function(){return n.a.getHasRule("groups-update")},deleteShow:function(){return n.a.getHasRule("groups-delete")}},components:{btnGroup:a.a},mixins:[i.a]},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"m-b-20"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",[t._v("角色管理")])],1)],1),t._v(" "),t.addShow?s("div",{staticClass:"m-b-20"},[s("router-link",{staticClass:"btn-link-large add-btn",attrs:{to:"add"}},[s("i",{staticClass:"el-icon-plus"}),t._v("  添加角色\n    ")])],1):t._e(),t._v(" "),t.listShow?s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"selection-change":t.selectItem}},[s("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{label:"角色名称",prop:"title"}}),t._v(" "),s("el-table-column",{attrs:{label:"描述",prop:"remark"}}),t._v(" "),s("el-table-column",{attrs:{label:"状态",prop:"status",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t._v(t._s(t._f("status")(e.row.status)))])]}}])}),t._v(" "),t.editShow||t.deleteShow?s("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t.editShow?s("span",[s("router-link",{attrs:{to:{name:"groupsEdit",params:{id:e.row.id}}}},[s("el-button",{attrs:{size:"small",type:"primary"}},[t._v("编辑")])],1)],1):t._e(),t._v(" "),t.deleteShow?s("span",[s("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(s){t.confirmDelete(e.row)}}},[t._v("删除")])],1):t._e()])]}}])}):t._e()],1):t._e(),t._v(" "),s("div",{staticClass:"pos-rel p-t-20"},[s("btnGroup",{attrs:{selectedData:t.multipleSelection,type:"groups"}}),t._v(" "),s("div",{staticClass:"block pages"},[s("el-pagination",{attrs:{layout:"prev, pager, next","page-size":t.limit,"current-page":t.currentPage,total:t.dataCount},on:{"current-change":t.handleCurrentChange}})],1)],1)],1)},staticRenderFns:[]},r=s("VU/8")(o,l,!1,null,null,null);e.a=r.exports},"DE/I":function(t,e){},DvRW:function(t,e,s){"use strict";var a=s("//TE"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-dialog",{ref:"dialog",attrs:{"custom-class":"bg-wh tx-c box-shadow-none"}},[e("img",{attrs:{src:this.url}})])},staticRenderFns:[]};var n=s("VU/8")({props:["url"],data:function(){return{}},methods:{open:function(){this.$refs.dialog.open()}}},i,!1,function(t){s("fyYl")},null,null).exports,o=s("sHg/"),l=s("vgQg"),r={data:function(){return{isLoading:!1,fileList:[],propsImg:"",form:{SYSTEM_NAME:"",IDENTIFYING_CODE:"0",LOGO_TYPE:"1",LOGIN_SESSION_VALID:null,SYSTEM_LOGO:""},uploadUrl:"",rules:{SYSTEM_NAME:[{required:!0,message:"请输入系统名称"}],LOGIN_SESSION_VALID:[{required:!0,message:"请输入登录有效期"},{type:"number",message:"请输入数字"}]}}},methods:{add:function(){var t=this;this.$refs.form.validate(function(e){e&&(t.isLoading=!0,t.apiPost("admin/systemConfigs",t.form).then(function(e){t.handelResponse(e,function(e){t.isLoading=!1,o.a.toastMsg("success","提交成功")},function(){t.isLoading=!1})}))})},uploadSuccess:function(t,e,s){this.form.SYSTEM_LOGO=t.data;var a={name:"图片",url:l.a.HOST+t.data};this.fileList.length?this.fileList[0]=a:this.fileList.push(a)},uploadFail:function(t,e,s){console.log("err = ",o.a.j2s(t)),console.log("res = ",o.a.j2s(e))},handleRemove:function(t,e){console.log("file = ",t),console.log("fileList = ",e)},viewPic:function(){this.propsImg=this.fileList[0].url,this.$refs.preview.open()}},created:function(){var t=this;this.uploadUrl=window.HOST+"/admin/upload",this.apiPost("admin/base/getConfigs").then(function(e){t.handelResponse(e,function(e){if(t.form.SYSTEM_NAME=e.SYSTEM_NAME,t.form.IDENTIFYING_CODE=e.IDENTIFYING_CODE,t.form.LOGIN_SESSION_VALID=parseInt(e.LOGIN_SESSION_VALID),t.form.LOGO_TYPE=e.LOGO_TYPE,e.SYSTEM_LOGO){var s=l.a.HOST+e.SYSTEM_LOGO;t.fileList.push({name:"图片",url:s}),t.form.SYSTEM_LOGO=e.SYSTEM_LOGO}})})},components:{preview:n},mixins:[a.a]},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"m-l-50 m-t-30 w-500"},[s("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[s("el-form-item",{attrs:{label:"系统名称",prop:"SYSTEM_NAME"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.SYSTEM_NAME,callback:function(e){t.$set(t.form,"SYSTEM_NAME","string"==typeof e?e.trim():e)},expression:"form.SYSTEM_NAME"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"LOGO"}},[s("el-upload",{staticClass:"upload-demo",attrs:{action:t.uploadUrl,drag:"","thumbnail-mode":!0,"on-preview":t.viewPic,"on-remove":t.handleRemove,"on-success":t.uploadSuccess,"on-error":t.uploadFail,"default-file-list":t.fileList}},[s("i",{staticClass:"el-icon-upload"}),t._v(" "),s("div",{staticClass:"el-dragger__text"},[t._v("将文件拖到此处，或"),s("em",[t._v("点击上传")])]),t._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件")])])],1),t._v(" "),s("el-form-item",{attrs:{label:"LOGO类型"}},[s("el-radio-group",{model:{value:t.form.LOGO_TYPE,callback:function(e){t.$set(t.form,"LOGO_TYPE",e)},expression:"form.LOGO_TYPE"}},[s("el-radio",{attrs:{label:"1"}},[t._v("图片")]),t._v(" "),s("el-radio",{attrs:{label:"2"}},[t._v("文字")])],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"登录验证码"}},[s("el-radio-group",{model:{value:t.form.IDENTIFYING_CODE,callback:function(e){t.$set(t.form,"IDENTIFYING_CODE",e)},expression:"form.IDENTIFYING_CODE"}},[s("el-radio",{attrs:{label:"1"}},[t._v("打开")]),t._v(" "),s("el-radio",{attrs:{label:"0"}},[t._v("关闭")])],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"登录会话有效期(建议不少于：600)",prop:"LOGIN_SESSION_VALID"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.LOGIN_SESSION_VALID,callback:function(e){t.$set(t.form,"LOGIN_SESSION_VALID",t._n(e))},expression:"form.LOGIN_SESSION_VALID"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){t.add()}}},[t._v("提交")])],1)],1),t._v(" "),s("preview",{ref:"preview",attrs:{url:t.propsImg}})],1)},staticRenderFns:[]},u=s("VU/8")(r,c,!1,null,null,null);e.a=u.exports},EBnW:function(t,e,s){"use strict";var a=s("//TE"),i=s("Rvav"),n=s("sHg/"),o={data:function(){return{isLoading:!1,form:{name:"",pid:"",explain:""},options:[],rules:{name:[{required:!0,message:"请输入工作室名称",trigger:"blur"}],pid:[{required:!0,message:"请选择父级部门",trigger:"blur"}]}}},methods:{add:function(t){var e=this;this.$refs[t].validate(function(t){t&&(e.isLoading=!e.isLoading,e.apiPost("admin/studios",e.form).then(function(t){e.handelResponse(t,function(t){n.a.toastMsg("success","添加成功"),setTimeout(function(){e.goback()},1500)},function(){e.isLoading=!e.isLoading})}))})},getStudios:function(){var t=this;this.apiGet("admin/studios").then(function(e){t.handelResponse(e,function(e){t.options=e.list})})},init:function(){this.getStudios()}},created:function(){n.a.closeGlobalLoading(),this.init()},mixins:[a.a,i.a]},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"m-b-20"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:"/admin/studios/list"}}},[t._v("工作室管理")]),t._v(" "),s("el-breadcrumb-item",[t._v("添加工作室")])],1)],1),t._v(" "),s("div",{staticClass:"m-l-50 m-t-30 w-900"},[s("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[s("el-form-item",{attrs:{label:"工作室名称",prop:"name"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"==typeof e?e.trim():e)},expression:"form.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"父级",prop:"pid"}},[s("el-select",{staticClass:"w-200",attrs:{placeholder:"请选择父级"},model:{value:t.form.pid,callback:function(e){t.$set(t.form,"pid",e)},expression:"form.pid"}},[s("el-option",{attrs:{label:"无",value:"0"}}),t._v(" "),t._l(t.options,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})],2)],1),t._v(" "),s("el-form-item",{attrs:{label:"备注",prop:"explain"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.explain,callback:function(e){t.$set(t.form,"explain","string"==typeof e?e.trim():e)},expression:"form.explain"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){t.add("form")}}},[t._v("提交")]),t._v(" "),s("el-button",{on:{click:function(e){t.goback()}}},[t._v("返回")])],1)],1)],1)])},staticRenderFns:[]},r=s("VU/8")(o,l,!1,null,null,null);e.a=r.exports},F8bF:function(t,e,s){"use strict";var a=s("Nh03"),i=s("//TE"),n=s("sHg/"),o={data:function(){return{tableData:[],multipleSelection:[]}},methods:{selectItem:function(t){this.multipleSelection=t},confirmDelete:function(t){var e=this;this.$confirm("确认删除该权限?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.a.openGlobalLoading(),e.apiDelete("admin/rules/",t.id).then(function(t){n.a.closeGlobalLoading(),e.handelResponse(t,function(t){n.a.toastMsg("success","删除成功"),setTimeout(function(){n.a.shallowRefresh(e.$route.name)},1500)})})}).catch(function(){})}},created:function(){var t=this;this.apiGet("admin/rules").then(function(e){t.handelResponse(e,function(e){t.tableData=e})})},computed:{addShow:function(){return n.a.getHasRule("rules-save")},editShow:function(){return n.a.getHasRule("rules-update")},deleteShow:function(){return n.a.getHasRule("rules-delete")}},components:{btnGroup:a.a},mixins:[i.a]},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.addShow?s("div",{staticClass:"m-b-20"},[s("router-link",{staticClass:"btn-link-large add-btn",attrs:{to:"add"}},[s("i",{staticClass:"el-icon-plus"}),t._v("  添加节点\n  \t\t")])],1):t._e(),t._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"selection-change":t.selectItem}},[s("el-table-column",{attrs:{type:"selection",context:t._self,width:"50"}}),t._v(" "),s("el-table-column",{attrs:{prop:"p_title",label:"节点结构",width:"150"}}),t._v(" "),s("el-table-column",{attrs:{prop:"title",label:"显示名"}}),t._v(" "),s("el-table-column",{attrs:{prop:"name",label:"名称",width:"200"}}),t._v(" "),s("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t"+t._s(t._f("status")(e.row.status))+"\n\t\t\t\t")]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t.editShow?s("span",[s("router-link",{attrs:{to:{name:"ruleEdit",params:{id:e.row.id}}}},[s("el-button",{attrs:{size:"small",type:"primary"}},[t._v("\n                编辑\n                ")])],1)],1):t._e(),t._v(" "),t.deleteShow?s("span",[s("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(s){t.confirmDelete(e.row)}}},[t._v("\n              删除\n              ")])],1):t._e()])]}}])})],1),t._v(" "),s("div",{staticClass:"pos-rel p-t-20"},[s("btnGroup",{attrs:{selectedData:t.multipleSelection,type:"rules"}})],1)],1)},staticRenderFns:[]},r=s("VU/8")(o,l,!1,null,null,null);e.a=r.exports},FZtq:function(t,e,s){"use strict";var a=s("//TE"),i=s("M4fF"),n=s.n(i),o={data:function(){return{dialogToggle:!1,keyword:"",tableData:[]}},methods:{open:function(){this.dialogToggle=!0},closeDialog:function(){this.dialogToggle=!1},selectRule:function(t){var e=this;setTimeout(function(){e.$parent.form.rule_name=t.title,e.$parent.form.rule_id=t.id},0),this.closeDialog()},getRules:function(){var t=this;this.apiGet("admin/rules").then(function(e){t.handelResponse(e,function(e){t.tableDataShow=n()(e).forEach(function(t){t.showInput=!1}),t.tableData=t.tableDataShow})})}},created:function(){var t=this.$store.state.rules;t&&t.length?(this.tableDataShow=n()(t).forEach(function(t){t.showInput=!1}),this.tableData=this.tableDataShow):this.getRules()},mixins:[a.a]},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{attrs:{visible:t.dialogToggle,"custom-class":"w-900 h-480 ovf-auto",title:"节点列表"},on:{"update:visible":function(e){t.dialogToggle=e}}},[s("div",{staticClass:"pos-rel h-60"},[s("el-input",{staticClass:"search-btn w-300",attrs:{placeholder:"请输入内容"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.searchMsg()}},slot:"append"})],1)],1),t._v(" "),s("div",[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[s("el-table-column",{attrs:{prop:"type",label:"类型",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{prop:"title",label:"规则名称"}}),t._v(" "),s("el-table-column",{attrs:{prop:"name",label:"规则标识",width:"180"}}),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"small"},on:{click:function(s){t.selectRule(e.row)}}},[t._v("选择")])]}}])})],1)],1)])},staticRenderFns:[]};var r=s("VU/8")(o,l,!1,function(t){s("qEe2")},null,null);e.a=r.exports},IPo5:function(t,e,s){"use strict";var a=s("7+uW");e.a=new a.default},IXjK:function(t,e,s){"use strict";var a=s("Nh03"),i=s("//TE"),n=s("sHg/"),o={data:function(){return{address:window.baseUrl+"/",tableData:[],uid:"",keywords:{},waitingCount:"",workingCount:"",suspendCount:"",finishCount:""}},methods:{confirmDelete:function(t){var e=this;this.$confirm("确认删除该项目?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.a.openGlobalLoading(),e.apiDelete("admin/projects/",t.id).then(function(t){n.a.closeGlobalLoading(),e.handelResponse(t,function(t){n.a.toastMsg("success","删除成功"),setTimeout(function(){n.a.shallowRefresh(e.$route.name)},1500)})})}).catch(function(){})},ProjectEdit:function(t){var e=this,s={table:"project",table_id:t,uid:this.uid};this.apiPost("admin/check_auth",s).then(function(s){e.handelResponse(s,function(s){e.$router.push({name:"projectsEdit",params:{id:t}})})})},getAllProjects:function(t){var e=this;this.loading=!0;var s={params:{keywords:{status:t}}};this.apiGet("admin/projects",s).then(function(t){e.handelResponse(t,function(t){e.tableData=t.list,e.uid=t.uid,e.waitingCount=t.waitingCount,e.workingCount=t.workingCount,e.suspendCount=t.suspendCount,e.finishCount=t.finishCount})})},init:function(){this.getAllProjects(2)}},created:function(){this.init()},components:{btnGroup:a.a},mixins:[i.a],computed:{listShow:function(){return n.a.getHasRule("projects-index")},addShow:function(){return n.a.getHasRule("projects-save")},editShow:function(){return n.a.getHasRule("projects-update")},deleteShow:function(){return n.a.getHasRule("projects-delete")}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"m-b-20"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:"/admin/projects/list"}}},[t._v("项目管理")]),t._v(" "),s("el-breadcrumb-item",[t._v("项目汇总")])],1)],1),t._v(" "),s("div",{staticClass:"m-b-20"},[t.addShow?s("router-link",{staticClass:"btn-link-large add-btn",attrs:{to:"add"}},[s("i",{staticClass:"el-icon-plus"}),t._v("  添加项目\n    ")]):t._e(),t._v(" "),s("div",{staticClass:"pos-abs"},[s("el-badge",{staticClass:"item",attrs:{value:t.waitingCount,max:10}},[s("el-button",{attrs:{size:"large"},on:{click:function(e){t.getAllProjects(1)}}},[t._v("等待中")])],1),t._v(" "),s("el-badge",{staticClass:"item",attrs:{value:t.workingCount,max:10}},[s("el-button",{attrs:{size:"large"},on:{click:function(e){t.getAllProjects(2)}}},[t._v("制作中")])],1),t._v(" "),s("el-badge",{staticClass:"item",attrs:{value:t.suspendCount,max:10}},[s("el-button",{attrs:{size:"large"},on:{click:function(e){t.getAllProjects(3)}}},[t._v("暂停")])],1),t._v(" "),s("el-badge",{staticClass:"item",attrs:{value:t.finishCount,max:10}},[s("el-button",{attrs:{size:"large"},on:{click:function(e){t.getAllProjects(4)}}},[t._v("完成")])],1)],1)],1),t._v(" "),t.listShow?s("div",[t._l(t.tableData,function(e,a){return s("el-col",{key:e.id,staticClass:"project_list",attrs:{span:11}},[s("el-card",{attrs:{"body-style":{padding:"0px"}}},[s("img",{staticClass:"image",attrs:{src:t.address+e.project_image}}),t._v(" "),s("div",{staticStyle:{padding:"14px"}},[s("div",{staticClass:"content"},[s("p",[s("span",[t._v("总时长："+t._s(e.duration))]),t._v("    "),s("span",[t._v("遮幅比："+t._s(e.aspect_ratio))])]),t._v(" "),s("p",[s("span",[t._v("计划开始："+t._s(e.plan_start_time))]),t._v("    "),s("span",[t._v("计划结束："+t._s(e.plan_end_time))])]),t._v(" "),s("p",[s("span",[t._v("项目帧率："+t._s(e.frame_rate))]),t._v("    "),s("span",[t._v("分辨率："+t._s(e.resolutic))])]),t._v(" "),s("p",[s("span",[t._v("视效总监："+t._s(e.visual_effects_boss))]),t._v("    "),s("span",[t._v("视效总制片："+t._s(e.visual_effects_producer))])]),t._v(" "),s("p",[s("span",[t._v("现场制片："+t._s(e.scene_producer))]),t._v("    "),s("span",[t._v("现场指导："+t._s(e.scene_director))])]),t._v(" "),s("p",[s("span",{attrs:{title:"二级公司制片："+e.second_company_producer}},[t._v("二级公司制片："+t._s(e.second_company_producer))]),t._v("    "),s("span",[t._v("内部协调："+t._s(e.inside_coordinate))])])]),t._v(" "),s("div",{staticClass:"bottom clearfix tx-r"},[t.editShow?s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(s){t.ProjectEdit(e.id)}}},[t._v("编辑")]):t._e(),t._v(" "),t.deleteShow?s("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(s){t.confirmDelete(e)}}},[t._v("删除")]):t._e()],1)])])],1)}),t._v(" "),s("div",{staticClass:"pos-rel p-t-20"})],2):t._e()])},staticRenderFns:[]};var r=s("VU/8")(o,l,!1,function(t){s("jWmL")},null,null);e.a=r.exports},"Ii/3":function(t,e){},J373:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("tvR6");var a=s("qBF2"),i=s.n(a),n=(s("j1ja"),s("7+uW")),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("transition",{attrs:{name:"bounce"}},[e("router-view")],1)],1)},staticRenderFns:[]};var l=s("VU/8")({name:"app",components:{}},o,!1,function(t){s("jg5p")},null,null).exports,r=s("YaEn"),c=s("YtJ0"),u=s("PJh5"),d=s.n(u),m=(n.default.filter("status",function(t){return 1==t?"启用":0==t?"禁用":"未知状态"}),n.default.filter("rules",function(t){return t}),n.default.filter("fileLink",function(t){return window.imgUrl+t}),n.default.filter("toolType",function(t){var e="";return 1==t?e="系统工具":2==t&&(e="说明知道"),e}),n.default.filter("numToString",function(t){return t.toString()}),n.default.filter("projectState",function(t){var e="";switch(t){case"1":e="售前项目";break;case"2":e="服务中项目";break;case"3":e="已结束项目"}return e}),n.default.filter("time",function(t){var e=d.a.unix(t);return d()(e).format("YYYY/MM/DD H:mm")}),n.default.filter("date",function(t){var e=d.a.unix(t);return d()(e).format("YYYY/MM/DD")}),n.default.filter("abstract",function(t){return t.length>70?t.substr(0,70)+"...":t}),n.default.filter("posStatus",function(t){var e="";switch(t){case 1:e="在职";break;case 2:e="待入职";break;case 3:e="离职"}return e}),void n.default.filter("template",function(t){return""==t?"上传":"上传更新"})),p=s("28UY");s("8ViC"),s("J373"),s("Qbok"),s("vlnU");n.default.use(i.a),n.default.use(p.a),new n.default({el:"#app",template:"<App/>",filters:m,router:r.a,store:c.a,components:{App:l}}).$mount("#app")},NWcU:function(t,e,s){"use strict";var a=s("//TE"),i=s("Rvav"),n=s("sHg/"),o={data:function(){return{isLoading:!1,form:{id:null,name:"",remark:""},rules:{name:[{required:!0,message:"请输入岗位名称",trigger:"blur"}]}}},methods:{edit:function(t){var e=this;this.$refs[t].validate(function(t){t&&(e.isLoading=!0,e.apiPut("admin/posts/",e.form.id,e.form).then(function(t){e.handelResponse(t,function(t){e.isLoading=!1,n.a.toastMsg("success","编辑成功"),setTimeout(function(){e.goback()},1500)},function(){e.isLoading=!1})}))})},getPosInfo:function(){var t=this;this.form.id=this.$route.params.id,this.apiGet("admin/posts/"+this.form.id).then(function(e){t.handelResponse(e,function(e){t.form.name=e.name,t.form.remark=e.remark})})}},created:function(){this.getPosInfo()},mixins:[a.a,i.a]},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"m-l-50 m-t-30 w-900"},[s("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[s("el-form-item",{attrs:{label:"岗位名称",prop:"name"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"==typeof e?e.trim():e)},expression:"form.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"备注"}},[s("el-input",{staticClass:"w-200",attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){t.edit("form")}}},[t._v("提交")]),t._v(" "),s("el-button",{on:{click:function(e){t.goback()}}},[t._v("返回")])],1)],1)],1)},staticRenderFns:[]},r=s("VU/8")(o,l,!1,null,null,null);e.a=r.exports},NZJc:function(t,e){},Nh03:function(t,e,s){"use strict";var a=s("//TE"),i=s("M4fF"),n=s.n(i),o=s("sHg/"),l={props:["selectedData","type"],data:function(){return{enableLoading:!1,disableLoading:!1,deleteLoading:!1}},methods:{getUrl:function(){return"admin/"+this.type},getSelectedIds:function(){var t=[];return n()(this.selectedData).forEach(function(e){t.push(e.id)}),t},changeAttrInBtnGroup:function(t){var e=this;if(this.selectedData.length){var s="";1==t?(s="启用",this.enableLoading=!this.enableLoading):(this.disableLoading=!this.disableLoading,s="禁用");var a=this.getUrl()+"/enables",i={ids:this.getSelectedIds(),status:t};this.apiPost(a,i).then(function(a){e.handelResponse(a,function(t){o.a.toastMsg("success",s+"成功"),setTimeout(function(){o.a.shallowRefresh(e.$route.name)},1500)},function(){1==t?e.enableLoading=!e.enableLoading:e.disableLoading=!e.disableLoading})})}else o.a.toastMsg("warning","请勾选数据")},deleteDatasInBtnGroup:function(){var t=this;if(this.selectedData.length){this.deleteLoading=!this.deleteLoading;var e=this.getUrl()+"/deletes",s={ids:this.getSelectedIds()};this.apiPost(e,s).then(function(e){t.handelResponse(e,function(s){o.a.toastMsg("success",e.data),setTimeout(function(){o.a.shallowRefresh(t.$route.name)},1500)},function(){t.deleteLoading=!t.deleteLoading})})}else o.a.toastMsg("warning","请勾选数据")}},computed:{enableShow:function(){return o.a.getHasRule(this.type+"-enables")},deletesShow:function(){return o.a.getHasRule(this.type+"-deletes")}},mixins:[a.a]},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.enableShow?s("el-button",{attrs:{loading:t.enableLoading,size:"small"},on:{click:function(e){t.changeAttrInBtnGroup(1)}}},[t._v("启用")]):t._e(),t._v(" "),t.enableShow?s("el-button",{attrs:{loading:t.disableLoading,size:"small"},on:{click:function(e){t.changeAttrInBtnGroup(0)}}},[t._v("禁用")]):t._e(),t._v(" "),t.deletesShow?s("el-button",{attrs:{loading:t.deleteLoading,size:"small"},on:{click:function(e){t.deleteDatasInBtnGroup()}}},[t._v("删除")]):t._e()],1)},staticRenderFns:[]},c=s("VU/8")(l,r,!1,null,null,null);e.a=c.exports},Q4DR:function(t,e){},Qbok:function(t,e){},"Rt+w":function(t,e,s){"use strict";var a=s("FZtq"),i=s("//TE"),n=s("Rvav"),o=s("M4fF"),l=s.n(o),r=s("sHg/"),c={data:function(){return{isLoading:!1,form:{title:"",rule_name:"",rule_id:null,pid:"",menu_type:"",url:"",module:"",menu:"",sort:""},options:[{id:0,title:"无"}],rules:{title:[{required:!0,message:"请输入菜单标题"}],menu_type:[{required:!0,message:"请选择菜单类型"}],module:[{required:!0,message:"请填写菜单模块"}],pid:[{type:"number",required:!0,message:"请选择上级菜单"}]}}},methods:{add:function(t){var e=this;this.$refs.form.validate(function(t){t&&(e.isLoading=!0,e.apiPost("admin/menus",e.form).then(function(t){e.handelResponse(t,function(t){e.isLoading=!1,r.a.toastMsg("success","添加成功"),setTimeout(function(){e.goback()},1500)},function(){e.isLoading=!1})}))})},openRule:function(){this.$refs.ruleList.open()}},created:function(){var t=this;this.apiGet("admin/menus").then(function(e){t.handelResponse(e,function(e){var s=[];l()(e).forEach(function(t){3!=t.level&&1==t.menu_type&&s.push(t)}),t.options=t.options.concat(s)})})},components:{ruleList:a.a},mixins:[i.a,n.a]},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"m-l-50 m-t-30 w-500"},[s("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"110px"}},[s("el-form-item",{attrs:{label:"标题",prop:"title"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.title,callback:function(e){t.$set(t.form,"title","string"==typeof e?e.trim():e)},expression:"form.title"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"绑定权限标识",prop:"rule_name"}},[s("el-input",{staticClass:"h-40 fl w-200",attrs:{disabled:!0},model:{value:t.form.rule_name,callback:function(e){t.$set(t.form,"rule_name","string"==typeof e?e.trim():e)},expression:"form.rule_name"}}),t._v(" "),s("el-button",{staticClass:"fl m-l-30",on:{click:function(e){t.openRule()}}},[t._v("查找")])],1),t._v(" "),s("el-form-item",{attrs:{label:"菜单类型",prop:"menu_type"}},[s("el-radio-group",{model:{value:t.form.menu_type,callback:function(e){t.$set(t.form,"menu_type",e)},expression:"form.menu_type"}},[s("el-radio",{attrs:{label:"1"}},[t._v("普通三级菜单")]),t._v(" "),s("el-radio",{attrs:{label:"2"}},[t._v("单页菜单")]),t._v(" "),s("el-radio",{attrs:{label:"3"}},[t._v("外链")])],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"上级菜单",prop:"pid"}},[s("el-select",{staticClass:"w-200",attrs:{placeholder:"上级菜单"},model:{value:t.form.pid,callback:function(e){t.$set(t.form,"pid",e)},expression:"form.pid"}},t._l(t.options,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}))],1),t._v(" "),s("el-form-item",{attrs:{label:"路径"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.url,callback:function(e){t.$set(t.form,"url","string"==typeof e?e.trim():e)},expression:"form.url"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"模块",prop:"module"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.module,callback:function(e){t.$set(t.form,"module","string"==typeof e?e.trim():e)},expression:"form.module"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"所属菜单"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.menu,callback:function(e){t.$set(t.form,"menu","string"==typeof e?e.trim():e)},expression:"form.menu"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"排序"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){t.add("form")}}},[t._v("提交")]),t._v(" "),s("el-button",{on:{click:function(e){t.goback()}}},[t._v("返回")])],1)],1),t._v(" "),s("ruleList",{ref:"ruleList"})],1)},staticRenderFns:[]},d=s("VU/8")(c,u,!1,null,null,null);e.a=d.exports},Rvav:function(t,e,s){"use strict";var a=s("YaEn"),i={methods:{goback:function(){a.a.go(-1)}}};e.a=i},Rygh:function(t,e,s){"use strict";var a=s("//TE"),i=s("Rvav"),n=s("M4fF"),o=s.n(n),l=s("sHg/"),r={data:function(){return{isLoading:!1,form:{title:"",name:"",pid:null,level:"1"},options:[{id:0,title:"根节点"}],rules:{title:[{required:!0,message:"请输入节点名称"}],name:[{required:!0,message:"请输入节点显示名"}],level:[{required:!0,message:"请选择节点类型"}],pid:[{type:"number",required:!0,message:"请选择父级节点"}]}}},methods:{add:function(t){var e=this;this.$refs[t].validate(function(t){t&&(e.isLoading=!0,e.apiPost("admin/rules",e.form).then(function(t){e.handelResponse(t,function(t){e.isLoading=!1,l.a.toastMsg("success","添加成功"),setTimeout(function(){e.goback()},1500)},function(){e.isLoading=!1})}))})},getRules:function(){var t=this;this.apiGet("admin/rules").then(function(e){t.handelResponse(e,function(e){o()(e).forEach(function(e){3!=e.level&&t.options.push(e)})})})}},created:function(){this.getRules()},mixins:[a.a,i.a]},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"m-l-50 m-t-30 w-500"},[s("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"110px"}},[s("el-form-item",{attrs:{label:"显示名",prop:"title"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.title,callback:function(e){t.$set(t.form,"title","string"==typeof e?e.trim():e)},expression:"form.title"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"名称",prop:"name"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"==typeof e?e.trim():e)},expression:"form.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"节点类型",prop:"level"}},[s("el-radio-group",{model:{value:t.form.level,callback:function(e){t.$set(t.form,"level",e)},expression:"form.level"}},[s("el-radio",{attrs:{label:"1"}},[t._v("项目")]),t._v(" "),s("el-radio",{attrs:{label:"2"}},[t._v("模块")]),t._v(" "),s("el-radio",{attrs:{label:"3"}},[t._v("操作")])],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"父节点",prop:"pid"}},[s("el-select",{staticClass:"w-200",attrs:{placeholder:"父节点"},model:{value:t.form.pid,callback:function(e){t.$set(t.form,"pid",e)},expression:"form.pid"}},t._l(t.options,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}))],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){t.add("form")}}},[t._v("提交")]),t._v(" "),s("el-button",{on:{click:function(e){t.goback()}}},[t._v("返回")])],1)],1)],1)},staticRenderFns:[]},u=s("VU/8")(r,c,!1,null,null,null);e.a=u.exports},SfG0:function(t,e,s){"use strict";var a=s("//TE"),i=s("Rvav"),n=s("sHg/"),o={data:function(){return{isLoading:!1,form:{explain:"",tache_name:"",sort:""},rules:{tache_name:[{required:!0,message:"请输入择环节"}],sort:[{required:!0,message:"请输入排序"}]}}},methods:{add:function(t){var e=this;this.$refs[t].validate(function(t){t&&(e.isLoading=!e.isLoading,e.apiPost("admin/taches",e.form).then(function(t){e.handelResponse(t,function(t){n.a.toastMsg("success","添加成功"),setTimeout(function(){e.goback()},1500)},function(){e.isLoading=!e.isLoading})}))})}},created:function(){n.a.closeGlobalLoading()},mixins:[a.a,i.a]},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"m-b-20"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:"/admin/taches/list"}}},[t._v("环节管理")]),t._v(" "),s("el-breadcrumb-item",[t._v("添加环节")])],1)],1),t._v(" "),s("div",{staticClass:"m-l-50 m-t-30 w-900"},[s("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[s("el-form-item",{attrs:{label:"环节名称",prop:"tache_name"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.tache_name,callback:function(e){t.$set(t.form,"tache_name","string"==typeof e?e.trim():e)},expression:"form.tache_name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"排序",prop:"sort"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort","string"==typeof e?e.trim():e)},expression:"form.sort"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"备注",prop:"explain"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.explain,callback:function(e){t.$set(t.form,"explain","string"==typeof e?e.trim():e)},expression:"form.explain"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){t.add("form")}}},[t._v("提交")]),t._v(" "),s("el-button",{on:{click:function(e){t.goback()}}},[t._v("返回")])],1)],1)],1)])},staticRenderFns:[]},r=s("VU/8")(o,l,!1,null,null,null);e.a=r.exports},"Tx+H":function(t,e,s){"use strict";var a=s("Xxa5"),i=s.n(a),n=s("exGp"),o=s.n(n),l=s("//Fk"),r=s.n(l),c=s("Rvav"),u=s("//TE"),d=s("sHg/"),m={data:function(){return{isLoading:!1,uploadImageUrl:window.HOST+"/admin/upload_image",userList:[],studiosOptions:[],plan_time:[],form:{project_name:"",project_byname:"",movies_type:"",project_image:"",aspect_ratio:"",resolutic:"",handle_frame:{handle_frame1:"",handle_frame2:""},frame_rate:"",plan_start_timestamp:"",plan_end_timestamp:"",studio_ids:"",scene_director:"",producer:"",scene_producer:"",visual_effects_boss:"",visual_effects_producer:"",second_company_producer:"",inside_coordinate:"",project_explain:""},studio_ids:[],scene_director:[],producer:[],scene_producer:[],visual_effects_boss:[],visual_effects_producer:[],second_company_producer:[],inside_coordinate:[],image:"",filterMethod:function(t,e){return e.pinyin.indexOf(t)>-1},rules:{project_name:[{required:!0,message:"请输入项目名称"}],movies_type:[{required:!0,message:"请选择影视类型"}],project_byname:[{required:!0,message:"请输入项目简称"},{min:3,max:5,message:"长度在 3 到 5 个字符"},{pattern:/^[A-Z]+$/,message:"项目简称必须为大写字母"}]}}},methods:{handleAvatarSuccess:function(t,e){this.image=URL.createObjectURL(e.raw),this.form.project_image=t.data},beforeAvatarUpload:function(t){var e=t.size/1024/1024<.195;return e||this.$message.error("上传图片大小不能超过 200KB!"),e},add:function(t){var e=this;this.form.project_image?this.form.aspect_ratio?this.form.resolutic?this.form.frame_rate?this.form.handle_frame.handle_frame1&&this.form.handle_frame.handle_frame2?0!==this.plan_time.length?0!==this.studio_ids.length?0!==this.scene_director.length?0!==this.producer.length?0!==this.scene_producer.length?0!==this.visual_effects_boss.length?0!==this.visual_effects_producer.length?0!==this.second_company_producer.length?0!==this.inside_coordinate.length?(this.form.project_image=this.form.project_image.slice(this.form.project_image.indexOf("uploads")),this.form.handle_frame=this.form.handle_frame.handle_frame1+","+this.form.handle_frame.handle_frame2,this.form.movies_type=parseInt(this.form.movies_type)?parseInt(this.form.movies_type):"",this.form.resolutic=parseInt(this.form.resolutic)?parseInt(this.form.resolutic):"",this.form.frame_rate=parseInt(this.form.frame_rate)?parseInt(this.form.frame_rate):"",this.form.aspect_ratio=parseInt(this.form.aspect_ratio)?parseInt(this.form.aspect_ratio):"",this.form.studio_ids=this.studio_ids.join(","),this.form.scene_director=this.scene_director.join(","),this.form.producer=this.producer.join(","),this.form.scene_producer=this.scene_producer.join(","),this.form.visual_effects_boss=this.visual_effects_boss.join(","),this.form.visual_effects_producer=this.visual_effects_producer.join(","),this.form.second_company_producer=this.second_company_producer.join(","),this.form.inside_coordinate=this.inside_coordinate.join(","),this.form.plan_start_timestamp=d.a.j2time(this.plan_time[0]),this.form.plan_end_timestamp=d.a.j2time(this.plan_time[1]),this.$refs.form.validate(function(t){t&&(e.isLoading=!e.isLoading,e.apiPut("admin/projects/",e.id,e.form).then(function(t){e.handelResponse(t,function(t){d.a.toastMsg("success","编辑成功"),setTimeout(function(){e.goback()},1500)},function(){e.isLoading=!e.isLoading})}))})):d.a.toastMsg("warning","请选择内部协调制片"):d.a.toastMsg("warning","请选择二级公司制片"):d.a.toastMsg("warning","请选择视效总制片"):d.a.toastMsg("warning","请选择视效总监"):d.a.toastMsg("warning","请选择现场制片"):d.a.toastMsg("warning","请选择负责制片"):d.a.toastMsg("warning","请选择现场指导"):d.a.toastMsg("warning","请选择所属工作室"):d.a.toastMsg("warning","请输入计划起止时间"):d.a.toastMsg("warning","请输入手柄帧"):d.a.toastMsg("warning","请选择项目帧率"):d.a.toastMsg("warning","请选择分辨率"):d.a.toastMsg("warning","请选择遮幅比"):d.a.toastMsg("warning","请选择项目缩略图")},getAllStudios:function(){var t=this;return new r.a(function(e,s){t.apiGet("admin/studios").then(function(s){t.handelResponse(s,function(t){e(t.list)})})})},getAllUsers:function(){var t=this;return new r.a(function(e,s){t.apiGet("admin/users").then(function(s){t.handelResponse(s,function(t){var s=[];t.list.forEach(function(t,e){s.push({label:t.realname,key:t.id,pinyin:t.username})}),e(s)})})})},getCompleteData:function(){var t=this;return o()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAllUsers();case 2:return t.userList=e.sent,e.next=5,t.getAllStudios();case 5:t.studiosOptions=e.sent,t.apiGet("admin/projects/"+t.id).then(function(e){t.handelResponse(e,function(e){function s(t){var e=t.split(","),s=[];return _(e).forEach(function(t,e){s.push(parseInt(t))}),s}t.form.project_name=e.project_name,t.form.project_byname=e.project_byname,t.form.project_explain=e.project_explain,t.form.project_image=t.image=window.baseUrl+"/"+e.project_image,t.form.handle_frame.handle_frame1=e.handle_frame.split(",")[0],t.form.handle_frame.handle_frame2=e.handle_frame.split(",")[1],t.form.movies_type=e.movies_type.toString(),t.form.resolutic=e.resolutic.toString(),t.form.frame_rate=e.frame_rate.toString(),t.form.aspect_ratio=e.aspect_ratio.toString(),t.studio_ids=s(e.studio_ids),t.scene_director=s(e.scene_director),t.producer=s(e.producer),t.scene_producer=s(e.scene_producer),t.visual_effects_boss=s(e.visual_effects_boss),t.visual_effects_producer=s(e.visual_effects_producer),t.second_company_producer=s(e.second_company_producer),t.inside_coordinate=s(e.inside_coordinate),t.plan_time=[new Date(1e3*e.plan_start_timestamp),new Date(1e3*e.plan_end_timestamp)]})});case 7:case"end":return e.stop()}},e,t)}))()}},created:function(){this.id=this.$route.params.id,this.getCompleteData()},mixins:[u.a,c.a]},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"m-b-20"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[t._v("项目管理")]),t._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:"/admin/projects/list"}}},[t._v("项目汇总")]),t._v(" "),s("el-breadcrumb-item",[t._v("编辑项目")])],1)],1),t._v(" "),s("div",{staticClass:"m-l-50 m-t-30 w-1000"},[s("el-form",{ref:"form",staticClass:"project_add",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[s("el-row",{attrs:{gutter:20}},[s("el-form-item",{attrs:{label:"项目名称:",prop:"project_name"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.project_name,callback:function(e){t.$set(t.form,"project_name","string"==typeof e?e.trim():e)},expression:"form.project_name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"项目简称:",prop:"project_byname"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.project_byname,callback:function(e){t.$set(t.form,"project_byname","string"==typeof e?e.trim():e)},expression:"form.project_byname"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"影视类型:",prop:"movies_type"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.movies_type,callback:function(e){t.$set(t.form,"movies_type",e)},expression:"form.movies_type"}},[s("el-option",{attrs:{label:"电影",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"电视剧",value:"2"}})],1)],1)],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-form-item",{staticClass:"is-required",attrs:{label:"项目缩略图:",prop:"image"}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadImageUrl,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.project_image?s("img",{staticClass:"avatar",attrs:{src:t.image}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-form-item",{staticClass:"is-required",attrs:{label:"所属工作室:",prop:"studio_ids"}},[s("el-select",{staticClass:"form_studio_id",attrs:{multiple:"",placeholder:"请选择工作室"},model:{value:t.studio_ids,callback:function(e){t.studio_ids=e},expression:"studio_ids"}},t._l(t.studiosOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),s("el-form-item",{staticClass:"is-required",attrs:{label:"计划起止时间:",prop:"plan_time"}},[s("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.plan_time,callback:function(e){t.plan_time=e},expression:"plan_time"}})],1)],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-form-item",{staticClass:"is-required",attrs:{label:"遮幅比:",prop:"aspect_ratio"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.aspect_ratio,callback:function(e){t.$set(t.form,"aspect_ratio",e)},expression:"form.aspect_ratio"}},[s("el-option",{attrs:{label:"16：9",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"10：5",value:"2"}}),t._v(" "),s("el-option",{attrs:{label:"1：1",value:"3"}})],1)],1),t._v(" "),s("el-form-item",{staticClass:"is-required",attrs:{label:"分辨率:",prop:"resolutic"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.resolutic,callback:function(e){t.$set(t.form,"resolutic",e)},expression:"form.resolutic"}},[s("el-option",{attrs:{label:"1024*768",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"2560*1680",value:"2"}})],1)],1)],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-form-item",{staticClass:"is-required",attrs:{label:"项目帧率:",prop:"frame_rate"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.frame_rate,callback:function(e){t.$set(t.form,"frame_rate",e)},expression:"form.frame_rate"}},[s("el-option",{attrs:{label:"请选择",value:""}}),t._v(" "),s("el-option",{attrs:{label:"24fps",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"25fps",value:"2"}})],1)],1),t._v(" "),s("el-form-item",{staticClass:"is-required",attrs:{label:"手柄帧:",prop:"handle_frame"}},[s("el-input",{staticClass:"h-40",staticStyle:{width:"100px"},model:{value:t.form.handle_frame.handle_frame1,callback:function(e){t.$set(t.form.handle_frame,"handle_frame1","string"==typeof e?e.trim():e)},expression:"form.handle_frame.handle_frame1"}}),t._v(" "),s("el-input",{staticClass:"h-40",staticStyle:{width:"100px"},model:{value:t.form.handle_frame.handle_frame2,callback:function(e){t.$set(t.form.handle_frame,"handle_frame2","string"==typeof e?e.trim():e)},expression:"form.handle_frame.handle_frame2"}})],1)],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-form-item",{staticClass:"is-required",attrs:{label:"现场指导:",prop:"scene_director"}},[s("el-transfer",{attrs:{titles:["请选择","已选择"],filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入拼音",data:t.userList},model:{value:t.scene_director,callback:function(e){t.scene_director=e},expression:"scene_director"}})],1),t._v(" "),s("el-form-item",{staticClass:"is-required",attrs:{label:"负责制片:",prop:"producer"}},[s("el-transfer",{attrs:{titles:["请选择","已选择"],filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入拼音",data:t.userList},model:{value:t.producer,callback:function(e){t.producer=e},expression:"producer"}})],1)],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-form-item",{staticClass:"is-required",attrs:{label:"现场制片:",prop:"scene_producer"}},[s("el-transfer",{attrs:{titles:["请选择","已选择"],filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入拼音",data:t.userList},model:{value:t.scene_producer,callback:function(e){t.scene_producer=e},expression:"scene_producer"}})],1),t._v(" "),s("el-form-item",{staticClass:"is-required",attrs:{label:"视效总监:",prop:"visual_effects_boss"}},[s("el-transfer",{attrs:{titles:["请选择","已选择"],filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入拼音",data:t.userList},model:{value:t.visual_effects_boss,callback:function(e){t.visual_effects_boss=e},expression:"visual_effects_boss"}})],1)],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-form-item",{staticClass:"is-required",attrs:{label:"视效总制片:",prop:"visual_effects_producer"}},[s("el-transfer",{attrs:{titles:["请选择","已选择"],filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入拼音",data:t.userList},model:{value:t.visual_effects_producer,callback:function(e){t.visual_effects_producer=e},expression:"visual_effects_producer"}})],1),t._v(" "),s("el-form-item",{staticClass:"is-required",attrs:{label:"二级公司制片:",prop:"second_company_producer"}},[s("el-transfer",{attrs:{titles:["请选择","已选择"],filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入拼音",data:t.userList},model:{value:t.second_company_producer,callback:function(e){t.second_company_producer=e},expression:"second_company_producer"}})],1)],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-form-item",{staticClass:"is-required",attrs:{label:"内部协调制片:",prop:"inside_coordinate"}},[s("el-transfer",{attrs:{titles:["请选择","已选择"],filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入拼音",data:t.userList},model:{value:t.inside_coordinate,callback:function(e){t.inside_coordinate=e},expression:"inside_coordinate"}})],1)],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-form-item",{attrs:{label:"项目说明:",prop:"project_explain"}},[s("el-input",{staticClass:"h-40 w-800",staticStyle:{resize:"none"},attrs:{type:"textarea",rows:2},model:{value:t.form.project_explain,callback:function(e){t.$set(t.form,"project_explain","string"==typeof e?e.trim():e)},expression:"form.project_explain"}})],1)],1),t._v(" "),s("el-form-item",{staticClass:"tsf_ProjectMap"},[s("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){t.add("form")}}},[t._v("提交")]),t._v(" "),s("el-button",{on:{click:function(e){t.goback()}}},[t._v("返回")])],1)],1)],1)])},staticRenderFns:[]};var f=s("VU/8")(m,p,!1,function(t){s("Ii/3")},null,null);e.a=f.exports},UVIz:function(t,e){},WRpJ:function(t,e,s){"use strict";var a=s("Nh03"),i=s("AMsI"),n=s("//TE"),o=s("sHg/"),l={data:function(){return{multipleSelection:[],currentPage:1,listCurrentPage:1,isShotDetailShow:!1,activeName:"shotInDevelopment",isList:!1,address:window.baseUrl+"/",inProductionDataCount:0,inProductionList:[],feedbackDataCount:0,feedbackList:[],waitingDataCount:0,waitingList:[],pauseDataCount:0,pauseList:[],finishDataCount:0,finishList:[],listDataCount:0,tableData:[],page:1,limit:10,editShotDetail:{},search:{project_id:"",field_id:"",shot_id:"",shot_number:""},projectList:[],fieldList:[],shotList:[]}},methods:{searchShot:function(){6===this.search.shot_number.length&&(this.search.project_id="",this.search.field_id="",this.search.shot_id="",this.init(this.activeName)),this.search.field_id||3!==this.search.shot_number.length?(this.search.shot_id="",this.init(this.activeName)):o.a.toastMsg("warning","请选择所属项目及场号")},editShot:function(){this.$refs.editShots.open()},shotDetail:function(t){var e=this;/^[0-9]*$/.test(t)||(t=t.id),this.id=t,this.apiGet("admin/shots/"+t).then(function(t){e.handelResponse(t,function(t){e.editShotDetail=t})}),this.isShotDetailShow||(this.isShotDetailShow=!this.isShotDetailShow)},deleteTache:function(t){var e=this;this.$confirm("确认删除该环节?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.a.openGlobalLoading();var s={id:e.id,tache_name:t};e.apiPost("shot/tache_del",s).then(function(t){o.a.closeGlobalLoading(),e.handelResponse(t,function(t){o.a.toastMsg("success","删除成功"),e.shotDetail(e.id)})})}).catch(function(){})},deleteTacheStudio:function(t,e){var s=this;console.log(e),this.$confirm("确认删除该环节所属工作室?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.a.openGlobalLoading();var a={id:s.id,tache_name:t,studio_id:e.id};s.apiPost("shot/studio_del",a).then(function(t){o.a.closeGlobalLoading(),s.handelResponse(t,function(t){o.a.toastMsg("success","删除成功"),s.shotDetail(s.id)})})}).catch(function(){})},deleteShot:function(t){var e=this;this.$confirm("确认删除该镜头?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.a.openGlobalLoading(),e.apiDelete("admin/shots/",e.id).then(function(t){o.a.closeGlobalLoading(),e.handelResponse(t,function(t){o.a.toastMsg("success","删除成功"),e.init(e.activeName),e.getShotList(e.page),e.isShotDetailShow=!1})})}).catch(function(){})},inProductionCurrentChange:function(t){this.getShots("in_production",t)},feedbackCurrentChange:function(t){this.getShots("feedback",t)},waitingCurrentChange:function(t){this.getShots("waiting",t)},pauseCurrentChange:function(t){this.getShots("pause",t)},finishCurrentChange:function(t){this.getShots("finish",t)},listCurrentChange:function(t){this.getShotList(t)},handleSelectionChange:function(t){this.multipleSelection=t},tabClick:function(t,e){this.init(t.name)},j2time:function(t){return(t=new Date(1e3*t)).getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},shotRemainDay:function(t){return Math.ceil((t-new Date/1e3)/86400)},shotCreateTime:function(t){return Math.ceil((new Date/1e3-t)/86400)},getProjects:function(){var t=this;this.apiGet("admin/projects").then(function(e){t.handelResponse(e,function(e){t.projectList=e.list})})},getShots:function(t,e){var s=this;console.log(this.search);var a={params:{page:e,limit:this.limit,keywords:this.search}},i="shot/"+t;this.loading=!0,this.apiGet(i,a).then(function(e){s.handelResponse(e,function(e){switch(t){case"in_production":s.inProductionDataCount=e.dataCount,s.inProductionList=e.list;break;case"feedback":s.feedbackDataCount=e.dataCount,s.feedbackList=e.list;break;case"waiting":s.waitingDataCount=e.dataCount,s.waitingList=e.list;break;case"pause":s.pauseDataCount=e.dataCount,s.pauseList=e.list;break;case"finish":s.finishDataCount=e.dataCount,s.finishList=e.list}})})},getShotList:function(t){var e=this;this.page=t;var s={params:{page:t,limit:this.limit}};this.apiGet("admin/shots",s).then(function(t){e.handelResponse(t,function(t){e.tableData=t.list,e.listDataCount=t.dataCount})})},getFields:function(){var t=this;this.init(this.activeName);var e={params:{project_id:this.search.project_id}};this.apiGet("admin/get_fields",e).then(function(e){t.handelResponse(e,function(e){t.fieldList=e})})},getShotsNum:function(){var t=this;this.init(this.activeName);var e={params:{field_id:this.search.field_id}};this.apiGet("admin/get_shot_num",e).then(function(e){t.handelResponse(e,function(e){t.shotList=e})})},init:function(t){switch(t){case"shotsInDevelopment":this.getShots("in_production",1),this.getShots("feedback",1);break;case"shotsNotDevelopment":this.getShots("waiting",1);break;case"shotsSuspend":this.getShots("pause",1);break;case"shotsFinish":this.getShots("finish",1);break;default:this.activeName="shotsInDevelopment",this.init("shotsInDevelopment")}}},created:function(){this.activeName=this.$route.query.type,this.isList=this.$route.query.list,this.init(this.activeName),this.getShotList(1),this.getProjects()},components:{editShots:i.a,btnGroup:a.a},mixins:[n.a],computed:{editShow:function(){return o.a.getHasRule("shots-update")},deleteShow:function(){return o.a.getHasRule("shots-delete")},deleteShowTache:function(){return o.a.getHasRule("shots-delete_tache")},deleteShowTacheStudio:function(){return o.a.getHasRule("shots-delete_studio")},inDevelopmentShow:function(){return o.a.getHasRule("shots-in_production_data")},feedbackShow:function(){return o.a.getHasRule("shots-feedback_data")},suspendShow:function(){return o.a.getHasRule("shots-pause_data")},finishShow:function(){return o.a.getHasRule("shots-finish_data")}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shot_list_detail"},[s("div",{staticClass:"m-b-20"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:"/admin/shots/list"}}},[t._v("镜头管理")]),t._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:"/admin/shots/list"}}},[t._v("镜头列表")]),t._v(" "),s("el-breadcrumb-item",[t._v("镜头详情")])],1)],1),t._v(" "),s("div",{staticClass:"m-b-20 pos-rel"},[s("div",{staticClass:"pos-abs"},[s("el-row",{staticClass:"m-b-5",attrs:{gutter:10}},[s("el-col",{attrs:{span:5}},[s("el-select",{attrs:{placeholder:"请选择项目"},on:{change:t.getFields},model:{value:t.search.project_id,callback:function(e){t.$set(t.search,"project_id",e)},expression:"search.project_id"}},[s("el-option",{attrs:{label:"请选择项目",value:""}}),t._v(" "),t._l(t.projectList,function(t){return s("el-option",{key:t.id,attrs:{label:t.project_name,value:t.id}})})],2)],1),t._v(" "),s("el-col",{attrs:{span:5}},[s("el-select",{attrs:{placeholder:"请选择场号"},on:{change:t.getShotsNum},model:{value:t.search.field_id,callback:function(e){t.$set(t.search,"field_id",e)},expression:"search.field_id"}},[s("el-option",{attrs:{label:"请选择场号",value:""}}),t._v(" "),t._l(t.fieldList,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})],2)],1),t._v(" "),s("el-col",{attrs:{span:5}},[s("el-select",{attrs:{placeholder:"请选择镜头号"},on:{change:function(e){t.init(t.activeName)}},model:{value:t.search.shot_id,callback:function(e){t.$set(t.search,"shot_id",e)},expression:"search.shot_id"}},[s("el-option",{attrs:{label:"请选择镜头号",value:""}}),t._v(" "),t._l(t.shotList,function(t,e){return s("el-option",{key:e,attrs:{label:t.shot_number,value:t.id}})})],2)],1),t._v(" "),s("el-col",{attrs:{span:6}},[s("el-input",{attrs:{placeholder:"请输入场号镜头号"},model:{value:t.search.shot_number,callback:function(e){t.$set(t.search,"shot_number","string"==typeof e?e.trim():e)},expression:"search.shot_number"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchShot},slot:"append"})],1)],1)],1)],1),t._v(" "),s("div",{staticClass:"tx-r"},[s("el-tooltip",{attrs:{effect:"dark",content:"镜头进度",placement:"bottom-start"}},[s("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){t.isList=!1}}},[s("i",{staticClass:"el-icon-menu"})])],1),t._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"镜头列表",placement:"bottom-start"}},[s("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){t.isList=!0}}},[s("i",{staticClass:"el-icon-document"})])],1)],1)]),t._v(" "),s("div",{staticClass:"m-b-20 ovf-hd"},[t.isList?s("div",[s("el-table",{ref:"multipleTable",attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange,"row-click":t.shotDetail}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),s("el-table-column",{attrs:{prop:"shot_image",label:"缩略图"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("img",{staticClass:"dp-b h-60",attrs:{src:t.address+e.row.shot_image,alt:""}})]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"field_number",label:"场号"}}),t._v(" "),s("el-table-column",{attrs:{prop:"shot_number",label:"镜头号"}}),t._v(" "),s("el-table-column",{attrs:{prop:"difficulty",label:"难度"}}),t._v(" "),s("el-table-column",{attrs:{prop:"priority_level",label:"优先级"}}),t._v(" "),s("el-table-column",{attrs:{prop:"tache",label:"进度",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.tache_info,function(e){return""!==e.finish_degree?s("el-tag",{key:e.id,attrs:{type:e.finish_degree<100?"warning":"success"}},[t._v("\n              "+t._s(e.tache_byname)+":"+t._s(e.finish_degree)+"%\n            ")]):t._e()})}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"plan_start_time",label:"计划开始"}}),t._v(" "),s("el-table-column",{attrs:{prop:"plan_end_time",label:"计划结束"}}),t._v(" "),s("el-table-column",{attrs:{prop:"actual_start_timestamp",label:"实际开始"}}),t._v(" "),s("el-table-column",{attrs:{prop:"actual_end_timestamp",label:"实际结束"}})],1),t._v(" "),s("div",{staticClass:"pos-rel p-t-20"},[s("div",{staticClass:"block tx-r"},[s("el-pagination",{attrs:{layout:"total, prev, pager, next","page-size":t.limit,"current-page":t.listCurrentPage,total:t.listDataCount},on:{"current-change":t.listCurrentChange}})],1)])],1):t._e(),t._v(" "),t.isList?t._e():s("el-tabs",{staticClass:"fl",on:{"tab-click":t.tabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"镜头制作中",name:"shotsInDevelopment"}},[s("div",{staticClass:"shot_card ovf-hd"},[t.inDevelopmentShow?s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content"},[s("h2",{staticClass:"m-0"},[t._v("制作中")]),t._v(" "),s("ul",{staticClass:"p-l-0 m-0"},t._l(t.inProductionList,function(e){return s("li",{key:e.id,on:{click:function(s){t.shotDetail(e.id)}}},[s("el-card",[s("div",[s("div",{staticClass:"text-Lens pos-rel"},[s("p",{staticClass:"text-Lens-name h-28 "},[t._v("\n                          "+t._s(e.project_name)+"："),s("span",[t._v(t._s(e.shot_number))])]),t._v(" "),s("p",{staticClass:"text-Lens-rank pos-abs"},[s("el-tooltip",{staticClass:"pointer",attrs:{effect:"dark",content:"镜头难度",placement:"bottom-start"}},[s("el-tag",{attrs:{type:"warning"}},[t._v(t._s(e.difficulty))])],1),t._v(" "),e.priority_level?s("el-tooltip",{staticClass:"pointer",attrs:{effect:"dark",content:"镜头优先级",placement:"bottom-start"}},[s("el-tag",{attrs:{type:"danger"}},[t._v(t._s(e.priority_level))])],1):t._e()],1)]),t._v(" "),s("div",{staticClass:"text-Lens m-t-10"},[s("p",{staticClass:"text-Lens-assets"},[s("el-tag",{attrs:{type:"info"}},[t._v("元宝:道具")]),t._v(" "),s("el-tag",{attrs:{type:"info"}},[t._v("混天绫:道具")]),t._v(" "),s("el-tag",{attrs:{type:"info"}},[t._v("元宝:道具")]),t._v(" "),s("el-tag",{attrs:{type:"info"}},[t._v("混天绫:道具")])],1),t._v(" "),s("p",{staticClass:"text-Lens-time fr tx-r"},[s("span",[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"镜头剩余天数",placement:"bottom-start"}},[s("span",[t._v(t._s(t.shotRemainDay(e.plan_end_timestamp))+"天")])]),t._v(" "),s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"镜头建立时间",placement:"bottom-start"}},[s("span",[t._v(t._s(t.shotCreateTime(e.create_timestamp))+"天")])]),t._v(" "),s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"镜头制作中时间",placement:"bottom-start"}},[s("span",[t._v(t._s(Math.ceil(e.surplus_days))+"天")])])],1),t._v(" "),s("span",[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"预计结束时间",placement:"bottom-start"}},[s("span",[t._v(t._s(t.j2time(e.plan_end_timestamp)))])])],1)])]),t._v(" "),s("div",{staticClass:"text-Lens-link m-t-10"},t._l(e.tache_info,function(e){return""!==e.finish_degree?s("el-tag",{key:e.id,staticClass:"m-l-5 m-b-5",attrs:{type:e.finish_degree<100?"warning":"success"}},[t._v("\n                          "+t._s(e.tache_byname)+"："+t._s(e.finish_degree)+"%\n                        ")]):t._e()}))])])],1)})),t._v(" "),t.inProductionList.length?s("div",{staticClass:"pos-rel p-t-20"},[s("div",{staticClass:"block tx-r"},[s("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":10,layout:"prev, pager, next, jumper",total:t.inProductionDataCount},on:{"current-change":t.inProductionCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)]):t._e()])]):t._e(),t._v(" "),t.feedbackShow?s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("h2",{staticClass:"m-0"},[t._v("反馈中")]),t._v(" "),s("ul",{staticClass:"p-l-0 m-0"},t._l(t.feedbackList,function(e){return s("li",{key:e.id,on:{click:function(s){t.shotDetail(e.id)}}},[s("el-card",{},[s("div",{},[s("div",{staticClass:"text-Lens pos-rel"},[s("p",{staticClass:"text-Lens-name h-28 "},[t._v("\n                          "+t._s(e.project_name)+"："),s("span",[t._v(t._s(e.shot_number))])]),t._v(" "),s("p",{staticClass:"text-Lens-rank pos-abs"},[s("el-tooltip",{staticClass:"pointer",attrs:{effect:"dark",content:"镜头难度",placement:"bottom-start"}},[s("el-tag",{attrs:{type:"warning"}},[t._v(t._s(e.difficulty))])],1),t._v(" "),e.priority_level?s("el-tooltip",{staticClass:"pointer",attrs:{effect:"dark",content:"镜头优先级",placement:"bottom-start"}},[s("el-tag",{attrs:{type:"danger"}},[t._v(t._s(e.priority_level))])],1):t._e()],1)]),t._v(" "),s("div",{staticClass:"text-Lens m-t-10"},[s("p",{staticClass:"text-Lens-assets"},[s("el-tag",{attrs:{type:"info"}},[t._v("混天绫:道具")]),t._v(" "),s("el-tag",{attrs:{type:"info"}},[t._v("元宝:道具")]),t._v(" "),s("el-tag",{attrs:{type:"info"}},[t._v("混天绫:道具")]),t._v(" "),s("el-tag",{attrs:{type:"info"}},[t._v("元宝:道具")]),t._v(" "),s("el-tag",{attrs:{type:"info"}},[t._v("混天绫:道具")])],1),t._v(" "),s("p",{staticClass:"text-Lens-time fr tx-r"},[s("span",[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"镜头剩余天数",placement:"bottom-start"}},[s("span",[t._v(t._s(t.shotRemainDay(e.plan_end_timestamp))+"天")])]),t._v(" "),s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"镜头建立时间",placement:"bottom-start"}},[s("span",[t._v(t._s(t.shotCreateTime(e.create_timestamp))+"天")])]),t._v(" "),s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"镜头制作中时间",placement:"bottom-start"}},[s("span",[t._v("0天")])])],1),t._v(" "),s("span",[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"预计结束时间",placement:"bottom-start"}},[s("span",[t._v(t._s(t.j2time(e.plan_end_timestamp)))])])],1)])]),t._v(" "),s("div",{staticClass:"text-Lens-link m-t-10"},t._l(e.tache_info,function(e){return""!==e.finish_degree?s("el-tag",{key:e.id,staticClass:"m-l-5",attrs:{type:e.finish_degree<100?"warning":"success"}},[t._v("\n                          "+t._s(e.tache_byname)+"："+t._s(e.finish_degree)+"%\n                        ")]):t._e()}))])])],1)})),t._v(" "),t.feedbackList.length?s("div",{staticClass:"pos-rel p-t-20"},[s("div",{staticClass:"block tx-r"},[s("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":10,layout:"prev, pager, next, jumper",total:t.feedbackDataCount},on:{"current-change":t.feedbackCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)]):t._e()])]):t._e()],1)]),t._v(" "),s("el-tab-pane",{attrs:{label:"镜头未制作",name:"shotsNotDevelopment"}},[s("div",{staticClass:"shot_card ovf-hd"},[s("div",{staticClass:"grid-content bg-purple"},[s("h2",{staticClass:"m-0"},[t._v("等待资产")]),t._v(" "),t._l(t.waitingList,function(e){return s("el-col",{key:e.id,attrs:{span:12},on:{click:function(s){t.shotDetail(e.id)}}},[s("div",{staticClass:"grid-content bg-purple p-b-5"},[s("el-card",{},[s("div",{},[s("div",{staticClass:"text-Lens pos-rel"},[s("p",{staticClass:"text-Lens-name h-28 "},[t._v("\n                        "+t._s(e.project_name)+"："),s("span",[t._v(t._s(e.shot_number))])]),t._v(" "),s("p",{staticClass:"text-Lens-rank pos-abs"},[s("el-tooltip",{staticClass:"pointer",attrs:{effect:"dark",content:"镜头难度",placement:"bottom-start"}},[s("el-tag",{attrs:{type:"warning"}},[t._v(t._s(e.difficulty))])],1),t._v(" "),e.priority_level?s("el-tooltip",{staticClass:"pointer",attrs:{effect:"dark",content:"镜头优先级",placement:"bottom-start"}},[s("el-tag",{attrs:{type:"danger"}},[t._v(t._s(e.priority_level))])],1):t._e()],1)]),t._v(" "),s("div",{staticClass:"text-Lens m-t-10"},[s("p",{staticClass:"text-Lens-assets"},[s("el-tag",{attrs:{type:"info"}},[t._v("混天绫:道具")]),t._v(" "),s("el-tag",{attrs:{type:"info"}},[t._v("元宝:道具")]),t._v(" "),s("el-tag",{attrs:{type:"info"}},[t._v("混天绫:道具")]),t._v(" "),s("el-tag",{attrs:{type:"info"}},[t._v("元宝:道具")]),t._v(" "),s("el-tag",{attrs:{type:"info"}},[t._v("混天绫:道具")])],1),t._v(" "),s("p",{staticClass:"text-Lens-time fr tx-r"},[s("span",[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"镜头剩余天数",placement:"bottom-start"}},[s("span",[t._v(t._s(t.shotRemainDay(e.plan_end_timestamp))+"天")])]),t._v(" "),s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"镜头建立时间",placement:"bottom-start"}},[s("span",[t._v(t._s(t.shotCreateTime(e.create_timestamp))+"天")])]),t._v(" "),s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"镜头制作中时间",placement:"bottom-start"}},[s("span",[t._v("0天")])])],1),t._v(" "),s("span",[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"预计结束时间",placement:"bottom-start"}},[s("span",[t._v(t._s(t.j2time(e.plan_end_timestamp)))])])],1)])]),t._v(" "),s("div",{staticClass:"text-Lens-link m-t-10"},t._l(e.tache_info,function(e){return""!==e.finish_degree?s("el-tag",{key:e.id,staticClass:"m-l-5",attrs:{type:e.finish_degree<100?"warning":"success"}},[t._v("\n                        "+t._s(e.tache_byname)+"："+t._s(e.finish_degree)+"%\n                      ")]):t._e()}))])])],1)])}),t._v(" "),t.waitingList.length?s("div",{staticClass:"pos-rel p-t-20"},[s("div",{staticClass:"block tx-r"},[s("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":10,layout:"prev, pager, next, jumper",total:t.waitingDataCount},on:{"current-change":t.waitingCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)]):t._e()],2)])]),t._v(" "),t.suspendShow?s("el-tab-pane",{attrs:{label:"镜头暂停",name:"shotsSuspend"}},[t._l(t.pauseList,function(e){return s("el-col",{key:e.id,attrs:{span:12},on:{click:function(s){t.shotDetail(e.id)}}},[s("div",{staticClass:"grid-content p-b-5"},[s("el-card",[s("div",{staticClass:"text-Lens pos-rel"},[s("p",{staticClass:"text-Lens-name h-28 "},[t._v("\n                  "+t._s(e.project_name)+"："),s("span",[t._v(t._s(e.shot_number))])]),t._v(" "),s("p",{staticClass:"text-Lens-rank pos-abs"},[s("el-tooltip",{staticClass:"pointer",attrs:{effect:"dark",content:"镜头难度",placement:"bottom-start"}},[s("el-tag",{attrs:{type:"warning"}},[t._v(t._s(e.difficulty))])],1),t._v(" "),e.priority_level?s("el-tooltip",{staticClass:"pointer",attrs:{effect:"dark",content:"镜头优先级",placement:"bottom-start"}},[s("el-tag",{attrs:{type:"danger"}},[t._v(t._s(e.priority_level))])],1):t._e()],1)]),t._v(" "),s("div",{staticClass:"text-Lens m-t-10"},[s("p",{staticClass:"text-Lens-assets"},[s("el-tag",{attrs:{type:"info"}},[t._v("混天绫:道具")]),t._v(" "),s("el-tag",{attrs:{type:"info"}},[t._v("元宝:道具")]),t._v(" "),s("el-tag",{attrs:{type:"info"}},[t._v("混天绫:道具")]),t._v(" "),s("el-tag",{attrs:{type:"info"}},[t._v("元宝:道具")]),t._v(" "),s("el-tag",{attrs:{type:"info"}},[t._v("混天绫:道具")])],1),t._v(" "),s("p",{staticClass:"text-Lens-time fr tx-r"},[s("span",[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"镜头剩余天数",placement:"bottom-start"}},[s("span",[t._v(t._s(t.shotRemainDay(e.plan_end_timestamp))+"天")])]),t._v(" "),s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"镜头建立时间",placement:"bottom-start"}},[s("span",[t._v(t._s(t.shotCreateTime(e.create_timestamp))+"天")])]),t._v(" "),s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"镜头制作中时间",placement:"bottom-start"}},[s("span",[t._v("0天")])])],1),t._v(" "),s("span",[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"预计结束时间",placement:"bottom-start"}},[s("span",[t._v(t._s(t.j2time(e.plan_end_timestamp)))])])],1)])]),t._v(" "),s("div",{staticClass:"text-Lens-link m-t-10"},t._l(e.tache_info,function(e){return""!==e.finish_degree?s("el-tag",{key:e.id,staticClass:"m-l-5",attrs:{type:e.finish_degree<100?"warning":"success"}},[t._v("\n                  "+t._s(e.tache_byname)+"："+t._s(e.finish_degree)+"%\n                ")]):t._e()}))])],1)])}),t._v(" "),t.pauseList.length?s("div",{staticClass:"pos-rel p-t-20"},[s("div",{staticClass:"block tx-r"},[s("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":10,layout:"prev, pager, next, jumper",total:t.pauseDataCount},on:{"current-change":t.pauseCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)]):t._e()],2):t._e(),t._v(" "),t.finishShow?s("el-tab-pane",{attrs:{label:"镜头完成",name:"shotsFinish"}},[t._l(t.finishList,function(e){return s("el-col",{key:e.id,attrs:{span:12},on:{click:function(s){t.shotDetail(e.id)}}},[s("div",{staticClass:"grid-content p-b-5"},[s("el-card",[s("div",{staticClass:"text-Lens pos-rel"},[s("p",{staticClass:"text-Lens-name h-28 "},[t._v("\n                  "+t._s(e.project_name)+"："),s("span",[t._v(t._s(e.shot_number))])]),t._v(" "),s("p",{staticClass:"text-Lens-rank pos-abs"},[s("el-tooltip",{staticClass:"pointer",attrs:{effect:"dark",content:"镜头难度",placement:"bottom-start"}},[s("el-tag",{attrs:{type:"warning"}},[t._v(t._s(e.difficulty))])],1),t._v(" "),e.priority_level?s("el-tooltip",{staticClass:"pointer",attrs:{effect:"dark",content:"镜头优先级",placement:"bottom-start"}},[s("el-tag",{attrs:{type:"danger"}},[t._v(t._s(e.priority_level))])],1):t._e()],1)]),t._v(" "),s("div",{staticClass:"text-Lens m-t-10"},[s("p",{staticClass:"text-Lens-assets"},[s("el-tag",{attrs:{type:"info"}},[t._v("混天绫:道具")]),t._v(" "),s("el-tag",{attrs:{type:"info"}},[t._v("元宝:道具")]),t._v(" "),s("el-tag",{attrs:{type:"info"}},[t._v("混天绫:道具")]),t._v(" "),s("el-tag",{attrs:{type:"info"}},[t._v("元宝:道具")]),t._v(" "),s("el-tag",{attrs:{type:"info"}},[t._v("混天绫:道具")])],1),t._v(" "),s("p",{staticClass:"text-Lens-time fr tx-r"},[s("span",[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"镜头剩余天数",placement:"bottom-start"}},[s("span",[t._v(t._s(t.shotRemainDay(e.plan_end_timestamp))+"天")])]),t._v(" "),s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"镜头建立时间",placement:"bottom-start"}},[s("span",[t._v(t._s(t.shotCreateTime(e.create_timestamp))+"天")])]),t._v(" "),s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"镜头制作中时间",placement:"bottom-start"}},[s("span",[t._v("0天")])])],1),t._v(" "),s("span",[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"预计结束时间",placement:"bottom-start"}},[s("span",[t._v(t._s(t.j2time(e.plan_end_timestamp)))])])],1)])]),t._v(" "),s("div",{staticClass:"text-Lens-link m-t-10"},t._l(e.tache_info,function(e){return""!==e.finish_degree?s("el-tag",{key:e.id,staticClass:"m-l-5",attrs:{type:e.finish_degree<100?"warning":"success"}},[t._v("\n                  "+t._s(e.tache_byname)+"："+t._s(e.finish_degree)+"%\n                ")]):t._e()}))])],1)])}),t._v(" "),t.finishList.length?s("div",{staticClass:"pos-rel p-t-20"},[s("div",{staticClass:"block tx-r"},[s("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":10,layout:"prev, pager, next, jumper",total:t.finishDataCount},on:{"current-change":t.finishCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)]):t._e()],2):t._e()],1),t._v(" "),s("transition",{attrs:{name:"el-zoom-in-top"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShotDetailShow,expression:"isShotDetailShow"}],staticClass:"shot_detail fr"},[s("el-card",[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("镜头详情")]),t._v(" "),t.editShow?s("i",{staticClass:"el-icon-edit m-l-5 fz-14 c-light-gray pointer",on:{click:t.editShot}}):t._e(),t._v(" "),t.deleteShow?s("i",{staticClass:"el-icon-delete m-l-5 fz-14 c-light-gray pointer",on:{click:t.deleteShot}}):t._e(),t._v(" "),s("i",{staticClass:"el-icon-close fr pointer",on:{click:function(e){t.isShotDetailShow=!t.isShotDetailShow}}})]),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("镜头缩略图："),s("img",{staticClass:"vtcal-mid h-40",attrs:{src:t.address+t.editShotDetail.shot_image,alt:""}})])])],1),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("镜头简称："),s("span",[t._v(t._s(t.editShotDetail.shot_byname))])])]),t._v(" "),s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("所属项目："),s("span",[t._v(t._s(t.editShotDetail.project_name))])])])],1),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("镜头编号："),s("span",[t._v(t._s(t.editShotDetail.shot_number))])])]),t._v(" "),s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("镜头名称："),s("span",[t._v(t._s(t.editShotDetail.shot_name))])])])],1),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("p",{staticClass:"m-0"},[t._v("计划开始时间："),s("span",[t._v(t._s(t.j2time(t.editShotDetail.plan_start_timestamp)))])])])],1),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("p",{staticClass:"m-0"},[t._v("计划结束时间："),s("span",[t._v(t._s(t.j2time(t.editShotDetail.plan_end_timestamp)))])])])],1),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("资产："),s("span",[t._v("没写")])])]),t._v(" "),s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("场号/集号："),s("span",[t._v(t._s(t.editShotDetail.field_name))])])])],1),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("镜头优先级："),s("span",[t._v(t._s(t.editShotDetail.priority_level_name))])])]),t._v(" "),s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("镜头难度："),s("span",[t._v(t._s(t.editShotDetail.difficulty_name))])])])],1),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("时刻："),s("span",[t._v(t._s(t.editShotDetail.time_name))])])]),t._v(" "),s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("环境："),s("span",[t._v(t._s(t.editShotDetail.ambient_name))])])])],1),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("p",{staticClass:"m-0"},[t._v("\n                环节所属工作室：\n                "),t._l(t.editShotDetail.tache_info,function(e,a){return s("span",{key:a,staticClass:"tache_studio dp-b"},[t.deleteShowTache?s("i",{staticClass:"el-icon-close m-l-5 c-light-gray pointer",on:{click:function(e){t.deleteTache(a)}}}):t._e(),t._v(" "),s("span",[t._v(t._s(a)+"：")]),t._v(" "),t._l(e,function(e){return s("el-tag",{key:e.id,attrs:{size:"mini",closable:t.deleteShowTacheStudio,type:"info"},on:{close:function(s){t.deleteTacheStudio(a,e)}}},[t._v("\n                    "+t._s(e.name)+"\n                  ")])})],2)})],2)])],1),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("帧长范围："),s("span",[t._v(t._s(t.editShotDetail.frame_range))])])]),t._v(" "),s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("手柄帧："),s("span",[t._v(t._s(t.editShotDetail.handle_frame))])])])],1),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("剪辑帧长："),s("span",[t._v(t._s(t.editShotDetail.clip_frame_length))])])]),t._v(" "),s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("素材帧长："),s("span",[t._v(t._s(t.editShotDetail.material_frame_length))])])])],1),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("素材号："),s("span",[t._v(t._s(t.editShotDetail.material_number))])])]),t._v(" "),s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("二级公司："),s("span",[t._v(t._s(t.editShotDetail.second_company))])])])],1),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("镜头备注："),s("span",[t._v(t._s(t.editShotDetail.shot_explain))])])]),t._v(" "),s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("变速信息："),s("span",[t._v(t._s(t.editShotDetail.change_speed_info))])])])],1),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("p",{staticClass:"m-0"},[t._v("制作要求："),s("span",[t._v(t._s(t.editShotDetail.make_demand))])])])],1)],1)],1)])],1),t._v(" "),s("editShots",{ref:"editShots",attrs:{message:t.editShotDetail},on:{updataShotDetail:t.shotDetail}})],1)},staticRenderFns:[]};var c=s("VU/8")(l,r,!1,function(t){s("bw9o")},null,null);e.a=c.exports},YaEn:function(t,e,s){"use strict";(function(t){var a=s("Xxa5"),i=s.n(a),n=s("//Fk"),o=s.n(n),l=s("exGp"),r=s.n(l),c=s("7+uW"),u=s("/ocq"),d=s("YtJ0"),m=s("Y81h"),p=s.n(m),f=s("UVIz"),h=(s.n(f),s("A6Iy")),_=s("RRJN"),v=s.n(_),g=s("vgQg"),b=s("sHg/"),k=s("fCt4"),C=s("BnN7"),w=s("lO7g"),y=s("ool0"),x=s("Rt+w"),S=s("3ySv"),L=s("DvRW"),j=s("F8bF"),R=s("Rygh"),O=s("nMI2"),$=s("Cp3V"),T=s("COJy"),D=s("nhUd"),M=s("AsvG"),E=s("ojay"),A=s("+nxH"),I=s("fq1C"),G=s("6B9u"),P=s("NWcU"),F=s("AHgQ"),q=s("EBnW"),N=s("4Y+W"),H=s("vOtP"),U=s("SfG0"),z=s("9IJY"),V=s("IXjK"),B=s("yPjj"),Y=s("Tx+H"),W=s("c2wi"),K=s("5iJw"),J=s("tXe5"),X=(s("AMsI"),s("WRpJ")),Q=this;c.default.use(u.a);var Z,tt=[{path:"/",component:k.a,name:"Login"},{path:"/admin",component:w.a,children:[{path:"/refresh",component:C.a,name:"refresh"}]},{path:"/admin",component:w.a,children:[{path:"menu/list",component:y.a,name:"menuList",meta:{hideLeft:!1,module:"Admin",menu:"menu"}},{path:"menu/add",component:x.a,name:"menuAdd",meta:{hideLeft:!1,module:"Admin",menu:"menu"}},{path:"menu/edit/:id",component:S.a,name:"menuEdit",meta:{hideLeft:!1,module:"Admin",menu:"menu"}}]},{path:"/admin",component:w.a,children:[{path:"config/add",component:L.a,name:"systemConfig",meta:{hideLeft:!1,module:"Admin",menu:"systemConfig"}}]},{path:"/admin",component:w.a,children:[{path:"rule/list",component:j.a,name:"ruleList",meta:{hideLeft:!1,module:"Admin",menu:"rule"}},{path:"rule/add",component:R.a,name:"ruleAdd",meta:{hideLeft:!1,module:"Admin",menu:"rule"}},{path:"rule/edit/:id",component:O.a,name:"ruleEdit",meta:{hideLeft:!1,module:"Admin",menu:"rule"}}]},{path:"/admin",component:w.a,children:[{path:"groups/list",component:$.a,name:"groupsList",meta:{hideLeft:!1,module:"Admin",menu:"groups"}},{path:"groups/add",component:T.a,name:"groupsAdd",meta:{hideLeft:!1,module:"Admin",menu:"groups"}},{path:"groups/edit/:id",component:D.a,name:"groupsEdit",meta:{hideLeft:!1,module:"Admin",menu:"groups"}}]},{path:"/admin",component:w.a,children:[{path:"users/list",component:M.a,name:"usersList",meta:{hideLeft:!1,module:"Admin",menu:"users"}},{path:"users/add",component:E.a,name:"usersAdd",meta:{hideLeft:!1,module:"Admin",menu:"users"}},{path:"users/edit/:id",component:A.a,name:"usersEdit",meta:{hideLeft:!1,module:"Admin",menu:"users"}}]},{path:"/busi",component:w.a,children:[{path:"mail/list",component:I.a,name:"mailList",meta:{hideLeft:!1,module:"Busi",menu:"mail"}},{path:"mail/add",component:G.a,name:"mailAdd",meta:{hideLeft:!1,module:"Busi",menu:"mail"}},{path:"mail/edit/:id",component:P.a,name:"mailEdit",meta:{hideLeft:!1,module:"Busi",menu:"mail"}}]},{path:"/admin",component:w.a,children:[{path:"studios/list",component:F.a,name:"studiosList",meta:{hideLeft:!1,module:"Admin",menu:"studios"}},{path:"studios/add",component:q.a,name:"studiosAdd",meta:{hideLeft:!1,module:"Admin",menu:"studios"}},{path:"studios/edit/:id",component:N.a,name:"studiosEdit",meta:{hideLeft:!1,module:"Admin",menu:"studios"}}]},{path:"/admin",component:w.a,children:[{path:"taches/list",component:H.a,name:"tachesList",meta:{hideLeft:!1,module:"Admin",menu:"taches"}},{path:"taches/add",component:U.a,name:"tachesAdd",meta:{hideLeft:!1,module:"Admin",menu:"taches"}},{path:"taches/edit/:id",component:z.a,name:"tachesEdit",meta:{hideLeft:!1,module:"Admin",menu:"taches"}}]},{path:"/admin",component:w.a,children:[{path:"projects/list",component:V.a,name:"projectsList",meta:{hideLeft:!1,module:"Admin",menu:"projects"}},{path:"projects/add",component:B.a,name:"projectsAdd",meta:{hideLeft:!1,module:"Admin",menu:"projects"}},{path:"projects/edit/:id",component:Y.a,name:"projectsEdit",meta:{hideLeft:!1,module:"Admin",menu:"projects"}}]},{path:"/admin",component:w.a,children:[{path:"workbenches/list",component:W.a,name:"workbenchesList",meta:{hideLeft:!1,module:"Admin",menu:"workbenches"}}]},{path:"/admin",component:w.a,children:[{path:"shots/list",component:K.a,name:"shotsList",meta:{hideLeft:!1,module:"Admin",menu:"shots"}},{path:"shots/add",component:J.a,name:"shotsAdd",meta:{hideLeft:!1,module:"Admin",menu:"shots"}},{path:"shots/list_detail",component:X.a,name:"shotsListDetail",meta:{hideLeft:!1,module:"Admin",menu:"shots"}}]}],et=new u.a({mode:"history",base:t,routes:tt});et.beforeEach((Z=r()(i.a.mark(function t(e,s,a){var n,l,r,c,u,m,f;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.meta.hideLeft,d.a.dispatch("showLeftMenu",n),"Login"===e.name){t.next=35;break}return v.a.get("expire"),g.a.advanceTime,Math.floor((new Date).getTime()/1e3),l=h.a.apiPost("admin/infos/index"),r=[l],c=h.a.apiPost("admin/infos/refresh"),r.push(c),t.next=12,o.a.all(r);case 12:if(!((u=t.sent).length>=1)){t.next=24;break}if(200!==u[0].code){t.next=21;break}m=u[0].data,d.a.dispatch("setMenus",m.menusList),d.a.dispatch("setRules",m.authList),d.a.dispatch("setUsers",m.userInfo),t.next=24;break;case 21:return b.a.toastMsg("warning","请重新登录"),setTimeout(function(){et.replace("/")},1500),t.abrupt("return");case 24:if(!(u.length>=2)){t.next=35;break}if(200!==u[0].code){t.next=32;break}f=u[1].data,v.a.set("authKey",f.authKey),v.a.set("expire",f.expire),t.next=35;break;case 32:return b.a.toastMsg("warning","请重新登录"),setTimeout(function(){et.replace("/")},1500),t.abrupt("return");case 35:p.a.start(),a();case 37:case"end":return t.stop()}},t,Q)})),function(t,e,s){return Z.apply(this,arguments)})),et.afterEach(function(t){p.a.done()}),e.a=et}).call(e,"/")},YtJ0:function(t,e,s){"use strict";var a=s("7+uW"),i=s("NYxO"),n={showLeftMenu:!0,globalLoading:!0,menus:[],rules:[],users:{},userGroups:[],organizes:[],pageSize:10,groups:[],studios:[],taches:[]},o={showLeftMenu:function(t,e){t.showLeftMenu=e},showLoading:function(t,e){t.globalLoading=e},setMenus:function(t,e){t.menus=e},setRules:function(t,e){t.rules=e},setUsers:function(t,e){t.users=e},setUserGroups:function(t,e){t.userGroups=e},setOrganizes:function(t,e){t.organizes=e},setGroups:function(t,e){t.groups=e},setStudios:function(t,e){t.studios=e},setTaches:function(t,e){t.taches=e}},l={},r={showLeftMenu:function(t,e){(0,t.commit)("showLeftMenu",e)},showLoading:function(t,e){(0,t.commit)("showLoading",e)},setMenus:function(t,e){(0,t.commit)("setMenus",e)},setRules:function(t,e){(0,t.commit)("setRules",e)},setUsers:function(t,e){(0,t.commit)("setUsers",e)},setUserGroups:function(t,e){(0,t.commit)("setUserGroups",e)},setOrganizes:function(t,e){(0,t.commit)("setOrganizes",e)},setGroups:function(t,e){(0,t.commit)("setGroups",e)},setStudios:function(t,e){(0,t.commit)("setStudios",e)},setTaches:function(t,e){(0,t.commit)("setTaches",e)}};a.default.use(i.a);e.a=new i.a.Store({state:n,mutations:o,getters:l,actions:r})},bMIH:function(t,e){},bw9o:function(t,e){},c2wi:function(t,e,s){"use strict";var a=s("//TE"),i=s("sHg/"),n={data:function(){return{dialogFormVisible:!1,isLoading:!1,uploadImageUrl:window.HOST+"/admin/upload_image",plan_time:[],image:"",id:0,field_id:[],options:[],form:{group_id:null,user_id:"",project_id:2,field_id:3,shot_id:null,assets_id:null,tache_id:1,tache_sort:null,studio_id:2,task_type:"",task_image:"",task_byname:"FUY",make_demand:"",shot_number:"001",task_priority_level:"A",difficulty:"S",second_company:"",task_is_status_time:"32",task_allocated_time:"9",plan_start_timestamp:"",plan_end_timestamp:"2018/02/08 14:00",actually_start_timestamp:"",actually_end_timestamp:"",finish_degree:"",task_status:1,is_pause:1,camera_model:"",camera_catch:"",camera_motion:1,camera_height:null,camera_focus:"",focus_distance:"",depth_of_field:"",pid:1,create_time:111,update_time:222},rules:{is_parse:[{required:!0,message:"请选择是否暂停"}]}}},methods:{open:function(){this.dialogFormVisible=!0},handleAvatarSuccess:function(t,e){this.image=URL.createObjectURL(e.raw),this.form.task_image=t.data},beforeAvatarUpload:function(t){var e=t.size/1024/1024<.195;return e||this.$message.error("上传图片大小不能超过 200KB!"),e},edit:function(t){var e=this;this.form.plan_start_time=i.a.j2time(this.plan_time[0]),this.form.plan_end_time=i.a.j2time(this.plan_time[1]),this.form.difficulty=this.form.difficulty?parseInt(this.form.difficulty):1,this.form.task_priority_level=this.form.task_priority_level?parseInt(this.form.task_priority_level):1,this.form.user_id=this.field_id.join(","),this.form.task_image=this.form.task_image.slice(this.form.task_image.indexOf("uploads")),this.$refs[t].validate(function(t){t&&(e.isLoading=!e.isLoading,console.log(e.form),e.apiPut("admin/workbenches/",e.id,e.form).then(function(t){e.handelResponse(t,function(t){i.a.toastMsg("success","编辑成功"),setTimeout(function(){e.dialogFormVisible=!1,e.isLoading=!e.isLoading},1500)},function(){e.isLoading=!e.isLoading})}))})}},mixins:[a.a],props:["message"],watch:{message:function(t,e){var s=this;this.apiGet("task/get_user?task_id="+t.id).then(function(t){s.handelResponse(t,function(t){s.options=t.list,console.log(t.list)})}),this.id=t.id,this.form=t,this.form.task_image=this.image=window.baseUrl+"/"+t.task_image,this.form.task_priority_level=t.task_priority_level.toString(),this.form.difficulty=t.difficulty.toString(),this.plan_time=[new Date(1e3*t.plan_start_timestamp),new Date(1e3*t.plan_end_timestamp)]}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{staticClass:"workbenches-edit",attrs:{title:"任务编辑",visible:t.dialogFormVisible,width:"75%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[s("el-form",{ref:"form",staticClass:"shot_add",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"})])],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{staticClass:"is-required",attrs:{label:"任务缩略图:",prop:"image"}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadImageUrl,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.task_image?s("img",{staticClass:"avatar",attrs:{src:t.image}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"任务简称:",prop:"task_priority_level"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.task_byname,callback:function(e){t.$set(t.form,"task_byname",e)},expression:"form.task_byname"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"制作人:",prop:"field_id"}},[s("el-select",{attrs:{multiple:"",placeholder:"请选择制作人"},model:{value:t.field_id,callback:function(e){t.field_id=e},expression:"field_id"}},t._l(t.options,function(t){return s("el-option",{key:t.id,attrs:{label:t.real_name,value:t.id}})}))],1)],1)])],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"优先级:",prop:"task_priority_level"}},[s("el-select",{staticClass:"h-40 w-200",attrs:{placeholder:"请选择优先级"},model:{value:t.form.task_priority_level,callback:function(e){t.$set(t.form,"task_priority_level",e)},expression:"form.task_priority_level"}},[s("el-option",{attrs:{label:"D",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"C",value:"2"}}),t._v(" "),s("el-option",{attrs:{label:"B",value:"3"}}),t._v(" "),s("el-option",{attrs:{label:"A",value:"4"}})],1)],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"难度:",prop:"difficulty"}},[s("el-select",{staticClass:"h-40 w-200",attrs:{placeholder:"请选择难度"},model:{value:t.form.difficulty,callback:function(e){t.$set(t.form,"difficulty",e)},expression:"form.difficulty"}},[s("el-option",{attrs:{label:"D",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"C",value:"2"}}),t._v(" "),s("el-option",{attrs:{label:"B",value:"3"}}),t._v(" "),s("el-option",{attrs:{label:"A",value:"4"}}),t._v(" "),s("el-option",{attrs:{label:"S",value:"5"}})],1)],1)],1)])],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{staticClass:"is-required",attrs:{label:"计划起止时间:",prop:"plan_time"}},[s("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.plan_time,callback:function(e){t.plan_time=e},expression:"plan_time"}})],1)],1)])],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"制作要求:",prop:"make_demand"}},[s("el-input",{staticClass:"h-40 w-200",attrs:{type:"textarea",rows:3,placeholder:"请输入制作要求"},model:{value:t.form.make_demand,callback:function(e){t.$set(t.form,"make_demand",e)},expression:"form.make_demand"}})],1)],1)])],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogFormVisible=!t.dialogFormVisible}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){t.edit("form")}}},[t._v("确 定")])],1)],1)},staticRenderFns:[]};var l=s("VU/8")(n,o,!1,function(t){s("15T8")},null,null).exports,r=(s("Nh03"),{data:function(){return{isTaskLIst:!0,isTaskDetailShow:!1,limit:40,id:0,currentPage:1,activeName:"task",address:window.baseUrl+"/",tabVale:1,screeningProject:[],screeningSite:[],screeningShot:[],search:{project_id:"",field_id:"",shot_id:"",shot_number:""},stages:["制作中","反馈中","等待制作","提交发布"],blocksDataCount:0,blocks:[],upstreamDataCountTask:0,upstreamDataCountShot:0,upstreamListTask:[],upstreamListShot:[],completeDataCount:0,completeList:[],tableList:[],tableListDataCount:0,finishList:{}}},methods:{editWorkbench:function(){this.$refs.editWorkbenches.open()},deleteTask:function(t){var e=this;this.$confirm("确认删除该镜头?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.a.openGlobalLoading(),e.apiDelete("admin/workbenches/",t).then(function(t){i.a.closeGlobalLoading(),e.handelResponse(t,function(t){i.a.toastMsg("success","删除成功"),e.init(e.activeName),e.isTaskDetailShow=!1})})}).catch(function(){})},deletetLink:function(t,e){var s=this;this.$confirm("确认删除该制作人?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.a.openGlobalLoading();var t={task_id:s.id,user_id:e.user_id};s.apiPost("task/user_del",t).then(function(t){i.a.closeGlobalLoading(),s.handelResponse(t,function(t){i.a.toastMsg("success","删除成功"),s.taskDetail(s.id)})})}).catch(function(){})},updateBlock:function(t,e){var s=this,a={id:Number(t),status:e};this.blocks.find(function(e){return e.id===Number(t)}).status=e,this.apiPost("task/change_status",a).then(function(t){s.handelResponse(t,function(t){},function(){s.isLoading=!s.isLoading,getAllWorkbenches("admin/workbenches",s.currentPage,1,40)})})},handleClick:function(t,e){this.tabVale=parseInt(t.index)+1,this.publicRequest(t.name,parseInt(t.index)+1)},publicRequest:function(t,e){switch(t){case"task":this.getAllWorkbenches("admin/workbenches",1,e,40);break;case"waiting":this.getAllWorkbenches("task/upper_shots",1,e,10);break;case"complete":this.getAllWorkbenches("task/finish_task",1,e,10)}},workList:function(){this.isTaskLIst=!1,this.getAllWorkbenches("task/index_list",1,11,10)},j2time:function(t){return(t=new Date(1e3*t)).getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},shotRemainDay:function(t){return Math.ceil((t-new Date/1e3)/86400)},shotCreateTime:function(t){return Math.ceil((new Date/1e3-t)/86400)},taskCurrentChange:function(t){this.getAllWorkbenches("admin/workbenches",t,1,40)},upstreamShotCurrentChange:function(t){this.getAllWorkbenches("task/upper_shots",t,2,10)},upstreamTaskCurrentChange:function(t){},completeCurrentChange:function(t){this.getAllWorkbenches("task/finish_task",t,3,10)},tableListCurrentChange:function(t){this.getAllWorkbenches("task/index_list",t,11,10)},getAllWorkbenches:function(t,e,s,a){var i=this;this.loading=!0;var n={params:{keywords:this.search,page:e,limit:a}};this.apiGet(t,n).then(function(t){i.handelResponse(t,function(t){switch(s){case 1:i.blocks=t.list,_(i.blocks).forEach(function(t,e){i.blocks[e].status=1==t.task_status?"等待制作":5==t.task_status?"制作中":15==t.task_status?"反馈中":"提交发布"}),i.blocksDataCount=t.dataCount;break;case 2:i.upstreamListShot=t.list,i.upstreamDataCountShot=t.dataCount;break;case 3:i.completeList=t.list,i.completeDataCount=t.dataCount;break;case 11:i.tableList=t.list,i.tableListDataCount=t.dataCount}})})},getsprojects:function(){var t=this;this.apiGet("admin/projects").then(function(e){t.handelResponse(e,function(e){t.screeningProject=e.list})})},screenChange:function(t){var e=this;switch(t){case 1:this.search.field_id="",this.search.shot_id="";var s={params:{project_id:this.search.project_id}};this.apiGet("admin/get_fields",s).then(function(t){e.handelResponse(t,function(t){e.screeningSite=t})});break;case 2:this.search.shot_id="";var a={params:{field_id:this.search.field_id}};this.apiGet("admin/get_shot_num",a).then(function(t){e.handelResponse(t,function(t){e.screeningShot=t})})}this.publicRequest(this.activeName,this.tabVale),this.getAllWorkbenches("task/index_list",1,11,10)},searchPublic:function(){6===this.search.shot_number.length&&(this.search.project_id="",this.search.field_id="",this.search.shot_id="",this.publicRequest(this.activeName,this.tabVale),this.getAllWorkbenches("task/index_list",1,11,10)),this.search.field_id||3!==this.search.shot_number.length?(this.search.shot_id="",this.publicRequest(this.activeName,this.tabVale),this.getAllWorkbenches("task/index_list",1,11,10)):i.a.toastMsg("warning","请选择所属项目及场号")},taskDetail:function(t){var e=this;/^[0-9]*$/.test(t)||(t=t.id),this.id=t,this.apiGet("admin/workbenches/"+t).then(function(t){e.handelResponse(t,function(t){e.finishList=t})}),this.isTaskDetailShow||(this.isTaskDetailShow=!this.isTaskDetailShow)},init:function(){this.getAllWorkbenches("admin/workbenches",1,1,40),this.getsprojects()}},created:function(){this.init()},components:{editWorkbenches:l},mixins:[a.a],computed:{kanbanShow:function(){return i.a.getHasRule("workbenches-index")},listShow:function(){return i.a.getHasRule("workbenches-index_list")},editShow:function(){return i.a.getHasRule("workbenches-update")},deleteShow:function(){return i.a.getHasRule("workbenches-delete")},deleteTaskTacheStudio:function(){return i.a.getHasRule("workbenches-delete_userid")},assetShow:function(){return i.a.getHasRule("workbenches-wait_upper_assets")},shotShow:function(){return i.a.getHasRule("workbenches-wait_upper_shots")},finishShow:function(){return i.a.getHasRule("workbenches-finish_list")}}}),c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"workbench_list"},[s("div",{staticClass:"m-b-20"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:"/admin/workbenches/list"}}},[t._v("工作台管理")]),t._v(" "),s("el-breadcrumb-item",[t._v("工作台")])],1)],1),t._v(" "),s("div",{staticClass:"m-b-20 ovf-hd"},[s("div",{staticClass:"fl w-700"},[[s("el-select",{staticClass:"w-150",attrs:{placeholder:"请选择项目"},on:{change:function(e){t.screenChange(1)}},model:{value:t.search.project_id,callback:function(e){t.$set(t.search,"project_id",e)},expression:"search.project_id"}},t._l(t.screeningProject,function(t){return s("el-option",{key:t.id,attrs:{label:t.project_name,value:t.id}})})),t._v(" "),s("el-select",{staticClass:"w-150",staticStyle:{"margin-left":"10px"},attrs:{placeholder:"请选择场号"},on:{change:function(e){t.screenChange(2)}},model:{value:t.search.field_id,callback:function(e){t.$set(t.search,"field_id",e)},expression:"search.field_id"}},t._l(t.screeningSite,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),s("el-select",{staticClass:"w-150",staticStyle:{"margin-left":"10px"},attrs:{placeholder:"请选择镜头号"},on:{change:function(e){t.screenChange()}},model:{value:t.search.shot_id,callback:function(e){t.$set(t.search,"shot_id",e)},expression:"search.shot_id"}},t._l(t.screeningShot,function(t){return s("el-option",{key:t.id,attrs:{label:t.shot_number,value:t.id}})})),t._v(" "),s("el-input",{staticClass:"w-200",staticStyle:{"margin-left":"10px"},attrs:{placeholder:"请输入场号镜头号"},model:{value:t.search.shot_number,callback:function(e){t.$set(t.search,"shot_number","string"==typeof e?e.trim():e)},expression:"search.shot_number"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search",circle:""},on:{click:t.searchPublic},slot:"append"})],1)]],2),t._v(" "),s("div",{staticClass:"tx-r"},[t.kanbanShow?s("el-tooltip",{attrs:{effect:"dark",content:"工作台进度",placement:"bottom-start"}},[s("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){t.isTaskLIst=!0}}},[s("i",{staticClass:"el-icon-menu"})])],1):t._e(),t._v(" "),t.listShow?s("el-tooltip",{attrs:{effect:"dark",content:"工作台列表",placement:"bottom-start"}},[s("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){t.workList()}}},[s("i",{staticClass:"el-icon-document"})])],1):t._e()],1)]),t._v(" "),s("div",{staticClass:"m-b-20 ovf-hd"},[t.isTaskLIst?s("el-tabs",{staticClass:"fl",on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"任务",name:"task"}},[s("kanban-board",{attrs:{stages:t.stages,blocks:t.blocks},on:{"update-block":t.updateBlock}},t._l(t.blocks,function(e){return s("el-card",{key:e.id,staticClass:"box-card point",attrs:{slot:e.id},slot:e.id},[s("div"),t._v(" "),s("div",[s("el-card",{staticClass:"work-box box-card box-texts"},[s("div",{staticClass:"text",on:{click:function(s){t.taskDetail(e.id)}}},[s("div",{staticClass:"text-Lens pos-rel"},[s("p",{staticClass:"text-Lens-name"},[t._v(t._s(e.project_name)+"："),s("span",[t._v(t._s(e.shot_number)+":"+t._s(e.task_byname))])]),t._v(" "),s("p",{staticClass:"text-Lens-rank pos-abs"},[""!=e.difficulty?s("el-tag",{attrs:{type:"danger"}},[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"难度",placement:"bottom-start"}},[s("span",[t._v(t._s(e.difficulty))])])],1):t._e(),t._v(" "),""!=e.task_priority_level?s("el-tag",{attrs:{type:"warning"}},[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"优先级",placement:"bottom-start"}},[s("span",[t._v(t._s(e.task_priority_level))])])],1):t._e()],1)]),t._v(" "),s("div",{staticClass:"text-Lens m-t-10"},[s("p",{staticClass:"task-Lens-assets text-p"},[e.id>0?s("el-tag",{attrs:{type:"info"}},[t._v("37次")]):t._e()],1),t._v(" "),s("p",{staticClass:"text-Lens-time tx-r"},[s("span",[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"任务剩余天数",placement:"bottom-start"}},[s("span",[t._v(t._s(t.shotRemainDay(e.plan_end_timestamp))+"天")])]),t._v(" "),s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"任务在次状态时间",placement:"bottom-start"}},[s("span",[t._v(t._s(t.shotCreateTime(e.create_timestamp))+"天")])]),t._v(" "),s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"任务分配时间",placement:"bottom-start"}},[s("span",[t._v(t._s(e.task_allot_days))])])],1),t._v(" "),s("span",[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"预计结束时间",placement:"bottom-start"}},[s("span",[t._v(t._s(t.j2time(e.plan_end_timestamp)))])])],1)])]),t._v(" "),s("div",{staticClass:"text-Lens-link m-t-10"},[s("el-tag",{attrs:{type:"warn"}},[t._v("资产")]),t._v(" "),e.task_finish_degree.finish_degree<100?s("el-tag",{attrs:{type:"danger"}},[t._v(t._s(e.task_finish_degree.tache_byname)+":"+t._s(e.task_finish_degree.finish_degree)+"%")]):s("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.task_finish_degree.tache_byname)+":"+t._s(e.task_finish_degree.finish_degree)+"%")])],1)])])],1)])})),t._v(" "),s("div",{staticClass:"block task-block"},[s("el-pagination",{attrs:{layout:"prev, pager, next, jumper","page-size":t.limit,"current-page":t.currentPage,total:t.blocksDataCount},on:{"current-change":t.taskCurrentChange}})],1)],1),t._v(" "),t.assetShow||t.shotShow?s("el-tab-pane",{attrs:{label:"等待上游",name:"waiting"}},[s("div",{staticClass:"waiting ovf-hd"},[t.assetShow?s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-purple"},[s("h2",{staticClass:"m-0 h-40 tx-c c-white"},[t._v("资产")]),t._v(" "),s("ul",{staticClass:"p-l-0 m-0"},t._l(t.upstreamListTask,function(e){return s("li",{key:e.id,staticClass:"text",on:{click:function(e){t.isTaskDetailShow=!t.isTaskDetailShow}}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"text item"},[s("div",{staticClass:"text-Lens pos-rel"},[s("p",{staticClass:"text-Lens-name"},[t._v(t._s(e.project_name)+"："),s("span",[t._v(t._s(e.shot_number)+":"+t._s(e.task_byname))])]),t._v(" "),s("p",{staticClass:"text-Lens-rank pos-abs"},[""!=e.difficulty?s("el-tag",{attrs:{type:"danger"}},[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"难度",placement:"bottom-start"}},[s("span",[t._v(t._s(e.difficulty))])])],1):t._e(),t._v(" "),""!=e.task_priority_level?s("el-tag",{attrs:{type:"warning"}},[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"优先级",placement:"bottom-start"}},[s("span",[t._v(t._s(e.task_priority_level))])])],1):t._e()],1)]),t._v(" "),s("div",{staticClass:"text-Lens m-t-10 task-reaches"},[s("p",{staticClass:"text-Lens-time tx-r task-r"},[s("span",[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"任务剩余天数",placement:"bottom-start"}},[s("span",[t._v(t._s(e.surplus_days))])]),t._v(" "),s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"任务在此状态时间",placement:"bottom-start"}},[s("span",[t._v("无")])]),t._v(" "),s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"任务分配时间",placement:"bottom-start"}},[s("span",[t._v(t._s(e.task_allot_days))])])],1)]),t._v(" "),s("p",[s("span",[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"预计结束时间",placement:"bottom-start"}},[s("span",[t._v(t._s(t.j2time(e.plan_end_timestamp)))])])],1)])]),t._v(" "),s("div",{staticClass:"text-Lens-link m-t-10"},[s("el-tag",{attrs:{type:"warn"}},[t._v("动画: 60%")]),t._v(" "),s("el-tag",{attrs:{type:"danger"}},[t._v("合成: 0%")])],1)])])],1)})),t._v(" "),s("div",{staticClass:"pos-rel p-t-20"},[s("div",{staticClass:"block pages"},[s("el-pagination",{attrs:{layout:"prev, pager, next, jumper","page-size":20,"current-page":t.currentPage,total:t.upstreamDataCountTask},on:{"current-change":t.upstreamTaskCurrentChange}})],1)])])]):t._e(),t._v(" "),t.shotShow?s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("h2",{staticClass:"m-0 h-40 tx-c c-white",staticStyle:{background:"yellowgreen"}},[t._v("镜头")]),t._v(" "),s("ul",{staticClass:"p-l-0 m-0"},t._l(t.upstreamListShot,function(e){return s("li",{key:e.id,staticClass:"text",on:{click:function(e){t.isTaskDetailShow=!t.isTaskDetailShow}}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"text item"},[s("div",{staticClass:"text-Lens pos-rel"},[s("p",{staticClass:"text-Lens-name"},[t._v(t._s(e.project_name)+"："),s("span",[t._v(t._s(e.shot_number)+":"+t._s(e.task_byname))])]),t._v(" "),s("p",{staticClass:"text-Lens-rank pos-abs"},[""!=e.difficulty?s("el-tag",{attrs:{type:"danger"}},[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"难度",placement:"bottom-start"}},[s("span",[t._v(t._s(e.difficulty))])])],1):t._e(),t._v(" "),""!=e.task_priority_level?s("el-tag",{attrs:{type:"warning"}},[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"优先级",placement:"bottom-start"}},[s("span",[t._v(t._s(e.task_priority_level))])])],1):t._e()],1)]),t._v(" "),s("div",{staticClass:"text-Lens m-t-10 task-reaches"},[s("p",{staticClass:"text-Lens-time tx-r task-r"},[s("span",[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"任务剩余天数",placement:"bottom-start"}},[s("span",[t._v(t._s(e.surplus_days))])]),t._v(" "),s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"任务在此状态时间",placement:"bottom-start"}},[s("span",[t._v(t._s(t.shotCreateTime(e.create_timestamp))+"天")])]),t._v(" "),s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"任务分配时间",placement:"bottom-start"}},[s("span",[t._v(t._s(e.task_allot_days))])])],1)]),t._v(" "),s("p",[s("span",[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"预计结束时间",placement:"bottom-start"}},[s("span",[t._v(t._s(t.j2time(e.plan_end_timestamp)))])])],1)])]),t._v(" "),s("div",{staticClass:"text-Lens-link m-t-10"},[s("el-tag",{attrs:{type:"warn"}},[t._v("动画: 60%")]),t._v(" "),s("el-tag",{attrs:{type:"danger"}},[t._v("合成: 0%")])],1)])])],1)})),t._v(" "),s("div",{staticClass:"block task-block"},[s("el-pagination",{attrs:{layout:"prev, pager, next, jumper","page-size":10,"current-page":t.currentPage,total:t.upstreamDataCountShot},on:{"current-change":t.upstreamShotCurrentChange}})],1)])]):t._e()],1)]):t._e(),t._v(" "),t.finishShow?s("el-tab-pane",{attrs:{label:"完成",name:"complete"}},[s("div",{staticClass:"waiting ovf-hd"},t._l(t.completeList,function(e){return s("el-col",{key:e.id,attrs:{span:6}},[s("div",{staticClass:"grid-content bg-purple p-b-5",on:{click:function(s){t.taskDetail(e.id)}}},[s("el-card",{staticClass:"box-card "},[s("div",{staticClass:"text"},[s("div",{staticClass:"text-Lens pos-rel"},[s("p",{staticClass:"text-Lens-name"},[t._v(t._s(e.project_name)+"："),s("span",[t._v(t._s(e.shot_number)+":"+t._s(e.task_byname))])]),t._v(" "),s("p",{staticClass:"text-Lens-rank pos-abs"},[""!=e.difficulty?s("el-tag",{attrs:{type:"danger"}},[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"难度",placement:"bottom-start"}},[s("span",[t._v(t._s(e.difficulty))])])],1):t._e(),t._v(" "),""!=e.task_priority_level?s("el-tag",{attrs:{type:"warning"}},[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"优先级",placement:"bottom-start"}},[s("span",[t._v(t._s(e.task_priority_level))])])],1):t._e()],1)]),t._v(" "),s("div",{staticClass:"text-Lens text-wan  m-t-10"},[s("p",{staticClass:"text-Lens-time tx-r"},[s("span",[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"任务剩余天数",placement:"bottom-start"}},[s("span",[t._v(t._s(e.surplus_days))])]),t._v(" "),s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"任务再次状态时间",placement:"bottom-start"}},[s("span",[t._v("无")])]),t._v(" "),s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"任务分配时间",placement:"bottom-start"}},[s("span",[t._v(t._s(e.task_allot_days))])])],1)]),t._v(" "),s("p",{staticClass:"text-Lens-time tx-r"},[s("span",[s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"实际结束时间",placement:"bottom-start"}},[s("span",[t._v(t._s(t.j2time(e.actually_start_timestamp)))])]),t._v(" "),s("el-tooltip",{staticClass:"m-r-5 pointer",attrs:{effect:"dark",content:"预计结束时间",placement:"bottom-start"}},[s("span",[t._v(t._s(t.j2time(e.plan_end_timestamp)))])])],1)])]),t._v(" "),s("div",{staticClass:"text-Lens-link m-t-10"},[s("el-tag",{attrs:{type:"success"}},[t._v("已完成")])],1)])])],1)])})),t._v(" "),s("div",{staticClass:"block task-block"},[s("el-pagination",{attrs:{layout:"prev, pager, next, jumper","page-size":20,"current-page":t.currentPage,total:t.completeDataCount},on:{"current-change":t.completeCurrentChange}})],1)]):t._e()],1):t._e(),t._v(" "),t.isTaskLIst?t._e():s("div",[s("el-table",{attrs:{data:t.tableList,stripe:""},on:{"row-click":t.taskDetail}},[s("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{prop:"project_name",label:"项目"}}),t._v(" "),s("el-table-column",{attrs:{prop:"field_number",label:"场号"}}),t._v(" "),s("el-table-column",{attrs:{prop:"shot_number",label:"镜头号"}}),t._v(" "),s("el-table-column",{attrs:{prop:"difficulty",label:"难度"}}),t._v(" "),s("el-table-column",{attrs:{prop:"task_priority_level",label:"优先级"}}),t._v(" "),s("el-table-column",{attrs:{prop:"status_cn",label:"进度"}}),t._v(" "),s("el-table-column",{attrs:{prop:"plan_start_time",label:"计划开始"}}),t._v(" "),s("el-table-column",{attrs:{prop:"plan_end_time",label:"计划结束"}}),t._v(" "),s("el-table-column",{attrs:{prop:"actually_start_timestamp",label:"实际开始"}}),t._v(" "),s("el-table-column",{attrs:{prop:"actually_end_timestamp",label:"实际结束"}}),t._v(" "),s("el-table-column",{attrs:{prop:"user_name",label:"制作人"}})],1),t._v(" "),s("div",{staticClass:"pos-rel p-t-20"},[s("div",{staticClass:"block tx-r"},[s("el-pagination",{attrs:{layout:"prev, pager, next, jumper","page-size":10,"current-page":t.currentPage,total:t.tableListDataCount},on:{"current-change":t.tableListCurrentChange}})],1)])],1),t._v(" "),s("transition",{attrs:{name:"el-zoom-in-top"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isTaskDetailShow,expression:"isTaskDetailShow"}],staticClass:"task_detail fr"},[s("el-card",{staticClass:"box-card task-xing"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("任务详情")]),t._v(" "),t.editShow?s("i",{staticClass:"el-icon-edit m-l-5 fz-14 c-light-gray pointer",on:{click:t.editWorkbench}}):t._e(),t._v(" "),t.deleteShow?s("i",{staticClass:"el-icon-delete m-l-5 fz-14 c-light-gray pointer",on:{click:function(e){t.deleteTask(t.finishList.id)}}}):t._e(),t._v(" "),s("i",{staticClass:"el-icon-close fr pointer",on:{click:function(e){t.isTaskDetailShow=!t.isTaskDetailShow}}})]),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("任务缩略图："),s("img",{staticClass:"vtcal-mid h-40",attrs:{src:t.finishList.task_image,alt:""}})])])],1),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("任务简称："),s("span",[t._v(t._s(t.finishList.task_byname))])])])],1),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("任务优先级："),s("span",[t._v(t._s(t.finishList.task_priority_level_name))])])]),t._v(" "),s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("任务难度："),s("span",[t._v(t._s(t.finishList.difficulty_name))])])])],1),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("p",{staticClass:"m-0"},[t._v("任务计划开始时间："),s("span",[t._v(t._s(t.finishList.plan_start_time))])])])],1),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("p",{staticClass:"m-0"},[t._v("任务计划结束时间："),s("span",[t._v(t._s(t.finishList.plan_end_time))])])])],1),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("p",{staticClass:"m-0"},[t._v("\n                环节制作人：\n                "),t._v(" "),t._l(t.finishList.user_data,function(e,a){return s("el-tag",{key:e.id,attrs:{size:"mini",closable:t.deleteTaskTacheStudio,type:"info"},on:{close:function(s){t.deletetLink(a,e)}}},[t._v("\n                     "+t._s(e.realname)+"\n                  ")])})],2)])],1),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("p",{staticClass:"m-0"},[t._v("任务制作要求："),s("span",[t._v(t._s(t.finishList.make_demand))])])])],1),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("所属项目："),s("span",[t._v(t._s(t.finishList.project_name))])])]),t._v(" "),s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("镜头名称："),s("span",[t._v(t._s(t.finishList.shot_name))])])])],1),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("镜头简称："),s("span",[t._v(t._s(t.finishList.shot_byname))])])]),t._v(" "),s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("场号/集号："),s("span",[t._v(t._s(t.finishList.field_number))])])])],1),t._v(" "),s("el-row",{staticClass:"m-b-5",attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0"},[t._v("镜头编号："),s("span",[t._v(t._s(t.finishList.shot_number))])])])],1)],1)],1)])],1),t._v(" "),s("editWorkbenches",{ref:"editWorkbenches",attrs:{message:t.finishList}})],1)},staticRenderFns:[]};var u=s("VU/8")(r,c,!1,function(t){s("6tw6")},null,null);e.a=u.exports},fCt4:function(t,e,s){"use strict";var a=s("//TE"),i=s("PJh5"),n=s.n(i),o=s("RRJN"),l=s.n(o),r=s("lbHh"),c=s.n(r),u=s("sHg/"),d=s("vgQg"),m={data:function(){return{title:"",systemName:"",loading:!1,form:{username:"",password:"",verifyCode:""},requireVerify:!1,verifyUrl:"",verifyImg:d.a.HOST+"/admin/base/getVerify",rules2:{username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],verifyCode:[{required:!1,message:"请输入验证码",trigger:"blur"}]},checked:!1}},methods:{refreshVerify:function(){var t=this;this.verifyUrl="",setTimeout(function(){t.verifyUrl=t.verifyImg+"?v="+n()().unix()},300)},handleSubmit2:function(t){var e=this;this.loading||this.$refs.form.validate(function(t){if(!t)return!1;e.loading=!e.loading;var s={};e.requireVerify?(s.username=e.form.username,s.password=e.form.password,s.verifyCode=e.form.verifyCode):(s.username=e.form.username,s.password=e.form.password),e.checked?s.isRemember=1:s.isRemember=0,e.apiPost("admin/base/login",s).then(function(t){200!=t.code?(e.loading=!e.loading,e.handleError(t)):(e.refreshVerify(),e.checked&&c.a.set("rememberPwd",!0,{expires:1}),e.resetCommonData(t.data),u.a.toastMsg("success","登录成功"))})})},checkIsRememberPwd:function(){var t=this;if(c.a.get("rememberPwd")){var e={rememberKey:l.a.get("rememberKey")};this.apiPost("admin/base/relogin",e).then(function(e){t.handelResponse(e,function(e){t.resetCommonData(e)})})}}},created:function(){var t=this;this.checkIsRememberPwd(),this.apiPost("admin/base/getConfigs").then(function(e){t.handelResponse(e,function(e){document.title=e.SYSTEM_NAME,t.systemName=e.SYSTEM_NAME,parseInt(e.IDENTIFYING_CODE)&&(t.requireVerify=!0,t.rules2.verifyCode[0].required=!0)})}),this.verifyUrl=this.verifyImg},mounted:function(){var t=this;window.addEventListener("keyup",function(e){13===e.keyCode&&t.handleSubmit2("form")})},mixins:[a.a]},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-form",{ref:"form",staticClass:"demo-ruleForm card-box loginform",attrs:{model:t.form,rules:t.rules2,"label-position":"left","label-width":"0px"}},[s("h3",{staticClass:"title"},[t._v(t._s(t.systemName))]),t._v(" "),s("el-form-item",{attrs:{prop:"username"}},[s("el-input",{attrs:{type:"text",placeholder:"账号"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.requireVerify,expression:"requireVerify"}],attrs:{prop:"verifyCode"}},[s("el-input",{staticClass:"w-150",attrs:{type:"text","auto-complete":"off",placeholder:"验证码"},model:{value:t.form.verifyCode,callback:function(e){t.$set(t.form,"verifyCode",e)},expression:"form.verifyCode"}}),t._v(" "),s("img",{staticClass:"verify-pos",attrs:{src:t.verifyUrl},on:{click:function(e){t.refreshVerify()}}})],1),t._v(" "),s("el-form-item",{staticStyle:{width:"100%"}},[s("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{type:"primary"},nativeOn:{click:function(e){e.preventDefault(),t.handleSubmit2("form")}}},[t._v("登录")])],1)],1)],1)},staticRenderFns:[]};var f=s("VU/8")(m,p,!1,function(t){s("pY9x")},null,null);e.a=f.exports},fq1C:function(t,e,s){"use strict";var a=s("Nh03"),i=s("//TE"),n=s("sHg/"),o={data:function(){return{tableData:[],multipleSelection:[]}},methods:{selectItem:function(t){this.multipleSelection=t},confirmDelete:function(t){var e=this;this.$confirm("确认删除该岗位?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.a.openGlobalLoading(),e.apiDelete("admin/posts/",t.id).then(function(t){n.a.closeGlobalLoading(),e.handelResponse(t,function(t){n.a.toastMsg("success","删除成功"),setTimeout(function(){n.a.shallowRefresh(e.$route.name)},1500)})})}).catch(function(){})},getPositions:function(){var t=this;this.apiGet("admin/posts").then(function(e){t.handelResponse(e,function(e){t.tableData=e})})}},created:function(){this.getPositions()},computed:{addShow:function(){return n.a.getHasRule("posts-save")},editShow:function(){return n.a.getHasRule("posts-update")},deleteShow:function(){return n.a.getHasRule("posts-delete")}},components:{btnGroup:a.a},mixins:[i.a]},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.addShow?s("div",{staticClass:"m-b-20"},[s("router-link",{staticClass:"btn-link-large add-btn",attrs:{to:"add"}},[s("i",{staticClass:"el-icon-plus"}),t._v("  写邮件\n\t\t\t")])],1):t._e(),t._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"selection-change":t.selectItem}},[s("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{label:"岗位名称",prop:"name"}}),t._v(" "),s("el-table-column",{attrs:{label:"备注",prop:"remark"}}),t._v(" "),s("el-table-column",{attrs:{label:"状态",prop:"status",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t._v("\n            "+t._s(t._f("status")(e.row.status))+"\n          ")])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t.editShow?s("span",[s("router-link",{attrs:{to:{name:"mailEdit",params:{id:e.row.id}}}},[s("el-button",{attrs:{size:"small",type:"primary"}},[t._v("\n                回复\n                ")])],1)],1):t._e(),t._v(" "),t.deleteShow?s("span",[s("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(s){t.confirmDelete(e.row)}}},[t._v("\n  \t\t\t\t\t\t删除\n  \t\t\t\t\t\t")])],1):t._e()])]}}])})],1),t._v(" "),s("div",{staticClass:"pos-rel p-t-20"},[s("btnGroup",{attrs:{selectedData:t.multipleSelection,type:"mail"}})],1)],1)},staticRenderFns:[]},r=s("VU/8")(o,l,!1,null,null,null);e.a=r.exports},fyYl:function(t,e){},i1Dn:function(t,e){},jWmL:function(t,e){},jg5p:function(t,e){},lO7g:function(t,e,s){"use strict";var a=s("sHg/"),i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"nav_menu"},[s("el-menu",{ref:"menu",staticClass:"el-menu-vertical-demo",attrs:{mode:"vertical",router:"","background-color":"#324057","default-active":t.defaultActive,"text-color":"#fff","active-text-color":"#e4ba55"},on:{open:t.handleOpen}},t._l(t.menuData,function(e){return s("el-submenu",{key:e.id,attrs:{index:e.id.toString()}},[s("template",{slot:"title"},[s("i",{staticClass:"el-icon-menu"}),t._v(" "),s("span",[t._v(t._s(e.title))])]),t._v(" "),s("el-menu-item-group",t._l(e.child,function(e){return s("el-menu-item",{key:e.id,attrs:{index:e.url}},[t._v(t._s(e.title))])}))],2)}))],1)},staticRenderFns:[]};var n=s("VU/8")({props:["menuData","menu"],data:function(){return{actived:"54",defaultActive:this.defaultOpends()}},methods:{defaultOpends:function(){if("/admin/config/add"!==this.$route.path){var t=this.$route.path.split("/"),e=["",t[1],t[2]].join("/");if("list"!==t[3])return e+"/list"}return this.$route.path},handleOpen:function(t,e){}},watch:{$route:function(t,e){this.defaultActive=this.defaultOpends()}}},i,!1,function(t){s("i1Dn")},null,null).exports,o=s("//TE"),l=s("RRJN"),r=s.n(l),c={data:function(){return{disable:!1,dialogToggle:!1,form:{auth_key:"",old_pwd:"",new_pwd:""},rules:{old_pwd:[{required:!0,message:"请输入旧密码",trigger:"blur"},{min:5,max:12,message:"长度在 5 到 12 个字符",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:5,max:12,message:"长度在 5 到 12 个字符",trigger:"blur"}]}}},methods:{open:function(){this.dialogToggle=!0},close:function(){this.dialogToggle=!1},submit:function(){var t=this;this.$refs.form.validate(function(e){e&&(t.disable=!t.disable,t.apiPost("admin/base/setInfo",t.form).then(function(e){t.handelResponse(e,function(e){a.a.toastMsg("success","修改成功"),r.a.rm("authKey"),r.a.rm("expire"),setTimeout(function(){t.$router.replace("/")},1500)},function(){t.disable=!t.disable})}))})}},created:function(){this.form.auth_key=r.a.get("authKey")},mixins:[o.a]},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{attrs:{visible:t.dialogToggle,"custom-class":"w-400 h-300",title:"修改密码"},on:{"update:visible":function(e){t.dialogToggle=e}}},[s("div",{staticClass:"ovf-auto"},[s("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"旧密码",prop:"old_pwd"}},[s("el-input",{model:{value:t.form.old_pwd,callback:function(e){t.$set(t.form,"old_pwd","string"==typeof e?e.trim():e)},expression:"form.old_pwd"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"新密码",prop:"new_pwd"}},[s("el-input",{model:{value:t.form.new_pwd,callback:function(e){t.$set(t.form,"new_pwd","string"==typeof e?e.trim():e)},expression:"form.new_pwd"}})],1)],1)],1),t._v(" "),s("div",{staticClass:"p-t-20"},[s("el-button",{staticClass:"fl m-l-20",attrs:{type:"primary",disabled:t.disable},on:{click:function(e){t.submit()}}},[t._v("提交")])],1)])},staticRenderFns:[]};var d=s("VU/8")(c,u,!1,function(t){s("CEsN")},null,null).exports,m=s("lbHh"),p=s.n(m),f=s("M4fF"),h=s.n(f),_=s("vgQg"),v={data:function(){return{username:"",childMenu:[],menuData:[],hasChildMenu:!1,menu:null,module:null,img:"",title:"",logo_type:null}},methods:{logout:function(){var t=this;this.$confirm("确认退出吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){a.a.openGlobalLoading();var e={authkey:r.a.get("authKey")};t.apiPost("admin/base/logout",e).then(function(e){a.a.closeGlobalLoading(),t.handelResponse(e,function(e){r.a.rm("authKey"),r.a.rm("expire"),r.a.rm("rememberKey"),p.a.remove("rememberPwd"),a.a.toastMsg("success","退出成功"),setTimeout(function(){t.$router.replace("/")},1500)})})}).catch(function(){})},switchTopMenu:function(t){t.child?this.$router.push(t.child[0].child[0].url):this.$router.push(t.url)},handleMenu:function(t){switch(t){case"logout":this.logout();break;case"changePwd":this.changePwd()}},changePwd:function(){this.$refs.changePwd.open()},getTitleAndLogo:function(){var t=this;this.apiPost("admin/base/getConfigs").then(function(e){t.handelResponse(e,function(e){document.title=e.SYSTEM_NAME,t.logo_type=e.LOGO_TYPE,t.title=e.SYSTEM_NAME,t.img=_.a.HOST+e.SYSTEM_LOGO})})},getUsername:function(){this.username=this.$store.state.users.username}},created:function(){var t=this;if(this.getTitleAndLogo(),!r.a.get("authKey"))return a.a.toastMsg("warning","您尚未登录"),void setTimeout(function(){t.$router.replace("/")},1500);this.getUsername();var e=this.$store.state.menus;this.menu=this.$route.meta.menu,this.module=this.$route.meta.module,h()(e).forEach(function(e){e.module==t.module?(t.menuData=e.child,e.selected=!0):e.selected=!1})},computed:{routerShow:function(){return this.$store.state.routerShow},showLeftMenu:function(){return this.hasChildMenu=this.$store.state.showLeftMenu,this.$store.state.showLeftMenu}},components:{leftMenu:n,changePwd:d},watch:{$route:function(t,e){var s=this;h()(this.$store.state.menus).forEach(function(e){e.module==t.meta.module?(e.selected=!0,t.meta.hideLeft||(s.menu=t.meta.menu,s.menuData=e.child)):e.selected=!1})}},mixins:[o.a]},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-row",{staticClass:"panel m-w-1280"},[s("el-col",{staticClass:"panel-top",attrs:{span:24}},[s("el-col",{attrs:{span:4}},["1"==t.logo_type?[s("img",{staticClass:"logo",attrs:{src:t.img}})]:[s("span",{staticClass:"p-l-20"},[t._v(t._s(t.title))])]],2),t._v(" "),s("el-col",{staticClass:"ofv-hd",attrs:{span:16}},t._l(t.$store.state.menus,function(e){return s("div",{key:e.id,staticClass:"fl p-l-20 p-r-20 top-menu",class:{"top-active":e.selected},on:{click:function(s){t.switchTopMenu(e)}}},[t._v(t._s(e.title))])})),t._v(" "),s("el-col",{staticClass:"pos-rel",attrs:{span:4}},[s("el-dropdown",{staticClass:"user-menu",on:{command:t.handleMenu}},[s("span",{staticClass:"el-dropdown-link c-gra",staticStyle:{cursor:"default"}},[t._v("\n\t\t        "+t._s(t.username)+"  "),s("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}})]),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"changePwd"}},[t._v("修改密码")]),t._v(" "),s("el-dropdown-item",{attrs:{command:"logout"}},[t._v("退出")])],1)],1)],1)],1),t._v(" "),s("el-col",{staticClass:"panel-center",attrs:{span:24}},[s("aside",{directives:[{name:"show",rawName:"v-show",value:!t.$store.state.showLeftMenu,expression:"!$store.state.showLeftMenu"}],staticClass:"ovf-hd aside"},[s("leftMenu",{ref:"leftMenu",attrs:{menuData:t.menuData,menu:t.menu}})],1),t._v(" "),s("section",{staticClass:"panel-c-c",class:{"hide-leftMenu":t.hasChildMenu}},[s("div",{staticClass:"grid-content bg-purple-light"},[s("el-col",{attrs:{span:24}},[s("transition",{attrs:{name:"fade",mode:"out-in",appear:""}},[s("router-view")],1)],1)],1)])]),t._v(" "),s("changePwd",{ref:"changePwd"})],1)},staticRenderFns:[]};var b=s("VU/8")(v,g,!1,function(t){s("NZJc")},null,null);e.a=b.exports},nMI2:function(t,e,s){"use strict";var a=s("//TE"),i=s("Rvav"),n=s("sHg/"),o={data:function(){return{isLoading:!1,form:{id:null,title:"",name:"",pid:null,level:null},options:[{id:0,name:"根节点"}],rules:{title:[{required:!0,message:"请输入节点名称"}],name:[{required:!0,message:"请输入节点显示名"}],level:[{required:!0,message:"请选择节点类型"}],pid:[{type:"number",required:!0,message:"请选择父级节点"}]}}},methods:{edit:function(t){var e=this;this.$refs[t].validate(function(t){t&&(e.isLoading=!0,e.apiPut("admin/rules/",e.form.id,e.form).then(function(t){e.handelResponse(t,function(t){e.isLoading=!1,n.a.toastMsg("success","编辑成功"),setTimeout(function(){e.goback()},1500)},function(){e.isLoading=!1})}))})},getRules:function(){var t=this;this.apiGet("admin/rules").then(function(e){t.handelResponse(e,function(e){t.options=t.options.concat(e)})})},getRuleInfo:function(){var t=this;this.form.id=this.$route.params.id,this.apiGet("admin/rules/"+this.form.id).then(function(e){t.handelResponse(e,function(e){e.level=e.level.toString(),t.form=e})})}},created:function(){this.getRules(),this.getRuleInfo()},mixins:[a.a,i.a]},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"m-l-50 m-t-30 w-500"},[s("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"110px"}},[s("el-form-item",{attrs:{label:"显示名",prop:"title"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.title,callback:function(e){t.$set(t.form,"title","string"==typeof e?e.trim():e)},expression:"form.title"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"名称",prop:"name"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"==typeof e?e.trim():e)},expression:"form.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"节点类型",prop:"level"}},[s("el-radio-group",{model:{value:t.form.level,callback:function(e){t.$set(t.form,"level",e)},expression:"form.level"}},[s("el-radio",{attrs:{label:"1",disabled:""}},[t._v("项目")]),t._v(" "),s("el-radio",{attrs:{label:"2",disabled:""}},[t._v("模块")]),t._v(" "),s("el-radio",{attrs:{label:"3",disabled:""}},[t._v("操作")])],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"父节点",prop:"pid"}},[s("el-select",{staticClass:"w-200",attrs:{placeholder:"父节点",disabled:""},model:{value:t.form.pid,callback:function(e){t.$set(t.form,"pid",e)},expression:"form.pid"}},t._l(t.options,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}))],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){t.edit("form")}}},[t._v("提交")]),t._v(" "),s("el-button",{on:{click:function(e){t.goback()}}},[t._v("返回")])],1)],1)],1)},staticRenderFns:[]},r=s("VU/8")(o,l,!1,null,null,null);e.a=r.exports},nhUd:function(t,e,s){"use strict";var a=s("Xxa5"),i=s.n(a),n=s("exGp"),o=s.n(n),l=s("//Fk"),r=s.n(l),c=s("//TE"),u=s("Rvav"),d=s("M4fF"),m=s.n(d),p=s("sHg/"),f={data:function(){return{isLoading:!1,form:{id:null,title:"",pid:"",remark:"",rules:"",status:null},options:[{pid:"0",title:"无"}],nodes:[],selectedNodes:[],rules:{title:[{required:!0,message:"请输入角色名称",trigger:"blur"}],rules:[{required:!0,message:"请选择权限分配",trigger:"blur"}]}}},methods:{edit:function(t){var e=this;this.form.rules=this.selectedNodes.toString(),this.$refs[t].validate(function(t){t&&(e.isLoading=!0,e.apiPut("admin/groups/",e.form.id,e.form).then(function(t){e.handelResponse(t,function(t){e.isLoading=!1,p.a.toastMsg("success","编辑成功"),setTimeout(function(){e.goback()},1500)},function(){e.isLoading=!1})}))})},getRules:function(){var t=this;return new r.a(function(e,s){t.apiGet("admin/rules?type=tree").then(function(s){t.handelResponse(s,function(t){e(t)})})})},getGroups:function(){var t=this;this.apiGet("admin/groups").then(function(e){t.handelResponse(e,function(e){m()(e.list).forEach(function(t){t.id=t.id.toString()}),t.options=t.options.concat(e.list)})})},getGroupInfo:function(){var t=this;return o()(i.a.mark(function e(){var s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.form.id=t.$route.params.id,e.next=3,t.getRules();case 3:s=e.sent,t.nodes=t.nodes.concat(s),t.apiGet("admin/groups/"+t.form.id).then(function(e){t.handelResponse(e,function(e){t.form.title=e.title,t.form.pid=e.pid?e.pid.toString():"",t.form.remark=e.remark,t.form.status=e.status;var s=e.rules.split(",");m()(s).forEach(function(e){t.selectedNodes.push(parseInt(e))}),m()(t.nodes).forEach(function(e){m.a.includes(t.selectedNodes,e.id)&&(e.check=!0),m()(e.child).forEach(function(e){m()(t.selectedNodes).includes(e.id)&&(e.check=!0),m()(e.child).forEach(function(e){m()(t.selectedNodes).includes(e.id)&&(e.check=!0)})})})})});case 6:case"end":return e.stop()}},e,t)}))()},selectProjectRule:function(t){var e=this;t.check||m()(t.child).forEach(function(t){t.check=!1;var s=m()(e.selectedNodes).indexOf(t.id);e.selectedNodes.splice(s,1),m()(t.child).forEach(function(t){t.check=!1;var s=m()(e.selectedNodes).indexOf(t.id);e.selectedNodes.splice(s,1)})}),this.selectRule(t)},selectModuleRule:function(t,e,s){var a=this;if(e.check||(e.check=!0,this.selectedNodes.push(e.id)),t.check)this.selectedNodes.push(t.id),m()(s).forEach(function(t){t.check=!0,a.selectedNodes.push(t.id)});else{var i=m()(this.selectedNodes).indexOf(t.id);this.selectedNodes.splice(i,1),m()(s).forEach(function(t){var e=m()(a.selectedNodes).indexOf(t.id);e>=0&&(t.check=!1,a.selectedNodes.splice(e,1))})}},selectActionRule:function(t,e,s){e.check||(e.check=!0,this.selectedNodes.push(e.id)),s.check||(s.check=!0,this.selectedNodes.push(s.id)),this.selectRule(t)},selectRule:function(t){if(t.check)this.selectedNodes.push(t.id);else{var e=m()(this.selectedNodes).indexOf(t.id);this.selectedNodes.splice(e,1)}}},created:function(){this.getGroupInfo(),this.getGroups()},mixins:[c.a,u.a]},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"m-b-20"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:"/admin/groups/list"}}},[t._v("角色管理")]),t._v(" "),s("el-breadcrumb-item",[t._v("编辑角色")])],1)],1),t._v(" "),s("div",{staticClass:"m-l-50 m-t-30 w-900"},[s("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[s("el-form-item",{attrs:{label:"角色名称",prop:"title"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.title,callback:function(e){t.$set(t.form,"title","string"==typeof e?e.trim():e)},expression:"form.title"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"父级用户角色",prop:"pid"}},[s("el-select",{staticClass:"w-200",attrs:{placeholder:"父级用户角色"},model:{value:t.form.pid,callback:function(e){t.$set(t.form,"pid",e)},expression:"form.pid"}},t._l(t.options,function(t){return s("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}))],1),t._v(" "),s("el-form-item",{attrs:{label:"备注"}},[s("el-input",{staticClass:"w-200",attrs:{type:"textarea",rows:2,placeholder:"备注"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"权限分配",prop:"rules"}},[s("div",{staticClass:"bor-gray h-400 ovf-y-auto bor-ra-5 bg-wh"},t._l(t.nodes,function(e){return s("div",{key:e.id},[s("div",{staticClass:"bor-b-ccc bg-gra p-l-10 p-r-10"},[s("el-checkbox",{on:{change:function(s){t.selectProjectRule(e)}},model:{value:e.check,callback:function(s){t.$set(e,"check",s)},expression:"item.check"}},[t._v(t._s(e.else))])],1),t._v(" "),t._l(e.child,function(a){return s("div",{key:a.id},[s("div",{staticClass:"p-l-20 bor-b-ccc"},[s("el-checkbox",{on:{change:function(s){t.selectModuleRule(a,e,a.child)}},model:{value:a.check,callback:function(e){t.$set(a,"check",e)},expression:"childItem.check"}},[t._v(t._s(a.else))])],1),t._v(" "),s("div",{staticClass:"p-l-40 bor-b-ccc bg-gra"},t._l(a.child,function(i){return s("el-checkbox",{key:i.id,on:{change:function(s){t.selectActionRule(i,a,e)}},model:{value:i.check,callback:function(e){t.$set(i,"check",e)},expression:"grandChildItem.check"}},[t._v(t._s(i.else))])}))])})],2)}))]),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){t.edit("form")}}},[t._v("提交")]),t._v(" "),s("el-button",{on:{click:function(e){t.goback()}}},[t._v("返回")])],1)],1)],1)])},staticRenderFns:[]},_=s("VU/8")(f,h,!1,null,null,null);e.a=_.exports},ojay:function(t,e,s){"use strict";var a=s("//TE"),i=s("Rvav"),n=s("sHg/"),o={data:function(){return{isLoading:!1,form:{username:"",password:"",realname:"",studio_id:[],tache_ids:[],group_id:"",remark:""},studiosOptions:[],tachesOptions:[],groupsOptions:[],selectedStudios:[],selectedTaches:[],selectedStudioIds:[],selectedTacheIds:[],rules:{username:[{required:!0,message:"请输入用户名"}],password:[{required:!0,message:"请输入密码"}],realname:[{required:!0,message:"请输入真实姓名"}],studio_id:[{required:!0,message:"请选择所属工作室"}],tache_ids:[{required:!0,message:"请选择至少一个环节"}],group_id:[{required:!0,message:"请选择角色"}]}}},methods:{selectTachesCheckbox:function(){var t=this,e=!1;return this.selectedTaches=this.form.tache_ids,this.selectedTacheIds=[],_(this.tachesOptions).forEach(function(e){t.selectedTaches.toString().indexOf(e.explain)>-1&&t.selectedTacheIds.push(e.id)}),this.selectedTacheIds.length&&(this.form.tache_ids=_.cloneDeep(this.selectedTacheIds),e=!0),this.selectedTacheIds=[],e},add:function(t){var e=this;this.selectTachesCheckbox()?this.$refs.form.validate(function(t){t&&(e.isLoading=!e.isLoading,e.apiPost("admin/users",e.form).then(function(t){e.handelResponse(t,function(t){n.a.toastMsg("success","添加成功"),setTimeout(function(){e.goback()},1500)},function(){e.isLoading=!e.isLoading})}))}):n.a.toastMsg("warning","请选择至少一个环节")},getAllGroups:function(){var t=this;this.apiGet("admin/groups").then(function(e){t.handelResponse(e,function(e){t.groupsOptions=e.list})})},getAllStudios:function(){var t=this;this.apiGet("admin/studios").then(function(e){t.handelResponse(e,function(e){t.studiosOptions=e.list})})},getAllTaches:function(){var t=this;this.apiGet("admin/taches").then(function(e){t.handelResponse(e,function(e){t.tachesOptions=e.list})})}},created:function(){this.getAllGroups(),this.getAllStudios(),this.getAllTaches()},mixins:[a.a,i.a]},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"m-b-20"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:"/admin/users/list"}}},[t._v("成员管理")]),t._v(" "),s("el-breadcrumb-item",[t._v("添加成员")])],1)],1),t._v(" "),s("div",{staticClass:"m-l-50 m-t-30 w-800"},[s("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[s("el-form-item",{attrs:{label:"用户名",prop:"username"}},[s("el-input",{staticClass:"h-40 w-200",attrs:{maxlength:12},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username","string"==typeof e?e.trim():e)},expression:"form.username"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.password,callback:function(e){t.$set(t.form,"password","string"==typeof e?e.trim():e)},expression:"form.password"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"真实姓名",prop:"realname"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.realname,callback:function(e){t.$set(t.form,"realname","string"==typeof e?e.trim():e)},expression:"form.realname"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"所属工作室",prop:"studio_id"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.studio_id,callback:function(e){t.$set(t.form,"studio_id",e)},expression:"form.studio_id"}},t._l(t.studiosOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),s("el-form-item",{attrs:{label:"环节",prop:"tache_ids"}},[s("el-checkbox-group",{attrs:{size:"small"},model:{value:t.form.tache_ids,callback:function(e){t.$set(t.form,"tache_ids",e)},expression:"form.tache_ids"}},t._l(t.tachesOptions,function(e){return s("el-checkbox-button",{key:e.id,attrs:{label:e.explain,value:e.id}},[t._v(t._s(e.explain))])}))],1),t._v(" "),s("el-form-item",{attrs:{label:"角色",prop:"group_id"}},[s("el-select",{attrs:{placeholder:"请选择角色"},model:{value:t.form.group_id,callback:function(e){t.$set(t.form,"group_id",e)},expression:"form.group_id"}},t._l(t.groupsOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.remark,value:t.id}})}))],1),t._v(" "),s("el-form-item",{attrs:{label:"备注"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark","string"==typeof e?e.trim():e)},expression:"form.remark"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){t.add("form")}}},[t._v("提交")]),t._v(" "),s("el-button",{on:{click:function(e){t.goback()}}},[t._v("返回")])],1)],1)],1)])},staticRenderFns:[]};var r=s("VU/8")(o,l,!1,function(t){s("9ouo")},null,null);e.a=r.exports},ool0:function(t,e,s){"use strict";var a=s("Nh03"),i=s("//TE"),n=s("sHg/"),o={data:function(){return{tableData:[],multipleSelection:[]}},methods:{selectItem:function(t){this.multipleSelection=t},confirmDelete:function(t){var e=this;this.$confirm("确认删除该菜单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.a.openGlobalLoading(),e.apiDelete("admin/menus/",t.id).then(function(t){n.a.closeGlobalLoading(),e.handelResponse(t,function(t){n.a.toastMsg("success","删除成功"),setTimeout(function(){n.a.shallowRefresh(e.$route.name)},1500)})})}).catch(function(){})}},created:function(){var t=this;this.apiGet("admin/menus").then(function(e){t.handelResponse(e,function(e){t.tableData=e})})},computed:{addShow:function(){return n.a.getHasRule("menus-save")},editShow:function(){return n.a.getHasRule("menus-update")},deleteShow:function(){return n.a.getHasRule("menus-delete")}},components:{btnGroup:a.a},mixins:[i.a]},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.addShow?s("div",{staticClass:"m-b-20"},[s("router-link",{staticClass:"btn-link-large add-btn",attrs:{to:"add"}},[s("i",{staticClass:"el-icon-plus"}),t._v("  添加菜单\n  \t\t")])],1):t._e(),t._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"selection-change":t.selectItem}},[s("el-table-column",{attrs:{type:"selection",context:t._self,width:"50"}}),t._v(" "),s("el-table-column",{attrs:{prop:"p_title",label:"上级菜单",width:"150"}}),t._v(" "),s("el-table-column",{attrs:{prop:"title",label:"标题"}}),t._v(" "),s("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t"+t._s(t._f("status")(e.row.status))+"\n\t\t\t\t")]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return t.editShow?[s("router-link",{attrs:{to:{name:"menuEdit",params:{id:e.row.id}}}},[s("el-button",{attrs:{size:"small",type:"primary"}},[t._v("编辑")])],1),t._v(" "),t.deleteShow?s("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(s){t.confirmDelete(e.row)}}},[t._v("删除")]):t._e()]:void 0}}])})],1),t._v(" "),s("div",{staticClass:"pos-rel p-t-20"},[s("btnGroup",{attrs:{selectedData:t.multipleSelection,type:"menus"}})],1)],1)},staticRenderFns:[]},r=s("VU/8")(o,l,!1,null,null,null);e.a=r.exports},pY9x:function(t,e){},qEe2:function(t,e){},"sHg/":function(t,e,s){"use strict";var a=s("mvHQ"),i=s.n(a),n=s("YtJ0"),o=s("YaEn"),l=s("RRJN"),r=(s.n(l),s("IPo5")),c={j2s:function(t){return i()(t)},j2time:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())+" "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())},shallowRefresh:function(t){o.a.replace({path:"/refresh",query:{name:t}})},closeGlobalLoading:function(){setTimeout(function(){n.a.dispatch("showLoading",!1)},0)},openGlobalLoading:function(){setTimeout(function(){n.a.dispatch("showLoading",!0)},0)},cloneJson:function(t){return JSON.parse(i()(t))},toastMsg:function(t,e){switch(t){case"normal":r.a.$message(e);break;case"success":r.a.$message({message:e,type:"success"});break;case"warning":r.a.$message({message:e,type:"warning"});break;case"error":r.a.$message.error(e)}},clearVuex:function(t){n.a.dispatch(t,[])},getHasRule:function(t){if(1==n.a.state.users.id)return!0;var e=n.a.state.rules,s="admin-"+t;return _.includes(e,s)}};e.a=c},tXe5:function(t,e,s){"use strict";var a=s("Rvav"),i=s("//TE"),n=s("sHg/"),o=s("mtWM"),l=s.n(o),r={data:function(){var t=this;return{isArt:!1,isModel:!1,isMap:!1,isBind:!1,isTrack:!1,isAni:!1,isPaint:!1,isSpec:!1,isLight:!1,isSynch:!1,artOfStudio:[],modelOfStudio:[],mapOfStudio:[],bindOfStudio:[],trackOfStudio:[],animateOfStudio:[],paintOfStudio:[],specialOfStudio:[],lightOfStudio:[],synchOfStudio:[],isAddField:!1,isImportShot:!1,isLoading:!1,uploadImageUrl:window.HOST+"/admin/upload_image",projectList:[],studiosList:[],fieldList:[],importForm:{project_id:"",shot_file:""},fileList:[],fieldForm:{project_id:"",name:""},form:{project_id:"",field_id:"",asset_ids:"",shot_image:"",shot_number:"",shot_byname:"",shot_name:"",time:"",ambient:"",plan_start_timestamp:"",plan_end_timestamp:"",shot_explain:"",clip_frame_length:"",frame_range:"",priority_level:"1",difficulty:"1",handle_frame:"",material_frame_length:"",charge_speed_info:"",material_number:"",second_company:"",make_demand:"",status:1},image:"",plan_time:"",frame_range1:"",frame_range2:"",handle_frame1:"",handle_frame2:"",rules:{project_id:[{required:!0,message:"请选择项目"}],field_id:[{required:!0,message:"请选择场号"}],shot_image:[{required:!0,message:"请插入镜头缩略图"}],shot_number:[{required:!0,message:"请输入镜头编号"},{min:3,max:6,message:"长度在3到6个字符"},{pattern:/^[0-9]+$/,validator:function(e,s,a){console.log(t.form.field_id),console.log(s);var i={params:{field_id:parseInt(t.form.field_id),shot_number:s}};""==s?a(new Error("请输入镜头编号")):l.a.get("shot/check_num",i).then(function(t){console.log(t.data.code,"suc"),400===t.data.code?a(new Error(t.data.error)):a()})}}],shot_byname:[{required:!0,message:"请输入镜头简称"},{pattern:/^[a-zA-Z]+$/,message:"镜头简称必须为字母"}],shot_name:[{required:!0,message:"请输入镜头名称"},{pattern:/^[\u4E00-\u9FA5]+$/,message:"镜头名称必须为汉字"}],time:[{required:!0,message:"请选择时刻"}],ambient:[{required:!0,message:"请选择环境"}],difficulty:[{required:!0,message:"请选择镜头难度"}],priority_level:[{required:!0,message:"请选择镜头优先级"}]},addFieldRules:{project_id:[{required:!0,message:"请选择项目"}],name:[{required:!0,message:"请输入场号/集号"}]},importShotRules:{project_id:[{required:!0,message:"请选择项目"}],shot_file:[{required:!0,message:"请输入场号/集号"}]}}},methods:{handleAvatarSuccess:function(t,e){this.image=URL.createObjectURL(e.raw),this.form.shot_image=t.data},beforeAvatarUpload:function(t){var e=t.size/1024/1024<.195;return e||this.$message.error("上传图片大小不能超过 200KB!"),e},addField:function(t){var e=this;this.fieldForm.project_id&&this.fieldForm.name&&(this.isLoading=!this.isLoading,this.apiPost("admin/save_field",this.fieldForm).then(function(t){e.handelResponse(t,function(t){n.a.toastMsg("success","添加成功"),setTimeout(function(){e.isAddField=!1,e.getFields()},1500),e.isLoading=!e.isLoading},function(){e.isLoading=!e.isLoading})}))},handlePreview:function(t){console.log(t)},importShot:function(){console.log(this.$refs.upload.uploadFiles)},changeTache:function(){this.artOfStudio=this.isArt?this.artOfStudio:[],this.modelOfStudio=this.isModel?this.modelOfStudio:[],this.mapOfStudio=this.isMap?this.mapOfStudio:[],this.bindOfStudio=this.isBind?this.bindOfStudio:[],this.trackOfStudio=this.isTrack?this.trackOfStudio:[],this.animateOfStudio=this.isAni?this.animateOfStudio:[],this.paintOfStudio=this.isPaint?this.paintOfStudio:[],this.specialOfStudio=this.isSpec?this.specialOfStudio:[],this.lightOfStudio=this.isLight?this.lightOfStudio:[],this.synchOfStudio=this.isSynch?this.synchOfStudio:[]},add:function(t){var e=this;0!==this.artOfStudio.length||0!==this.modelOfStudio.length||0!==this.mapOfStudio.length||0!==this.bindOfStudio.length||0!==this.trackOfStudio.length||0!==this.animateOfStudio.length||0!==this.paintOfStudio.length||0!==this.specialOfStudio.length||0!==this.lightOfStudio.length||0!==this.synchOfStudio.length?this.form.shot_image?0!==this.plan_time.length?(this.form.project_id=parseInt(this.form.project_id),this.form.field_id=parseInt(this.form.field_id),this.form.time=parseInt(this.form.time),this.form.ambient=parseInt(this.form.ambient),this.form.plan_start_timestamp=n.a.j2time(this.plan_time[0]),this.form.plan_end_timestamp=n.a.j2time(this.plan_time[1]),this.form.priority_level=this.form.priority_level?parseInt(this.form.priority_level):1,this.form.difficulty=this.form.difficulty?parseInt(this.form.difficulty):1,this.form.frame_range=this.frame_range1&&this.frame_range2?this.frame_range1+","+this.frame_range2:"",this.form.handle_frame=this.handle_frame1&&this.handle_frame2?this.handle_frame1+","+this.handle_frame2:"",this.form.clip_frame_length=this.form.clip_frame_length?parseInt(this.form.clip_frame_length):0,this.form.material_frame_length=this.form.material_frame_length?parseInt(this.form.material_frame_length):"",this.form.tache={3:this.artOfStudio,4:this.modelOfStudio,5:this.mapOfStudio,6:this.bindOfStudio,7:this.trackOfStudio,8:this.animateOfStudio,9:this.paintOfStudio,10:this.specialOfStudio,11:this.lightOfStudio,12:this.synchOfStudio},this.$refs.form.validate(function(t){t&&e.apiPost("admin/shots",e.form).then(function(t){e.handelResponse(t,function(t){n.a.toastMsg("success","添加成功"),setTimeout(function(){e.goback()},1500)},function(){e.isLoading=!e.isLoading})})})):n.a.toastMsg("warning","请输入计划起止时间"):n.a.toastMsg("warning","请插入镜头缩略图"):n.a.toastMsg("warning","请选择至少一个环节所属工作室")},getAllStudios:function(){var t=this;this.apiGet("shot/get_studio").then(function(e){t.handelResponse(e,function(e){t.studiosList=e.list})})},getProjects:function(){var t=this;this.apiGet("admin/projects").then(function(e){t.handelResponse(e,function(e){t.projectList=e.list})})},getFields:function(){var t=this;this.form.field_id="";var e={params:{project_id:this.form.project_id}};this.apiGet("admin/get_fields",e).then(function(e){t.handelResponse(e,function(e){t.fieldList=e})})}},created:function(){this.getProjects(),this.getAllStudios()},mixins:[i.a,a.a],computed:{addShow:function(){return n.a.getHasRule("shots-save_filed")},importAddShow:function(){return n.a.getHasRule("shot_import")}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"m-b-20"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:"/admin/shots/list"}}},[t._v("镜头管理")]),t._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:"/admin/shots/list"}}},[t._v("镜头汇总")]),t._v(" "),s("el-breadcrumb-item",[t._v("添加镜头")])],1)],1),t._v(" "),s("div",{staticClass:"m-r-30 m-b-20 m-t-30 tx-r"},[t.importAddShow?s("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(e){t.isImportShot=!0}}},[t._v("批量导入")]):t._e(),t._v(" "),s("el-button",{staticClass:"fz-12 m-0",attrs:{type:"text",size:"mini"}},[t._v("点击获取模板")])],1),t._v(" "),s("div",{staticClass:"m-l-50 m-t-30 w-1000"},[s("el-form",{ref:"form",staticClass:"shot_add",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"项目名称:",prop:"project_id"}},[s("el-select",{attrs:{placeholder:"请选择项目"},on:{change:t.getFields},model:{value:t.form.project_id,callback:function(e){t.$set(t.form,"project_id",e)},expression:"form.project_id"}},t._l(t.projectList,function(t){return s("el-option",{key:t.id,attrs:{label:t.project_name,value:t.id}})}))],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"场号:",prop:"field_id"}},[s("el-select",{class:{"w-130":t.addShow},attrs:{placeholder:"请选择场号"},model:{value:t.form.field_id,callback:function(e){t.$set(t.form,"field_id",e)},expression:"form.field_id"}},t._l(t.fieldList,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),t.addShow?s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){t.isAddField=!0}}},[t._v("添加")]):t._e()],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"资产:",prop:"asset_ids"}},[s("el-select",{staticClass:"h-40 w-200",attrs:{multiple:"","collapse-tags":"",placeholder:"请选择资产"},model:{value:t.form.asset_ids,callback:function(e){t.$set(t.form,"asset_ids",e)},expression:"form.asset_ids"}},[s("el-option",{attrs:{label:"我是资产1",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"我是资产2",value:"2"}})],1)],1)],1)])],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{staticClass:"is-required",attrs:{label:"镜头缩略图:",prop:"image"}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadImageUrl,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.shot_image?s("img",{staticClass:"avatar",attrs:{src:t.image}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"镜头编号:",prop:"shot_number"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.shot_number,callback:function(e){t.$set(t.form,"shot_number","string"==typeof e?e.trim():e)},expression:"form.shot_number"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"镜头简称:",prop:"shot_byname"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.shot_byname,callback:function(e){t.$set(t.form,"shot_byname","string"==typeof e?e.trim():e)},expression:"form.shot_byname"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"镜头名称:",prop:"shot_name"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.shot_name,callback:function(e){t.$set(t.form,"shot_name","string"==typeof e?e.trim():e)},expression:"form.shot_name"}})],1)],1)])],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"时刻:",prop:"time"}},[s("el-select",{staticClass:"h-40 w-200",attrs:{placeholder:"请选择时刻"},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}},[s("el-option",{attrs:{label:"白天",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"夜晚",value:"2"}})],1)],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"环境:",prop:"ambient"}},[s("el-select",{staticClass:"h-40 w-200",attrs:{placeholder:"请选择环境"},model:{value:t.form.ambient,callback:function(e){t.$set(t.form,"ambient",e)},expression:"form.ambient"}},[s("el-option",{attrs:{label:"室外",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"室内",value:"2"}})],1)],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"镜头难度:",prop:"difficulty"}},[s("el-select",{staticClass:"h-40 w-200",attrs:{placeholder:"请选择镜头难度"},model:{value:t.form.difficulty,callback:function(e){t.$set(t.form,"difficulty",e)},expression:"form.difficulty"}},[s("el-option",{attrs:{label:"D",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"C",value:"2"}}),t._v(" "),s("el-option",{attrs:{label:"B",value:"3"}}),t._v(" "),s("el-option",{attrs:{label:"A",value:"4"}}),t._v(" "),s("el-option",{attrs:{label:"S",value:"5"}})],1)],1)],1)])],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:16}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{staticClass:"is-required",attrs:{label:"计划起止时间:",prop:"plan_time"}},[s("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"计划开始时间","end-placeholder":"计划结束时间"},model:{value:t.plan_time,callback:function(e){t.plan_time=e},expression:"plan_time"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"镜头优先级:",prop:"priority_level"}},[s("el-select",{staticClass:"h-40 w-200",attrs:{placeholder:"请选择镜头优先级"},model:{value:t.form.priority_level,callback:function(e){t.$set(t.form,"priority_level",e)},expression:"form.priority_level"}},[s("el-option",{attrs:{label:"D",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"C",value:"2"}}),t._v(" "),s("el-option",{attrs:{label:"B",value:"3"}}),t._v(" "),s("el-option",{attrs:{label:"A",value:"4"}})],1)],1)],1)])],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{staticClass:"is-required",attrs:{label:"环节:",prop:"hahah"}},[s("el-col",{staticClass:"h-45",attrs:{span:12}},[s("el-checkbox",{on:{change:t.changeTache},model:{value:t.isArt,callback:function(e){t.isArt=e},expression:"isArt"}},[t._v("美术部")]),t._v(" "),t.isArt?s("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.artOfStudio,callback:function(e){t.artOfStudio=e},expression:"artOfStudio"}},t._l(t.studiosList,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):t._e()],1),t._v(" "),s("el-col",{staticClass:"h-45",attrs:{span:12}},[s("el-checkbox",{model:{value:t.isModel,callback:function(e){t.isModel=e},expression:"isModel"}},[t._v("模型部")]),t._v(" "),t.isModel?s("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.modelOfStudio,callback:function(e){t.modelOfStudio=e},expression:"modelOfStudio"}},t._l(t.studiosList,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):t._e()],1),t._v(" "),s("el-col",{staticClass:"h-45",attrs:{span:12}},[s("el-checkbox",{model:{value:t.isMap,callback:function(e){t.isMap=e},expression:"isMap"}},[t._v("贴图部")]),t._v(" "),t.isMap?s("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.mapOfStudio,callback:function(e){t.mapOfStudio=e},expression:"mapOfStudio"}},t._l(t.studiosList,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):t._e()],1),t._v(" "),s("el-col",{staticClass:"h-45",attrs:{span:12}},[s("el-checkbox",{model:{value:t.isBind,callback:function(e){t.isBind=e},expression:"isBind"}},[t._v("绑定部")]),t._v(" "),t.isBind?s("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.bindOfStudio,callback:function(e){t.bindOfStudio=e},expression:"bindOfStudio"}},t._l(t.studiosList,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):t._e()],1),t._v(" "),s("el-col",{staticClass:"h-45",attrs:{span:12}},[s("el-checkbox",{model:{value:t.isTrack,callback:function(e){t.isTrack=e},expression:"isTrack"}},[t._v("跟踪部")]),t._v(" "),t.isTrack?s("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.trackOfStudio,callback:function(e){t.trackOfStudio=e},expression:"trackOfStudio"}},t._l(t.studiosList,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):t._e()],1),t._v(" "),s("el-col",{staticClass:"h-45",attrs:{span:12}},[s("el-checkbox",{model:{value:t.isAni,callback:function(e){t.isAni=e},expression:"isAni"}},[t._v("动画部")]),t._v(" "),t.isAni?s("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.animateOfStudio,callback:function(e){t.animateOfStudio=e},expression:"animateOfStudio"}},t._l(t.studiosList,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):t._e()],1),t._v(" "),s("el-col",{staticClass:"h-45",attrs:{span:12}},[s("el-checkbox",{model:{value:t.isPaint,callback:function(e){t.isPaint=e},expression:"isPaint"}},[t._v("数字绘景部")]),t._v(" "),t.isPaint?s("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.paintOfStudio,callback:function(e){t.paintOfStudio=e},expression:"paintOfStudio"}},t._l(t.studiosList,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):t._e()],1),t._v(" "),s("el-col",{staticClass:"h-45",attrs:{span:12}},[s("el-checkbox",{model:{value:t.isSpec,callback:function(e){t.isSpec=e},expression:"isSpec"}},[t._v("特效部")]),t._v(" "),t.isSpec?s("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.specialOfStudio,callback:function(e){t.specialOfStudio=e},expression:"specialOfStudio"}},t._l(t.studiosList,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):t._e()],1),t._v(" "),s("el-col",{staticClass:"h-45",attrs:{span:12}},[s("el-checkbox",{model:{value:t.isLight,callback:function(e){t.isLight=e},expression:"isLight"}},[t._v("灯光部")]),t._v(" "),t.isLight?s("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.lightOfStudio,callback:function(e){t.lightOfStudio=e},expression:"lightOfStudio"}},t._l(t.studiosList,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):t._e()],1),t._v(" "),s("el-col",{staticClass:"h-45",attrs:{span:12}},[s("el-checkbox",{model:{value:t.isSynch,callback:function(e){t.isSynch=e},expression:"isSynch"}},[t._v("合成部")]),t._v(" "),t.isSynch?s("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.synchOfStudio,callback:function(e){t.synchOfStudio=e},expression:"synchOfStudio"}},t._l(t.studiosList,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):t._e()],1)],1)],1)])],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"帧长范围:",prop:"frame_range"}},[s("el-input",{staticClass:"h-40 w-80",model:{value:t.frame_range1,callback:function(e){t.frame_range1="string"==typeof e?e.trim():e},expression:"frame_range1"}}),t._v("\n              -\n              "),s("el-input",{staticClass:"h-40 w-80",model:{value:t.frame_range2,callback:function(e){t.frame_range2="string"==typeof e?e.trim():e},expression:"frame_range2"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"手柄帧:",prop:"handle_frame"}},[s("el-input",{staticClass:"h-40 w-80",model:{value:t.handle_frame1,callback:function(e){t.handle_frame1="string"==typeof e?e.trim():e},expression:"handle_frame1"}}),t._v("\n              -\n              "),s("el-input",{staticClass:"h-40 w-80",model:{value:t.handle_frame2,callback:function(e){t.handle_frame2="string"==typeof e?e.trim():e},expression:"handle_frame2"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"素材号:",prop:"material_number"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.material_number,callback:function(e){t.$set(t.form,"material_number","string"==typeof e?e.trim():e)},expression:"form.material_number"}})],1)],1)])],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"剪辑帧长:",prop:"clip_frame_length"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.clip_frame_length,callback:function(e){t.$set(t.form,"clip_frame_length","string"==typeof e?e.trim():e)},expression:"form.clip_frame_length"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"素材帧长:",prop:"material_frame_length"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.material_frame_length,callback:function(e){t.$set(t.form,"material_frame_length","string"==typeof e?e.trim():e)},expression:"form.material_frame_length"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"二级公司:",prop:"second_company"}})],1)])],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"镜头备注:",prop:"shot_explain"}},[s("el-input",{staticClass:"h-40 w-200",attrs:{type:"textarea",rows:3,placeholder:"请输入镜头备注"},model:{value:t.form.shot_explain,callback:function(e){t.$set(t.form,"shot_explain",e)},expression:"form.shot_explain"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"变速信息:",prop:"change_speed_info"}},[s("el-input",{staticClass:"h-40 w-200",attrs:{type:"textarea",rows:3,placeholder:"请输入变速信息"},model:{value:t.form.change_speed_info,callback:function(e){t.$set(t.form,"change_speed_info",e)},expression:"form.change_speed_info"}})],1)],1)]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"grid-content"},[s("el-form-item",{attrs:{label:"制作要求:",prop:"make_demand"}},[s("el-input",{staticClass:"h-40 w-200",attrs:{type:"textarea",rows:3,placeholder:"请输入制作要求"},model:{value:t.form.make_demand,callback:function(e){t.$set(t.form,"make_demand",e)},expression:"form.make_demand"}})],1)],1)])],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-form-item",[s("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:t.add}},[t._v("提交")]),t._v(" "),s("el-button",{on:{click:function(e){t.goback()}}},[t._v("返回")])],1)],1)],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"添加场号/集号",visible:t.isAddField,width:"30%",center:""},on:{"update:visible":function(e){t.isAddField=e}}},[s("el-form",{attrs:{model:t.fieldForm,rules:t.addFieldRules,"label-width":"130px"}},[s("el-form-item",{attrs:{label:"项目名称：",prop:"project_id"}},[s("el-select",{staticClass:"w-200",attrs:{placeholder:"请选择项目"},model:{value:t.fieldForm.project_id,callback:function(e){t.$set(t.fieldForm,"project_id",e)},expression:"fieldForm.project_id"}},t._l(t.projectList,function(t){return s("el-option",{key:t.id,attrs:{label:t.project_name,value:t.id}})}))],1),t._v(" "),s("el-form-item",{attrs:{label:"场号/集号：",prop:"name"}},[s("el-input",{staticClass:"w-200",model:{value:t.fieldForm.name,callback:function(e){t.$set(t.fieldForm,"name","string"==typeof e?e.trim():e)},expression:"fieldForm.name"}})],1)],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.isAddField=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addField(t.fieldForm)}}},[t._v("确 定")])],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"批量导入镜头",visible:t.isImportShot,width:"30%",center:""},on:{"update:visible":function(e){t.isImportShot=e}}},[s("el-form",{attrs:{model:t.importForm,rules:t.importShotRules,"label-width":"130px"}},[s("el-form-item",{attrs:{label:"项目名称：",prop:"project_id"}},[s("el-select",{staticClass:"w-200",attrs:{placeholder:"请选择项目"},model:{value:t.importForm.project_id,callback:function(e){t.$set(t.importForm,"project_id",e)},expression:"importForm.project_id"}},t._l(t.projectList,function(t){return s("el-option",{key:t.id,attrs:{label:t.project_name,value:t.id}})}))],1),t._v(" "),s("el-form-item",{attrs:{label:"镜头文件：",prop:"shot_file"}},[s("el-upload",{ref:"upload",staticClass:"upload_shotFile",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-preview":t.handlePreview,"file-list":t.fileList,limit:1,"auto-upload":!1}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传一个xls/xlsx格式文件")])],1)],1)],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.isImportShot=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.importShot(t.importForm)}}},[t._v("确 认")])],1)],1)],1)},staticRenderFns:[]};var u=s("VU/8")(r,c,!1,function(t){s("2K/B")},null,null);e.a=u.exports},tvR6:function(t,e){},uslO:function(t,e,s){var a={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function i(t){return s(n(t))}function n(t){var e=a[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}i.keys=function(){return Object.keys(a)},i.resolve=n,t.exports=i,i.id="uslO"},vOtP:function(t,e,s){"use strict";var a=s("Nh03"),i=s("//TE"),n=s("sHg/"),o={data:function(){return{tableData:[],dataCount:null,currentPage:1,keywords:"",multipleSelection:[],limit:10}},methods:{selectItem:function(t){this.multipleSelection=t},confirmDelete:function(t){var e=this;this.$confirm("确认删除该环节?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.a.openGlobalLoading(),e.apiDelete("admin/taches/",t.id).then(function(t){n.a.closeGlobalLoading(),e.handelResponse(t,function(t){n.a.toastMsg("success","删除成功"),setTimeout(function(){n.a.shallowRefresh(e.$route.name)},1500)})})}).catch(function(){})},handleCurrentChange:function(t){this.getAllTaches(t)},getAllTaches:function(t){var e=this;this.loading=!0;var s={params:{keywords:this.keywords,page:t,limit:this.limit}};this.apiGet("admin/taches",s).then(function(t){e.handelResponse(t,function(t){e.tableData=t.list,e.dataCount=t.dataCount})})},getKeywords:function(){var t=this.$route.query;t&&(t.keywords?this.keywords=t.keywords:this.keywords="")}},created:function(){this.getAllTaches(1),this.getKeywords()},computed:{listShow:function(){return n.a.getHasRule("taches-index")},addShow:function(){return n.a.getHasRule("taches-save")},editShow:function(){return n.a.getHasRule("taches-update")},deleteShow:function(){return n.a.getHasRule("taches-delete")}},components:{btnGroup:a.a},mixins:[i.a]},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"m-b-20"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",[t._v("环节管理")])],1)],1),t._v(" "),s("div",{staticClass:"m-b-20"},[t.addShow?s("router-link",{staticClass:"btn-link-large add-btn",attrs:{to:"add"}},[s("i",{staticClass:"el-icon-plus"}),t._v("  添加环节\n    ")]):t._e()],1),t._v(" "),t.listShow?s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"selection-change":t.selectItem}},[s("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),s("el-table-column",{attrs:{label:"环节名称",prop:"tache_name"}}),t._v(" "),s("el-table-column",{attrs:{label:"备注",prop:"explain"}}),t._v(" "),s("el-table-column",{attrs:{label:"排序",prop:"sort"}}),t._v(" "),t.editShow||t.deleteShow?s("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t.editShow?s("span",[s("router-link",{attrs:{to:{name:"tachesEdit",params:{id:e.row.id}}}},[s("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("\n                编辑\n              ")])],1)],1):t._e(),t._v(" "),t.deleteShow?s("span",[s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){t.confirmDelete(e.row)}}},[t._v("删除")])],1):t._e()])]}}])}):t._e()],1):t._e(),t._v(" "),s("div",{staticClass:"pos-rel p-t-20"},[s("div",{staticClass:"block pages"},[s("el-pagination",{attrs:{layout:"prev, pager, next","page-size":t.limit,"current-page":t.currentPage,total:t.dataCount},on:{"current-change":t.handleCurrentChange}})],1)])],1)},staticRenderFns:[]},r=s("VU/8")(o,l,!1,null,null,null);e.a=r.exports},vgQg:function(t,e,s){"use strict";e.a={HOST:"http://127.0.0.1:8888/",advanceTime:600}},vlnU:function(t,e,s){t.exports=s.p+".htaccess"},yPjj:function(t,e,s){"use strict";var a=s("Rvav"),i=s("//TE"),n=s("sHg/"),o={data:function(){return{isLoading:!1,uploadImageUrl:window.HOST+"/admin/upload_image",userList:[],studiosOptions:[],plan_time:[],form:{project_name:"",project_byname:"",movies_type:"",project_image:"",status:1,aspect_ratio:"",resolutic:"",handle_frame:{handle_frame1:"",handle_frame2:""},frame_rate:"",plan_start_timestamp:"",plan_end_timestamp:"",studio_ids:"",scene_director:"",producer:"",scene_producer:"",visual_effects_boss:"",visual_effects_producer:"",second_company_producer:"",inside_coordinate:"",project_explain:""},studio_ids:[],scene_director:[],producer:[],scene_producer:[],visual_effects_boss:[],visual_effects_producer:[],second_company_producer:[],inside_coordinate:[],image:"",filterMethod:function(t,e){return e.pinyin.indexOf(t)>-1},rules:{project_name:[{required:!0,message:"请输入项目名称"}],movies_type:[{required:!0,message:"请选择影视类型"}],project_byname:[{required:!0,message:"请输入项目简称"},{min:3,max:5,message:"长度在 3 到 5 个字符"},{pattern:/^[A-Z]+$/,message:"项目简称必须为大写字母"}]}}},methods:{handleAvatarSuccess:function(t,e){this.image=URL.createObjectURL(e.raw),this.form.project_image=t.data},beforeAvatarUpload:function(t){var e=t.size/1024/1024<.195;return console.log(e),e||this.$message.error("上传图片大小不能超过 200KB!"),e},add:function(t){var e=this;this.form.project_image?this.form.aspect_ratio?this.form.resolutic?this.form.frame_rate?this.form.handle_frame.handle_frame1&&this.form.handle_frame.handle_frame2?0!==this.plan_time.length?0!==this.studio_ids.length?0!==this.scene_director.length?0!==this.producer.length?0!==this.scene_producer.length?0!==this.visual_effects_boss.length?0!==this.visual_effects_producer.length?0!==this.second_company_producer.length?0!==this.inside_coordinate.length?(this.form.handle_frame=this.form.handle_frame.handle_frame1+","+this.form.handle_frame.handle_frame2,this.form.movies_type=parseInt(this.form.movies_type)?parseInt(this.form.movies_type):"",this.form.resolutic=parseInt(this.form.resolutic)?parseInt(this.form.resolutic):"",this.form.frame_rate=parseInt(this.form.frame_rate)?parseInt(this.form.frame_rate):"",this.form.aspect_ratio=parseInt(this.form.aspect_ratio)?parseInt(this.form.aspect_ratio):"",this.form.studio_ids=this.studio_ids.join(","),this.form.scene_director=this.scene_director.join(","),this.form.producer=this.producer.join(","),this.form.scene_producer=this.scene_producer.join(","),this.form.visual_effects_boss=this.visual_effects_boss.join(","),this.form.visual_effects_producer=this.visual_effects_producer.join(","),this.form.second_company_producer=this.second_company_producer.join(","),this.form.inside_coordinate=this.inside_coordinate.join(","),this.form.plan_start_timestamp=n.a.j2time(this.plan_time[0]),this.form.plan_end_timestamp=n.a.j2time(this.plan_time[1]),this.$refs.form.validate(function(t){t&&(e.isLoading=!e.isLoading,e.apiPost("admin/projects",e.form).then(function(t){e.handelResponse(t,function(t){n.a.toastMsg("success","添加成功"),setTimeout(function(){e.goback()},1500)},function(){e.isLoading=!e.isLoading})}))})):n.a.toastMsg("warning","请选择内部协调制片"):n.a.toastMsg("warning","请选择二级公司制片"):n.a.toastMsg("warning","请选择视效总制片"):n.a.toastMsg("warning","请选择视效总监"):n.a.toastMsg("warning","请选择现场制片"):n.a.toastMsg("warning","请选择负责制片"):n.a.toastMsg("warning","请选择现场指导"):n.a.toastMsg("warning","请选择所属工作室"):n.a.toastMsg("warning","请输入计划起止时间"):n.a.toastMsg("warning","请输入手柄帧"):n.a.toastMsg("warning","请选择项目帧率"):n.a.toastMsg("warning","请选择分辨率"):n.a.toastMsg("warning","请选择遮幅比"):n.a.toastMsg("warning","请选择项目缩略图")},getAllStudios:function(){var t=this;this.apiGet("admin/studios").then(function(e){t.handelResponse(e,function(e){t.studiosOptions=e.list})})},getAllUsers:function(){var t=this;this.loading=!0,this.apiGet("admin/users").then(function(e){t.handelResponse(e,function(e){var s=[];e.list.forEach(function(t,e){s.push({label:t.realname,key:t.id,pinyin:t.username})}),t.userList=s})})}},created:function(){this.getAllStudios(),this.getAllUsers()},mixins:[i.a,a.a]},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"m-b-20"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/admin"}}},[t._v("首页")]),t._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:"/admin/projects/list"}}},[t._v("项目管理")]),t._v(" "),s("el-breadcrumb-item",{attrs:{to:{path:"/admin/projects/list"}}},[t._v("项目汇总")]),t._v(" "),s("el-breadcrumb-item",[t._v("添加项目")])],1)],1),t._v(" "),s("div",{staticClass:"m-l-50 m-t-30 w-1000"},[s("el-form",{ref:"form",staticClass:"project_add",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[s("el-row",{attrs:{gutter:20}},[s("el-form-item",{attrs:{label:"项目名称:",prop:"project_name"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.project_name,callback:function(e){t.$set(t.form,"project_name","string"==typeof e?e.trim():e)},expression:"form.project_name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"项目简称:",prop:"project_byname"}},[s("el-input",{staticClass:"h-40 w-200",model:{value:t.form.project_byname,callback:function(e){t.$set(t.form,"project_byname","string"==typeof e?e.trim():e)},expression:"form.project_byname"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"影视类型:",prop:"movies_type"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.movies_type,callback:function(e){t.$set(t.form,"movies_type",e)},expression:"form.movies_type"}},[s("el-option",{attrs:{label:"电影",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"电视剧",value:"2"}})],1)],1)],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-form-item",{staticClass:"is-required",attrs:{label:"项目缩略图:",prop:"image"}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadImageUrl,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.project_image?s("img",{staticClass:"avatar",attrs:{src:t.image}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-form-item",{staticClass:"is-required",attrs:{label:"所属工作室:",prop:"studio_ids"}},[s("el-select",{staticClass:"form_studio_id",attrs:{multiple:"",placeholder:"请选择工作室"},model:{value:t.studio_ids,callback:function(e){t.studio_ids=e},expression:"studio_ids"}},t._l(t.studiosOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),s("el-form-item",{staticClass:"is-required",attrs:{label:"计划起止时间:",prop:"plan_time"}},[s("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.plan_time,callback:function(e){t.plan_time=e},expression:"plan_time"}})],1)],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-form-item",{staticClass:"is-required",attrs:{label:"遮幅比:",prop:"aspect_ratio"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.aspect_ratio,callback:function(e){t.$set(t.form,"aspect_ratio",e)},expression:"form.aspect_ratio"}},[s("el-option",{attrs:{label:"16：9",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"10：5",value:"2"}}),t._v(" "),s("el-option",{attrs:{label:"1：1",value:"3"}})],1)],1),t._v(" "),s("el-form-item",{staticClass:"is-required",attrs:{label:"分辨率:",prop:"resolutic"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.resolutic,callback:function(e){t.$set(t.form,"resolutic",e)},expression:"form.resolutic"}},[s("el-option",{attrs:{label:"1024*768",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"2560*1680",value:"2"}})],1)],1)],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-form-item",{staticClass:"is-required",attrs:{label:"项目帧率:",prop:"frame_rate"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.frame_rate,callback:function(e){t.$set(t.form,"frame_rate",e)},expression:"form.frame_rate"}},[s("el-option",{attrs:{label:"24fps",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"25fps",value:"2"}})],1)],1),t._v(" "),s("el-form-item",{staticClass:"is-required",attrs:{label:"手柄帧:",prop:"handle_frame"}},[s("el-input",{staticClass:"h-40 w-100",model:{value:t.form.handle_frame.handle_frame1,callback:function(e){t.$set(t.form.handle_frame,"handle_frame1","string"==typeof e?e.trim():e)},expression:"form.handle_frame.handle_frame1"}}),t._v(" "),s("el-input",{staticClass:"h-40 w-100",model:{value:t.form.handle_frame.handle_frame2,callback:function(e){t.$set(t.form.handle_frame,"handle_frame2","string"==typeof e?e.trim():e)},expression:"form.handle_frame.handle_frame2"}})],1)],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-form-item",{staticClass:"is-required",attrs:{label:"现场指导:",prop:"scene_director"}},[s("el-transfer",{attrs:{titles:["请选择","已选择"],filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入拼音",data:t.userList},model:{value:t.scene_director,callback:function(e){t.scene_director=e},expression:"scene_director"}})],1),t._v(" "),s("el-form-item",{staticClass:"is-required",attrs:{label:"负责制片:",prop:"producer"}},[s("el-transfer",{attrs:{titles:["请选择","已选择"],filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入拼音",data:t.userList},model:{value:t.producer,callback:function(e){t.producer=e},expression:"producer"}})],1)],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-form-item",{staticClass:"is-required",attrs:{label:"现场制片:",prop:"scene_producer"}},[s("el-transfer",{attrs:{titles:["请选择","已选择"],filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入拼音",data:t.userList},model:{value:t.scene_producer,callback:function(e){t.scene_producer=e},expression:"scene_producer"}})],1),t._v(" "),s("el-form-item",{staticClass:"is-required",attrs:{label:"视效总监:",prop:"visual_effects_boss"}},[s("el-transfer",{attrs:{titles:["请选择","已选择"],filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入拼音",data:t.userList},model:{value:t.visual_effects_boss,callback:function(e){t.visual_effects_boss=e},expression:"visual_effects_boss"}})],1)],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-form-item",{staticClass:"is-required",attrs:{label:"视效总制片:",prop:"visual_effects_producer"}},[s("el-transfer",{attrs:{titles:["请选择","已选择"],filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入拼音",data:t.userList},model:{value:t.visual_effects_producer,callback:function(e){t.visual_effects_producer=e},expression:"visual_effects_producer"}})],1),t._v(" "),s("el-form-item",{staticClass:"is-required",attrs:{label:"二级公司制片:",prop:"second_company_producer"}},[s("el-transfer",{attrs:{titles:["请选择","已选择"],filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入拼音",data:t.userList},model:{value:t.second_company_producer,callback:function(e){t.second_company_producer=e},expression:"second_company_producer"}})],1)],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-form-item",{staticClass:"is-required",attrs:{label:"内部协调制片:",prop:"inside_coordinate"}},[s("el-transfer",{attrs:{titles:["请选择","已选择"],filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入拼音",data:t.userList},model:{value:t.inside_coordinate,callback:function(e){t.inside_coordinate=e},expression:"inside_coordinate"}})],1)],1),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-form-item",{attrs:{label:"项目说明:",prop:"project_explain"}},[s("el-input",{staticClass:"h-40 w-800",staticStyle:{resize:"none"},attrs:{type:"textarea",rows:2},model:{value:t.form.project_explain,callback:function(e){t.$set(t.form,"project_explain","string"==typeof e?e.trim():e)},expression:"form.project_explain"}})],1)],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){t.add("form")}}},[t._v("提交")]),t._v(" "),s("el-button",{on:{click:function(e){t.goback()}}},[t._v("返回")])],1)],1)],1)])},staticRenderFns:[]};var r=s("VU/8")(o,l,!1,function(t){s("zGne")},null,null);e.a=r.exports},zGne:function(t,e){},zicj:function(t,e,s){"use strict";var a=s("vx8o"),i=s.n(a),n={name:"KanbanBoard",props:{stages:{},blocks:{}},data:function(){return{}},computed:{localBlocks:function(){return this.blocks}},methods:{getBlocks:function(t){return this.localBlocks.filter(function(e){return e.status===t})}},mounted:function(){var t=this;i()(this.$refs.list).on("drag",function(t){t.classList.add("is-moving")}).on("drop",function(e,s){var a=0;for(a=0;a<s.children.length&&!s.children[a].classList.contains("is-moving");a+=1);t.$emit("update-block",e.dataset.blockId,s.dataset.status,a)}).on("dragend",function(t){t.classList.remove("is-moving"),window.setTimeout(function(){t.classList.add("is-moved"),window.setTimeout(function(){t.classList.remove("is-moved")},600)},100)})}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"drag-container"},[s("ul",{staticClass:"drag-list"},t._l(t.stages,function(e){return s("li",{key:e,staticClass:"drag-column",class:(a={},a["drag-column-"+e]=!0,a)},[s("span",{staticClass:"drag-column-header"},[s("h2",[t._v(t._s(e))])]),t._v(" "),s("div",{staticClass:"drag-options"}),t._v(" "),s("ul",{ref:"list",refInFor:!0,staticClass:"drag-inner-list",attrs:{"data-status":e}},t._l(t.getBlocks(e),function(e){return s("li",{key:e.id,staticClass:"drag-item",attrs:{"data-block-id":e.id}},[t._t(e.id,[s("strong",[t._v(t._s(e.status))]),t._v(" "),s("div",[t._v(t._s(e.id))])])],2)}))]);var a}))])},staticRenderFns:[]},l=s("VU/8")(n,o,!1,null,null,null);e.a=l.exports}},["NHnr"]);
//# sourceMappingURL=app.429674ce97463500999c.js.map